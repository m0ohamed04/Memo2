<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ff9a9e">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="For Memo ‚ù§Ô∏è">
    <meta name="mobile-web-app-capable" content="yes">

    <title>For Memo ‚ù§Ô∏è</title>
    
    <link rel="icon" type="image/gif" href="https://media.tenor.com/HbsmAg2_OUUAAAAj/newt00th-newtooth.gif">
    <link rel="apple-touch-icon" href="https://media.tenor.com/HbsmAg2_OUUAAAAj/newt00th-newtooth.gif">
    <link rel="shortcut icon" href="https://media.tenor.com/HbsmAg2_OUUAAAAj/newt00th-newtooth.gif">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <style>
        /* --- ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸàÿßŸÑÿ£ŸÑŸàÿßŸÜ --- */
        :root {
            --primary-color: #e91e63;
            --secondary-color: #f48fb1;
            --text-color: #4a0e26;
            --card-bg: rgba(255, 255, 255, 0.85);
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
            --shadow: 0 10px 30px rgba(233, 30, 99, 0.15);
            --btn-gradient: linear-gradient(135deg, #fce4ec, #f8bbd0);
            --btn-text: #880e4f;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 300% 300%;
            animation: gradientBG 15s ease infinite;
            font-family: 'El Messiri', sans-serif;
            height: 100dvh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* --- LOADING SCREEN STYLES --- */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 300% 300%;
            animation: gradientBG 15s ease infinite;
            z-index: 9999;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.6s ease-out;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .loader-content-wrapper {
            display: flex;
            align-items: center;
            flex-direction: row; 
            gap: 15px; 
            margin-bottom: 30px;
            animation: bounceIn 1s infinite alternate cubic-bezier(0.68, -0.55, 0.265, 1.55);
            direction: ltr; 
        }

        @keyframes bounceIn {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }

        .loading-text-container {
            position: relative;
            display: block;
        }

        .loading-title-base {
            font-size: 40px;
            font-weight: 900;
            font-style: italic;
            color: rgba(255, 255, 255, 0.4); 
            font-family: sans-serif;
            letter-spacing: 1px;
            user-select: none;
        }

        .loading-title-fill {
            font-size: 40px;
            font-weight: 900;
            font-style: italic;
            color: #fff; 
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
            font-family: sans-serif;
            letter-spacing: 1px;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            clip-path: inset(0 100% 0 0); 
            user-select: none;
        }

        .heart-loader-container {
            width: 60px; 
            height: 50px;
            position: relative;
        }

        .heart-outline {
            width: 100%;
            height: 100%;
            -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center / contain;
            mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center / contain;
            background: rgba(255, 255, 255, 0.6);
            position: absolute;
            top: 0;
            left: 0;
        }

        .heart-fill {
            width: 100%;
            height: 100%;
            -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center / contain;
            mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>') no-repeat center / contain;
            background: #e91e63;
            position: absolute;
            top: 0;
            left: 0;
            clip-path: inset(100% 0 0 0);
        }

        .loading-text-box {
            background: rgba(255, 255, 255, 0.35);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            padding: 15px 30px;
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.7);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 85%;
            margin-top: 10px;
            transform: translateY(0);
            transition: all 0.3s ease;
        }

        #loading-subtext {
            font-size: 22px;
            font-weight: 800;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.15);
            min-height: 35px;
            color: #880e4f;
        }

        .heart-rain {
            position: absolute;
            color: var(--primary-color);
            top: -10vh;
            font-size: 20px;
            animation: fall linear forwards;
            z-index: 0;
            opacity: 0.6;
            pointer-events: none;
        }

        @keyframes fall {
            to { transform: translateY(110vh) rotate(360deg); }
        }

        .container {
            width: 90%;
            max-width: 400px;
            background: var(--card-bg);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: var(--glass-border);
            border-radius: 35px;
            padding: 35px 25px;
            text-align: center;
            box-shadow: var(--shadow);
            z-index: 10;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            scrollbar-width: none;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .container::-webkit-scrollbar {
            display: none;
        }

        h2 {
            color: var(--text-color);
            font-weight: 700;
            margin: 0;
            font-size: 26px;
            margin-bottom: 5px;
        }

        h3 {
            color: var(--primary-color);
            font-weight: 700;
            margin: 0 0 15px 0;
            font-size: 22px;
        }

        .bear-gif {
            width: 110px;
            margin: 0 auto;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
        }

        .msg-gif {
            width: 140px;
            margin: 0 auto 15px auto;
            display: block;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
        }

        .info-box {
            background: rgba(255, 255, 255, 0.6);
            padding: 15px;
            border-radius: 20px;
            color: var(--text-color);
            line-height: 1.8;
            font-size: 17px;
            font-weight: 600;
            border: 1px solid #fff;
            width: 100%;
            box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }

        .fadfada-box {
            width: 100%;
            height: 160px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            padding: 15px;
            font-family: 'El Messiri', sans-serif;
            font-size: 16px;
            color: #333;
            outline: none;
            resize: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
            transition: 0.3s;
            margin-top: 5px;
        }

        .fadfada-box:focus {
            border-color: var(--primary-color);
            background: #fff;
        }

        .fadfada-box::placeholder {
            color: #aaa;
        }

        .special-msg-box {
            background: #fff5f8;
            padding: 20px;
            border-radius: 20px;
            color: #880e4f;
            font-size: 17px;
            line-height: 1.9;
            font-weight: 600;
            border: 2px dashed var(--secondary-color);
            white-space: pre-line;
            animation: popText 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            text-align: right;
            direction: rtl;
        }

        @keyframes popText {
            0% { opacity: 0; transform: scale(0.8) translateY(10px); }
            100% { opacity: 1; transform: scale(1) translateY(0); }
        }

        input[type="password"] {
            width: 100%;
            padding: 15px;
            border-radius: 50px;
            border: 2px solid transparent;
            background: #fff;
            text-align: center;
            font-size: 22px;
            color: var(--primary-color);
            letter-spacing: 5px;
            outline: none;
            transition: 0.3s;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 5px;
        }

        input[type="password"]:focus {
            border-color: var(--secondary-color);
        }

        button {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #ff3366, #ff6b8b);
            color: white;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3);
            font-family: 'El Messiri', sans-serif;
            margin: 0;
            -webkit-user-select: none;
            user-select: none;
        }

        button:active {
            transform: scale(0.97);
        }

        .spacer-btn {
            margin-top: 5px !important;
            margin-bottom: 5px !important;
        }

        .back-btn {
            background: linear-gradient(135deg, #cfd9df, #e2ebf0);
            color: #555;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-top: 10px;
        }

        .emergency-btn {
            background: linear-gradient(135deg, #ff512f, #dd2476);
            animation: pulseRed 2s infinite;
            margin-top: 15px;
        }

        @keyframes pulseRed {
            0%, 100% { box-shadow: 0 0 0 0 rgba(221, 36, 118, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(221, 36, 118, 0); }
        }

        .flashcard-container {
            width: 100%;
            height: 250px;
            position: relative;
            perspective: 1000px;
            margin-bottom: 10px;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            position: absolute;
            top: 0;
            left: 0;
            backface-visibility: hidden;
            transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.6s ease;
            border: 2px solid var(--secondary-color);
        }

        .flashcard.out {
            transform: translateX(-120%) rotate(-15deg);
            opacity: 0;
        }

        .flashcard.in {
            transform: translateX(0) rotate(0deg);
            opacity: 1;
        }

        #weather-icon {
            font-size: 80px;
            margin: 5px 0;
            animation: floatIcon 3s ease-in-out infinite;
            text-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        @keyframes floatIcon {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #weather-temp {
            font-size: 32px;
            font-weight: 800;
            color: #555;
            margin-bottom: 10px;
        }

        .grid-menu {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            width: 100%;
            margin-bottom: 5px;
            margin-top: 5px;
        }

        .grid-menu button {
            font-size: 15px;
            background: var(--btn-gradient);
            color: var(--btn-text);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }

        .mood-btn {
            background: linear-gradient(135deg, #e0c3fc, #8ec5fc) !important;
            color: #fff !important;
        }

        .visa-btn {
            background: linear-gradient(135deg, #434343, #000000) !important;
            color: #fff !important;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4) !important;
        }

        .new-msg-btn {
            background: linear-gradient(135deg, #84fab0, #8fd3f4) !important;
            color: #006466 !important;
            grid-column: span 2;
        }

        .fadfada-btn {
            background: linear-gradient(135deg, #a6c0fe, #f68084) !important;
            color: white !important;
            grid-column: span 2;
        }

        .weather-btn {
            background: linear-gradient(135deg, #89f7fe, #66a6ff) !important;
            color: white !important;
            grid-column: span 2;
        }

        .music-player {
            background: #fff;
            padding: 10px 20px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            width: 100%;
        }

        .song-info {
            text-align: right;
            font-size: 14px;
            font-weight: bold;
            color: var(--text-color);
        }

        .music-controls button {
            width: 38px;
            height: 38px;
            padding: 0;
            margin: 0 3px;
            border-radius: 50%;
            font-size: 14px;
            box-shadow: none;
            background: linear-gradient(135deg, #ff80ab, #ff4081);
            color: white;
        }

        .timer-container {
            display: flex;
            justify-content: space-between;
            gap: 8px;
            direction: ltr;
            margin-top: 5px;
        }

        .time-unit {
            background: #fff;
            padding: 10px 0;
            border-radius: 15px;
            flex: 1;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .time-number {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary-color);
            line-height: 1.1;
        }

        .time-label {
            font-size: 12px;
            color: #888;
            font-weight: 700;
            margin-top: 2px;
        }

        /* --- VISA CARD --- */
        .credit-card {
            width: 100%;
            aspect-ratio: 1.586 / 1;
            background: linear-gradient(135deg, #1f1f1f 0%, #2c3e50 50%, #000000 100%);
            border-radius: 16px;
            padding: 20px;
            color: #fff;
            text-align: left;
            position: relative;
            box-shadow: 0 15px 35px rgba(0,0,0,0.4);
            margin-bottom: 10px;
            border: 1px solid rgba(255,255,255,0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            overflow: hidden;
            font-family: 'Share Tech Mono', monospace;
        }

        .credit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(115deg, transparent 40%, rgba(255,255,255,0.1) 45%, transparent 50%);
            pointer-events: none;
        }

        .card-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .card-chip {
            width: 45px;
            height: 35px;
            background: linear-gradient(135deg, #d4af37 0%, #f9e29a 50%, #d4af37 100%);
            border-radius: 6px;
            border: 1px solid #b8860b;
            position: relative;
        }

        .card-chip::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 1px;
            background: #b8860b;
        }

        .card-chip::before {
            content: '';
            position: absolute;
            left: 30%;
            top: 15%;
            width: 40%;
            height: 70%;
            border: 1px solid #b8860b;
            border-top: none;
            border-bottom: none;
        }

        .wifi-icon {
            width: 30px;
            height: 30px;
            opacity: 0.8;
            fill: #fff;
            margin-left: 10px;
            transform: rotate(90deg);
        }

        .card-number {
            font-size: 19px;
            letter-spacing: 2px;
            margin: 15px 0;
            color: #fff;
            text-shadow: 1px 1px 2px #000;
            z-index: 2;
        }

        .card-balance-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-balance {
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
            color: #fff;
            direction: ltr;
        }

        .card-info-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            width: 100%;
            margin-top: 5px;
        }

        .info-group {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 9px;
            text-transform: uppercase;
            color: #ccc;
            margin-bottom: 2px;
        }

        .info-value {
            font-size: 14px;
            text-transform: uppercase;
            text-shadow: 1px 1px 1px #000;
            letter-spacing: 1px;
        }

        .visa-logo {
            width: 50px;
            height: auto;
            fill: #fff;
            font-style: italic;
            font-weight: bold;
            font-size: 24px;
            text-align: right;
            opacity: 0.9;
        }

        /* --- ÿßŸÑÿ£ŸÑÿπÿßÿ® --- */
        .games-menu {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .game-wrapper {
            display: none;
        }

        .rps-score {
            display: flex;
            justify-content: space-around;
            background: #fff;
            padding: 15px;
            border-radius: 20px;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .rps-btn {
            font-size: 35px;
            width: 70px;
            height: 70px;
            background: #fff;
            border: 2px solid #eee;
            margin: 0 5px;
        }

        .rps-result {
            font-size: 20px;
            font-weight: bold;
            margin-top: 20px;
            min-height: 60px;
            color: var(--primary-color);
        }

        #flappy-canvas {
            background: #87CEEB;
            border-radius: 15px;
            border: 3px solid #333;
            margin: 0 auto;
            display: block;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            touch-action: none;
        }

        .flappy-score-board {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            font-weight: bold;
            font-size: 16px;
        }

        .flappy-msg-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.98);
            padding: 25px;
            border-radius: 25px;
            width: 85%;
            text-align: center;
            border: 2px solid var(--primary-color);
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            display: none;
            z-index: 20;
        }

        .puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            width: 270px;
            height: 270px;
            margin: 0 auto;
            border: 3px solid #fff;
            border-radius: 10px;
            overflow: hidden;
            background: #eee;
        }

        .puzzle-tile {
            width: 90px;
            height: 90px;
            background-size: 270px 270px;
            cursor: pointer;
            transition: transform 0.2s ease-in-out;
        }

        .puzzle-empty {
            background: transparent !important;
            cursor: default;
        }

        .puzzle-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: bold;
            color: #444;
        }

        .puzzle-timer-val {
            color: #d32f2f;
            font-size: 18px;
        }

        .puzzle-best-val {
            color: #4CAF50;
            font-size: 18px;
        }

        .puzzle-msg {
            font-size: 18px;
            font-weight: bold;
            color: var(--primary-color);
            margin-top: 10px;
            display: none;
        }

        .level-btns {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .level-btn {
            background: #fff;
            color: #333;
            padding: 8px 15px;
            font-size: 14px;
            border-radius: 20px;
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
            width: auto;
            border: 1px solid #ddd;
        }

        .level-btn.active {
            background: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
        }

        .game-area {
            width: 100%;
            height: 300px;
            background: rgba(0,0,0,0.03);
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            border: 2px dashed var(--secondary-color);
            margin-bottom: 10px;
        }

        .game-item {
            position: absolute;
            font-size: 45px;
            cursor: pointer;
            animation: fallGame 1.5s linear forwards;
            user-select: none;
            z-index: 5;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @keyframes fallGame {
            to { top: 100%; }
        }

        .game-over-msg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.98);
            padding: 25px;
            border-radius: 20px;
            width: 90%;
            font-weight: bold;
            color: var(--primary-color);
            display: none;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
            z-index: 10;
            border: 1px solid var(--secondary-color);
        }

        .whack-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            width: 100%;
            height: 300px;
            margin: 15px 0;
        }

        .whack-hole {
            background: #ffccbc;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 3px solid #ff8a65;
            box-shadow: inset 0 5px 10px rgba(0,0,0,0.2);
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><text y="20" font-size="20">ü©¥</text></svg>') 16 16, pointer;
            transition: background-color 0.1s;
        }

        .whack-hole.active-hit {
            background-color: #ff5252;
        }

        .whack-mole {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 100%;
            left: 0;
            transition: top 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            user-select: none;
        }

        .whack-mole.up {
            top: 0;
        }

        .whack-mole.hit {
            animation: hitShake 0.2s ease;
            filter: grayscale(0.5);
        }

        @keyframes hitShake {
            0% { transform: translate(0, 0) rotate(0); }
            25% { transform: translate(-8px, 8px) rotate(-15deg); }
            50% { transform: translate(8px, -8px) rotate(15deg); }
            75% { transform: translate(-5px, 0) rotate(-5deg); }
            100% { transform: translate(0, 0) rotate(0); }
        }

        .whack-score-board {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .floating-text {
            position: absolute;
            font-size: 18px;
            font-weight: 900;
            color: #d32f2f;
            pointer-events: none;
            animation: floatUp 0.6s ease-out forwards;
            z-index: 20;
            text-shadow: 2px 2px 0 #fff, -1px -1px 0 #fff;
            white-space: nowrap;
        }

        @keyframes floatUp {
            0% { opacity: 1; transform: translateY(0) scale(1); }
            100% { opacity: 0; transform: translateY(-50px) scale(1.5); }
        }

        /* --- CHAT BOT STYLES --- */
        #chat-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00C6FF, #0072FF);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer;
            z-index: 2000;
            transition: transform 0.3s;
            animation: bounceIcon 2s infinite;
            position: fixed; /* Ensuring it stays fixed */
        }

        @keyframes bounceIcon {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        #chat-icon:hover {
            transform: scale(1.1);
        }

        /* ÿπÿØÿßÿØ ÿßŸÑÿ±ÿ≥ÿßÿ¶ŸÑ (Badge) */
        .chat-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff3b30;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            animation: popIn 0.3s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0); }
            100% { transform: scale(1); }
        }

        #chat-window {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 320px;
            height: 450px;
            background: #fff;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            z-index: 2000;
            border: 1px solid #eee;
            transform-origin: bottom right;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        #chat-window.hidden {
            transform: scale(0);
            opacity: 0;
            pointer-events: none;
        }

        .chat-header {
            background: linear-gradient(135deg, #00C6FF, #0072FF);
            padding: 15px;
            color: white;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 18px;
        }

        .chat-header span {
            cursor: pointer;
            font-size: 14px;
            background: rgba(0,0,0,0.1);
            padding: 5px 10px;
            border-radius: 15px;
        }

        .chat-actions {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #chat-body {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background: #f9f9f9;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .chat-msg {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            font-size: 14px;
            line-height: 1.4;
            position: relative;
            word-wrap: break-word;
        }

        .user-msg {
            align-self: flex-end;
            background: #DCF8C6;
            color: #333;
            border-bottom-right-radius: 2px;
        }

        .bot-msg {
            align-self: flex-start;
            background: #fff;
            color: #333;
            border: 1px solid #eee;
            border-bottom-left-radius: 2px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        /* --- TIMESTAMP STYLE --- */
        .msg-time {
            display: block;
            font-size: 10px;
            margin-top: 4px;
            opacity: 0.7;
            text-align: left; 
        }
        .user-msg .msg-time {
            text-align: right;
            color: #444;
        }

        .chat-input-area {
            padding: 10px;
            background: #fff;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #chat-input {
            flex: 1;
            padding: 10px;
            border-radius: 20px;
            border: 1px solid #ddd;
            outline: none;
            font-family: 'El Messiri', sans-serif;
        }

        .chat-input-area button {
            width: 40px;
            height: 40px;
            padding: 0;
            border-radius: 50%;
            background: #0072FF;
            color: white;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .typing-indicator {
            font-size: 12px;
            color: #888;
            font-style: italic;
            margin-left: 10px;
            display: none;
            align-self: flex-start;
            margin-bottom: 5px;
        }

        .typing-indicator span {
            display: inline-block;
            width: 5px;
            height: 5px;
            background: #aaa;
            border-radius: 50%;
            margin: 0 1px;
            animation: typing 1s infinite;
        }

        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; }
        .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .fingerprint {
            font-size: 80px;
            color: #e0e0e0;
            margin: 20px 0;
            transition: 0.3s;
            cursor: pointer;
        }

        .fingerprint.active {
            color: var(--primary-color);
            transform: scale(1.1);
            text-shadow: 0 0 25px var(--primary-color);
        }

        .love-result {
            font-size: 22px;
            font-weight: 800;
            color: var(--primary-color);
            display: none;
            margin-top: 20px;
            animation: popIn 0.5s ease;
        }

        iframe {
            width: 100%;
            height: 240px;
            border-radius: 25px;
            border: 4px solid #fff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .fake-notification {
            position: fixed;
            top: -600px; /* CHANGED FROM -100px TO -600px TO ENSURE LONG TEXT HIDES */
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 12px 20px;
            border-radius: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 15px;
            width: 90%;
            max-width: 350px;
            transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.5);
        }

        .notif-icon {
            width: 40px;
            height: 40px;
            background: #25d366;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .notif-content div:first-child {
            font-weight: bold;
            font-size: 14px;
            text-align: right;
            margin-bottom: 2px;
        }

        .notif-content div:last-child {
            font-size: 12px;
            color: #555;
            text-align: right;
        }

        .signature {
            font-size: 12px;
            margin-top: 35px;
            color: #777;
            font-weight: bold;
            opacity: 0.8;
        }

        .signature span {
            color: red;
            animation: beat 1s infinite;
            display: inline-block;
        }

        @keyframes beat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .icons-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.5);
            width: 100%;
        }

        .icon-btn {
            width: 50px;
            height: 50px;
            background: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: none;
            cursor: pointer;
            padding: 0;
        }

        .icon-btn svg {
            width: 24px;
            fill: var(--primary-color);
        }

        .icon-btn:hover {
            transform: translateY(-5px);
            background: var(--primary-color);
        }

        .icon-btn:hover svg {
            fill: #fff;
        }

        .flower-img {
            width: 200px;
            filter: drop-shadow(0 10px 20px rgba(255,105,180,0.3));
            margin-bottom: 20px;
        }

        .hidden {
            display: none !important;
        }

        .stagger-in {
            opacity: 0;
            transform: translateY(15px);
            animation: fadeInSmooth 0.6s ease-out forwards;
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }

        @keyframes fadeInSmooth {
            to { opacity: 1; transform: translateY(0); }
        }

        .shake {
            animation: shake 0.4s ease-in-out;
            border: 2px solid var(--primary-color) !important;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="loader-content-wrapper">
            <div class="loading-text-container">
                <div class="loading-title-base">Loading.....</div>
                <div class="loading-title-fill" id="animated-text-fill">Loading.....</div>
            </div>
            <div class="heart-loader-container">
                <div class="heart-outline"></div>
                <div class="heart-fill" id="animated-heart-fill"></div>
            </div>
        </div>
        <div class="loading-text-box">
            <div id="loading-subtext">ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ£ŸÉÿØ ÿ•ŸÜŸÉ ŸÖŸäŸÖŸà... üßê</div>
        </div>
    </div>

    <audio id="bg-music" preload="auto"><source src="" type="audio/mpeg"></audio>
    <audio id="voice-note" preload="auto"><source src="voice.mp3" type="audio/mpeg"></audio>
    <audio id="cash-sound" preload="auto"><source src="cash.mp3" type="audio/mpeg"></audio>
    <audio id="punch-sound" preload="auto"><source src="punch.mp3" type="audio/mpeg"></audio>
    <audio id="msg-sound" preload="auto"><source src="msg.mp3" type="audio/mpeg"></audio>

    <div id="fake-notif" class="fake-notification">
        <div class="notif-icon">üí¨</div>
        <div class="notif-content">
            <div>ÿ±ÿ≥ÿßŸÑÿ© ŸÖŸÜ ÿ≠ŸÖŸàÿØŸä</div>
            <div id="notif-message">...</div>
        </div>
    </div>

    <div id="chat-icon" class="hidden" onclick="toggleChat()">
        üí¨
        <div id="chat-badge" class="chat-badge hidden">0</div>
    </div>

    <div id="chat-window" class="hidden">
        <div class="chat-header">
            ÿ≠ŸÖŸàÿØŸä ü§ñ
            <div class="chat-actions">
                <span onclick="clearChat()" title="ŸÖÿ≥ÿ≠ ÿßŸÑÿ¥ÿßÿ™" style="font-size: 16px;">üóëÔ∏è</span>
                <span onclick="toggleChat()" title="ÿ•ÿ∫ŸÑÿßŸÇ">‚úñÔ∏è</span>
            </div>
        </div>
        <div id="chat-body">
            </div>
        <div class="typing-indicator" id="typing-indicator">ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÉÿ™ÿßÿ®ÿ© <span></span><span></span><span></span></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="ÿßŸÉÿ™ÿ®Ÿä ŸáŸÜÿß..." onkeypress="if(event.key==='Enter') sendChatMessage()">
            <button onclick="sendChatMessage()">‚û§</button>
        </div>
    </div>

    <div class="container" id="main-container">
        
        <div id="login-screen" style="display: flex; flex-direction: column; gap: 20px;">
            <img src="https://i.pinimg.com/originals/83/e2/a1/83e2a104d404d885af6a46f1b4ac435a.gif" class="bear-gif" alt="Bear">
            <h2 class="stagger-in delay-1">ÿßŸÑÿ®ÿßÿ≥Ÿàÿ±ÿØ Ÿäÿß ŸÉŸàÿ™Ÿä üêª</h2>
            <input type="password" id="password" inputmode="numeric" placeholder="******" class="stagger-in delay-2">
            <div id="error" style="display:none; color:#d90429; font-weight:bold; font-size:14px;">ÿßŸÑÿ®ÿßÿ≥Ÿàÿ±ÿØ ÿ∫ŸÑÿ∑ Ÿäÿß  ŸÖŸäŸÖŸà Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ≠ÿßŸàŸÑŸä ÿ™ÿßŸÜŸä!</div>
            <button onclick="checkPassword()" class="stagger-in delay-3">ÿØÿÆŸàŸÑ ‚ù§Ô∏è</button>
        </div>

        <div id="main-menu" class="hidden">
            <h2 id="greeting-msg" class="stagger-in delay-1">...</h2>
            
            <div class="music-player stagger-in delay-2">
                <div class="song-info">
                    <span style="font-size:10px; color:#888;">ÿ¥ÿ∫ÿßŸÑ:</span>
                    <span id="current-song-name">ÿ£ÿ∫ŸÜŸäÿ© 1 üéµ</span>
                </div>
                <div class="music-controls">
                    <button onclick="toggleMusic()">‚èØ</button>
                    <button onclick="nextSong()">‚è≠</button>
                </div>
            </div>

            <div class="info-box stagger-in delay-2" style="padding: 10px;">
                <div style="font-size:14px; margin-bottom:8px; color:#666; font-weight:bold;">ÿßŸÑÿπŸÖÿ± ŸÉŸÑŸà ŸÖÿπ ÿ®ÿπÿ∂ Ÿäÿßÿ±ÿ® ‚ù§Ô∏è</div>
                <div class="timer-container">
                    <div class="time-unit"><span id="days" class="time-number">0</span><span class="time-label">ŸäŸàŸÖ</span></div>
                    <div class="time-unit"><span id="hours" class="time-number">0</span><span class="time-label">ÿ≥ÿßÿπÿ©</span></div>
                    <div class="time-unit"><span id="minutes" class="time-number">0</span><span class="time-label">ÿØŸÇŸäŸÇÿ©</span></div>
                    <div class="time-unit"><span id="seconds" class="time-number">0</span><span class="time-label">ÿ´ÿßŸÜŸäÿ©</span></div>
                </div>
            </div>

            <button onclick="showSection('message-section')" class="stagger-in delay-3 spacer-btn">üíå ÿ±ÿ≥ÿßŸÑÿ™Ÿä</button>
            
            <div class="grid-menu stagger-in delay-4">
                <button onclick="showSection('open-when-section')">üíå ÿßŸÅÿ™ÿ≠ŸäŸáÿß ŸÑŸÖÿß</button>
                <button onclick="showSection('jar-section')">üé∞ ÿ®ÿ±ÿ∑ŸÖÿßŸÜ ÿßŸÑÿ≥ÿπÿßÿØÿ©</button>
                <button onclick="showSection('voice-section')">üé§ ÿ™ÿπÿßŸÑŸä ÿßŸÇŸàŸÑŸÉ ÿ≠ÿßÿ¨Ÿá</button>
                <button onclick="showSection('games-hub')">üéÆ ÿ™ÿπÿßŸÑŸä ŸÜŸÑÿπÿ®</button>
                <button onclick="showSection('wheel-section')">üé° ŸÜÿÆÿ±ÿ¨ ŸÅŸäŸÜÿü</button>
                <button onclick="showSection('love-meter-section')">üëÜ ŸÖŸÇŸäÿßÿ≥ ÿßŸÑÿ≠ÿ®</button>
                <button onclick="showSection('flower-section')">üå∏ ÿ™ÿßÿÆÿØŸä Ÿàÿ±ÿØÿü</button>
                <button onclick="showSection('visa-section')" class="visa-btn">üí≥ ŸÅŸäÿ≤ÿß</button>
                <button onclick="showSection('new-msg-section')" class="new-msg-btn">üìù ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿßÿµÿ© ŸÑŸäŸÉŸä</button>
                <button onclick="showSection('fadfada-section')" class="fadfada-btn">‚òÅÔ∏è ŸÅÿ∂ŸÅÿ∂ÿ© ŸÑÿ≠ŸÖŸàÿØŸä</button>
                <button onclick="showSection('weather-section')" class="weather-btn">üå§Ô∏è ŸÜÿ¥ÿ±ÿ© ÿ≠ŸÖŸàÿØŸä</button>
            </div>

            <button onclick="showSection('promises-section')" class="stagger-in delay-5 spacer-btn">üìú ÿ®ŸàÿπÿØŸÉ</button>

            <a href="tel:01223377869" style="text-decoration:none;">
                <button class="emergency-btn stagger-in delay-5">üö® ÿ≤ÿ±ÿßÿ± ÿßŸÑÿ∑Ÿàÿßÿ±ÿ¶</button>
            </a>

            <div class="icons-container stagger-in delay-5">
                <a href="https://sites.google.com/view/basbosaskndrany04" target="_blank" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg></a>
                <button onclick="showSection('video-section')" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg></button>
                <a href="https://sites.google.com/view/13-112025" target="_blank" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>
            </div>

            <div class="signature stagger-in delay-5">Made with <span>‚ù§Ô∏è</span> by Hamody</div>
        </div>

        <div id="weather-section" class="hidden">
            <h2>ŸÜÿ¥ÿ±ÿ© ÿ£ÿÆÿ®ÿßÿ± ÿ≠ŸÖŸàÿØŸä üå§Ô∏è</h2>
            <div id="weather-icon">‚òÄÔ∏è</div>
            <div id="weather-temp">--¬∞C</div>
            <div class="info-box" id="weather-msg">ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ŸÇÿ≥...</div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="fadfada-section" class="hidden">
            <h2>ŸÅÿ∂ŸÅÿ∂Ÿä Ÿäÿß ÿ±Ÿàÿ≠Ÿä ‚òÅÔ∏è</h2>
            <div class="info-box" style="margin-bottom:10px;">
                ŸÖÿ™ÿÆÿ®Ÿäÿ¥ ÿ≠ÿßÿ¨ÿ© ŸÅŸä ŸÇŸÑÿ®ŸÉ.. ÿßŸÉÿ™ÿ®Ÿä ŸÉŸÑ ÿßŸÑŸÑŸä ŸÖÿ∂ÿßŸäŸÇŸÉ Ÿàÿ£ŸÜÿß Ÿáÿ≥ŸÖÿπŸÉ ŸàŸáŸÉŸàŸÜ ÿ¨ŸÖÿ®ŸÉ ÿØÿßŸäŸÖÿßŸã ‚ù§Ô∏è
            </div>
            <textarea id="fadfada-text" class="fadfada-box" placeholder="ÿ≥ÿßŸÖÿπŸÉ Ÿäÿß ŸÖŸäŸÖŸà.. ÿßŸÉÿ™ÿ®Ÿä ŸáŸÜÿß ŸÉŸÑ ÿßŸÑŸÑŸä ŸÅŸä ŸÜŸÅÿ≥ŸÉ..."></textarea>
            <button onclick="sendFadfadaEmail()" style="background: linear-gradient(135deg, #2196F3, #21CBF3); margin-top: 15px; box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);">ÿ•ÿ±ÿ≥ÿßŸÑ ŸÑÿ≠ŸÖŸàÿØŸä üì§</button>
            <div style="font-size:10px; color:#999; margin-top:5px; font-weight:bold;">(ŸáŸäŸÅÿ™ÿ≠ ÿßŸÑÿ•ŸäŸÖŸäŸÑ ÿπÿ¥ÿßŸÜ ÿ™ÿ®ÿπÿ™ŸäŸáÿß ÿπŸÑÿ∑ŸàŸÑ)</div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="visa-section" class="hidden">
            <h2>ÿ®ŸÜŸÉ ÿßŸÑÿ≠ÿ® ‚ù§Ô∏è</h2>
            <div class="credit-card">
                <div class="card-top">
                    <div class="card-chip"></div>
                    <svg class="wifi-icon" viewBox="0 0 24 24"><path d="M12 6c3.03 0 5.78 1.11 7.9 2.93l-1.42 1.42C16.69 8.9 14.47 8 12 8c-2.47 0-4.69.9-6.49 2.35l-1.42-1.42C6.22 7.11 8.97 6 12 6zm0 4c2.08 0 3.97.76 5.43 2.01l-1.43 1.43C15.11 12.63 13.64 12 12 12s-3.11.63-4.01 1.44l-1.43-1.43C8.03 10.76 9.92 10 12 10zm0 4c1.13 0 2.16.41 2.96 1.09l-1.45 1.45C13.15 16.27 12.61 16 12 16s-1.15.27-1.52.54l-1.45-1.45C9.84 14.41 10.87 14 12 14z"/></svg>
                </div>
                
                <div class="card-balance-container">
                    <div class="card-number">4532  9012  3456  0409</div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                    <div style="width: 70%;">
                        <div class="card-balance" id="card-balance-txt">$4,000,000</div>
                        <div class="card-info-row">
                            <div class="info-group">
                                <span class="info-label">Card Holder</span>
                                <span class="info-value">Omama Alaa</span>
                            </div>
                            <div class="info-group" style="margin-left: 15px;">
                                <span class="info-label">Expires</span>
                                <span class="info-value">09/19</span>
                            </div>
                        </div>
                    </div>
                    <div class="visa-logo">VISA</div>
                </div>
            </div>
            
            <button onclick="withdrawMoney()" style="background:#4CAF50; margin-top:10px;">ÿ≥ÿ≠ÿ® 10,000$ üí∏</button>
            <div class="info-box" style="margin-top:20px; background:#fff; font-weight:bold; color:var(--primary-color);">ÿßÿµÿ±ŸÅŸä Ÿäÿ±Ÿàÿ≠Ÿä ÿ®ÿ±ÿßÿ≠ÿ™ŸÉ ÿßŸáŸÖ 4 ŸÖŸÑŸäŸàŸÜ ÿØŸàŸÑÿßÿ± ŸÖÿ¥ 2 ÿ®ÿ≥ Ÿäÿß ŸÉŸàÿ™Ÿä üòâüí∏</div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="games-hub" class="hidden">
            <h2>ÿ™ÿπÿßŸÑŸä ŸÜŸÑÿπÿ® ÿ≥Ÿàÿß üéÆ</h2>
            
            <div id="games-menu" class="games-menu">
                <button onclick="showGame('whack-game')" style="background: linear-gradient(135deg, #ff9a9e, #e91e63); color:white;">ü•ä ÿßÿ∂ÿ±ÿ®Ÿä ÿ≠ŸÖŸàÿØŸä</button>
                <button onclick="showGame('rps-game')" style="background: linear-gradient(135deg, #ffb7b2, #ff9a9e); color:white;">‚úåÔ∏è ÿ≠ÿ¨ÿ±ÿ© Ÿàÿ±ŸÇÿ© ŸÖŸÇÿµ</button>
                <button onclick="showGame('flappy-game')" style="background: linear-gradient(135deg, #a2d2ff, #bde0fe); color:#333;">ü¶Ö ŸÅŸÑÿßÿ®Ÿä Ÿáÿßÿ±ÿ™</button>
                <button onclick="showGame('collect-game')" style="background: linear-gradient(135deg, #ffccbc, #ffab91); color:white;">‚ù§Ô∏è ÿ™ÿπÿßŸÑŸä ŸÜÿ¨ŸÖÿπ ÿßŸÑŸÇŸÑŸàÿ®</button>
                <button onclick="showGame('puzzle-game')" style="background: linear-gradient(135deg, #c5cae9, #9fa8da); color:white;">üß© ÿ®ÿßÿ≤ŸÑ</button>
            </div>

            <div id="whack-game" class="game-wrapper">
                <h3>ÿ∑ŸÑÿπŸä ÿ∫ŸÑŸÉ ŸÅŸäÿß ü•ä</h3>
                <div class="whack-score-board">
                    <span>ÿßŸÑÿ∂ÿ±ÿ®ÿßÿ™: <span id="whack-score">0</span></span>
                    <span>ŸÅÿßÿ∂ŸÑ: <span id="whack-time">20</span>ÿ´</span>
                </div>
                <div class="whack-grid" id="whack-grid">
                    </div>
                <div id="whack-msg" style="display:none; font-weight:bold; color:var(--primary-color); font-size:18px; margin-top:10px;"></div>
                <button onclick="startWhackGame()" style="background:#d32f2f; margin-top:10px;">ŸäŸÑÿß ÿßÿ∂ÿ±ÿ®Ÿä üò°</button>
                <button class="back-btn" onclick="showGame('menu')">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ®</button>
            </div>

            <div id="rps-game" class="game-wrapper">
                <h3>ÿ≠ÿ¨ÿ±ÿ© Ÿàÿ±ŸÇÿ© ŸÖŸÇÿµ ‚úåÔ∏è</h3>
                <div class="rps-score">
                    <div>ŸÖŸäŸÖŸà: <span id="user-rps-score">0</span></div>
                    <div>ÿ≠ŸÖŸàÿØŸä: <span id="comp-rps-score">0</span></div>
                </div>
                <div class="rps-result" id="rps-result">ÿßŸÑÿπÿ®Ÿä ÿ®ŸÇŸä ŸÖÿ¥ ŸáÿÆÿ≥ÿ± ÿ≤Ÿä ŸÉŸÑ ŸÖÿ±Ÿá !</div>
                <div class="rps-choices">
                    <button class="rps-btn" onclick="rpsPlay('rock')">‚úä</button>
                    <button class="rps-btn" onclick="rpsPlay('paper')">‚úã</button>
                    <button class="rps-btn" onclick="rpsPlay('scissors')">‚úåÔ∏è</button>
                </div>
                <button class="back-btn" onclick="showGame('menu')">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ®</button>
            </div>

            <div id="flappy-game" class="game-wrapper">
                <h3>ŸÅŸÑÿßÿ®Ÿä Ÿáÿßÿ±ÿ™ ‚ù§Ô∏è</h3>
                <div class="flappy-score-board">
                    <span>ÿ≥ŸÉŸàÿ±: <span id="flappy-score">0</span></span>
                    <span>ÿ£ÿπŸÑŸâ: <span id="flappy-high">0</span></span>
                </div>
                <div style="position:relative;">
                    <canvas id="flappy-canvas" width="280" height="350"></canvas>
                    <div id="flappy-end-msg" class="flappy-msg-box"></div>
                </div>
                <div id="flappy-start-hint" style="margin-top:10px; font-weight:bold; color:var(--primary-color);">ÿØŸàÿ≥Ÿä ÿπÿ¥ÿßŸÜ ÿ™ÿ∑Ÿäÿ± ü¶Ö</div>
                <button onclick="startFlappy()" style="background:#4CAF50; margin-top:5px;" id="flappy-start-btn">ÿßÿ®ÿØÿ£</button>
                <button class="back-btn" onclick="showGame('menu')">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ®</button>
            </div>

            <div id="collect-game" class="game-wrapper">
                <h3>ÿ™ÿπÿßŸÑŸä ŸÜÿ¨ŸÖÿπ ÿßŸÑŸÇŸÑŸàÿ® ‚ù§Ô∏è</h3>
                <div style="display:flex; justify-content:space-between; width:100%; padding:0 5px; font-weight:bold; font-size:14px; margin-bottom:10px;">
                    <span>ÿ≥ŸÉŸàÿ±: <span id="score">0</span></span>
                    <span>ÿ£ÿπŸÑŸâ: <span id="high-score" style="color:#2196F3;">0</span></span>
                    <span>ŸàŸÇÿ™: <span id="game-timer" style="color:red;">30</span></span>
                </div>
                <div class="game-area" id="game-area">
                    <div class="game-over-msg" id="game-over-msg"></div>
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:#999;" id="start-hint">ÿØŸàÿ≥Ÿä ÿßÿ®ÿØÿ£ ‚¨áÔ∏è</div>
                </div>
                <button onclick="startGame()" style="background:#4CAF50;" id="start-game-btn">ÿßÿ®ÿØÿ£ ÿßŸÑŸÑÿπÿ® üéÆ</button>
                <button class="back-btn" onclick="showGame('menu')">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ®</button>
            </div>

            <div id="puzzle-game" class="game-wrapper">
                <h3>ÿ®ÿßÿ≤ŸÑ üß©</h3>
                <div class="level-btns">
                    <button class="level-btn active" id="lvl-1" onclick="setLevel(1)">Level 1</button>
                    <button class="level-btn" id="lvl-2" onclick="setLevel(2)">Level 2</button>
                    <button class="level-btn" id="lvl-3" onclick="setLevel(3)">Level 3</button>
                </div>
                <div class="puzzle-stats">
                    <span id="puzzle-timer" class="puzzle-timer-val">ÿßŸÑŸàŸÇÿ™: 0 ÿ´</span>
                    <span id="puzzle-best" class="puzzle-best-val">ÿ£ŸÅÿ∂ŸÑ: --</span>
                </div>
                <div class="puzzle-container" id="puzzle-container"></div>
                <div class="puzzle-msg" id="puzzle-msg"></div>
                <button onclick="startPuzzle()" style="background:#4CAF50; margin-top:10px;">ÿßÿ®ÿØÿ£ ÿßŸÑÿ®ÿßÿ≤ŸÑ</button>
                <button class="back-btn" onclick="showGame('menu')">ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ŸÑÿπÿßÿ®</button>
            </div>

            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ ŸÑŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
        </div>

        <div id="new-msg-section" class="hidden">
            <h2>ÿ±ÿ≥ÿßŸÑÿ© ÿÆÿßÿµÿ© ŸÑŸäŸÉŸä ‚ù§Ô∏è</h2>
            <img src="https://i.pinimg.com/originals/15/3c/59/153c59185cc57bf81b69c4a0e692eaae.gif" class="msg-gif" alt="Cute Bear">
            <div class="special-msg-box">ÿ®ÿµÿ±ÿßÿ≠Ÿá ŸÉÿØÿß Ÿä ŸÖŸäŸÖŸà .. <br> ÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä ÿßŸàŸä ÿßŸàŸä ŸÅŸàŸÇ ŸÖŸÜÿ™Ÿä ÿ™ÿ™ÿÆŸäŸÑŸä Ÿàÿ®ÿ™Ÿàÿ≠ÿ¥ŸäŸÜŸä ÿ®ÿ∑ÿ±ŸäŸÇŸá ŸÅÿ∏ŸäÿπŸá ÿ®ÿ®ŸÇŸä ÿ™ÿßŸäŸá ŸàŸàÿ≠ÿ¥ ŸÖŸÜ ÿ∫Ÿäÿ±ŸÉ Ÿàÿ¨ŸàÿØŸÉ ŸÜÿπŸÖŸá ŸÅÿ≠Ÿäÿßÿ™Ÿä Ÿäÿ®ÿÆÿ™Ÿä ÿ®ŸäŸÉŸä ŸàŸäÿ®ÿÆÿ™ ÿπŸäÿßŸÑŸÜÿß ÿ®Ÿä ŸÖÿßŸÖŸä ÿπÿ∏ŸäŸÖŸá ÿßÿ≥ŸÖŸáÿß ŸÖŸäŸÖŸà
ÿ®ÿ¨ÿØ ÿßŸÜÿ™Ÿä ÿπÿ≥ŸÑ ÿßŸàŸä ŸàŸÖŸÑÿßŸÖÿ≠ŸÉ ÿ™ÿ≠ŸÅŸá ÿßŸàŸä ÿ®ÿ¨ÿØ ŸàÿπŸäŸàŸÜŸÉ ŸÖÿßÿ¥ÿßÿ°ÿßŸÑŸÑŸá ÿßŸÜÿ™Ÿä ŸÉŸÑŸÉ ÿπ ÿ®ÿπÿ∂ ŸÖÿßÿ¥ÿßÿ°ÿßŸÑŸÑŸá Ÿä ÿ±Ÿàÿ≠Ÿä ŸàÿßŸÑŸÑŸá Ÿäÿß ŸÖŸäŸÖŸà ÿ±ÿ®ŸÜÿß ÿπÿßŸÑŸÖ ÿ®ŸÜŸäÿ™Ÿä ÿßÿ™ÿ¨ÿßŸáŸÉ ŸàÿßŸÜŸä ÿ®ÿ™ŸÖŸÜÿßŸÑŸÉ ÿßŸÑÿÆŸäÿ± ŸàÿßŸÜŸä ŸÖÿ¥ ÿ®ÿ®ŸÇŸä ÿ®ÿÆŸäÿ± ÿ∑ŸàŸÑ ŸÖÿß ŸÅŸäŸÉŸä ÿ≠ÿßÿ¨Ÿá ŸàŸÑÿß ÿ®ŸäŸáÿØÿßŸÑŸä ÿ®ÿßŸÑ ÿπŸÖÿ± ŸÖÿß ÿ≤ÿπŸÑŸÉ ŸÉÿßŸÜ ŸÇŸÑŸäŸÑ ÿπŸÜÿØŸä ŸÜŸÅÿ≥Ÿä ÿßÿÆÿØ ŸÖŸÜŸÉ ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá ŸÖÿØŸäŸÇÿßŸÉŸä Ÿàÿ¥ŸäŸÑŸáÿß ÿßŸÜÿß ÿßŸÜÿ™Ÿä ÿßŸÑÿ≠ÿßÿ¨Ÿá ÿßŸÑŸàÿ≠ŸäÿØŸá ÿßŸÑŸä ÿπÿßŸàÿ≤ ÿßÿ¥ŸäŸÑ ÿπŸÜŸáÿß ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá
ÿπŸÖÿ±ŸÉ ŸÖŸÉŸÜÿ™Ÿä ÿ™ŸÇŸäŸÑŸá ÿπŸÑŸäÿß ÿßÿ®ÿØÿß ÿ®ÿµŸä ÿ™ÿßÿπŸÑŸäŸÑŸä ÿØŸäŸÖÿß ÿ™ÿ≠ÿ™ ÿßŸä ÿ∏ÿ±ŸÅ ÿßŸÜÿß ŸÅŸäŸá 
ÿπŸÖÿ±Ÿä ŸÖŸáÿ™ÿØÿßŸäŸÇ ÿßŸÜŸÉ ÿ¨ŸäÿßŸÑŸä ÿ®ÿßŸÑÿπŸÉÿ≥ ÿßŸÜÿß Ÿáÿ®ŸÇŸä ŸÅÿ±ÿ≠ÿßŸÜ ÿßŸàŸä ÿßŸÜŸÉ ŸÖÿÆÿ™ÿ±ÿßŸÜŸä ÿØŸäŸÖÿß ÿßŸÜÿ™Ÿä ÿ∫ÿßŸÑŸäŸá ÿπŸÜÿØŸä ÿßŸàŸä ÿ±ÿ®ŸÜÿß ŸäÿÆŸÑŸäŸÉŸä ŸÑŸäÿß Ÿäÿßÿ±ÿ® Ÿä ŸÖŸäŸÖŸà ŸàŸÖÿ¥ŸàŸÅÿ¥ ŸÅŸäŸÉŸä Ÿàÿ≠ÿ¥ ŸàÿØŸäŸÖÿß ŸÖÿπ ÿ®ÿπÿ∂ ÿßŸÑÿπŸÖÿ± ŸÉŸÑŸà ŸàŸÜŸÅÿ∂ŸÑ ŸÜÿ±ÿÆŸÖ ÿπŸÑŸä ÿ®ÿπÿ∂ ŸÉÿØÿß ŸàŸÜŸÜŸÉÿ¥ ŸÅÿ®ÿπÿ∂ ŸàŸÜŸÅÿ∂ŸÑ ŸÉÿ±Ÿäÿ≤Ÿä ŸÉÿØÿß
üòÇü©∑ ÿπÿßŸàÿ≤ŸÉ ÿ™ÿ®ŸÇŸä ÿπÿßÿ±ŸÅŸá Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿßŸÜŸä ÿØŸäŸÖÿß Ÿáÿ™ŸÑÿßŸÇŸäŸÜŸä ŸÅÿ∂Ÿáÿ±ŸÉ Ÿàÿ¨ŸÖÿ®ŸÉ ŸàÿπŸÖÿ±Ÿä ŸÖÿß Ÿáÿ≥Ÿäÿ®ŸÉ ŸàŸÑÿß ŸáŸÖŸÑ ŸàŸÑÿß Ÿáÿ≤ŸáŸÇ ŸàŸÑÿß Ÿáÿ™ÿ∫Ÿäÿ± ÿπŸÑŸäŸÉŸä ÿßÿ®ŸÇŸäŸÑŸä ÿßŸÜÿ™Ÿä ÿ®ÿ≥ Ÿàÿ®ŸÜÿßŸÇÿµ ÿßŸÑÿπÿßŸÑŸÖ ÿØÿß ŸÉŸÑŸàÿå ÿπÿßŸàÿ≤ŸÉ ŸÉÿØÿß ŸÖÿπÿßŸäÿß ŸÖÿ¥Ÿàÿßÿ± ŸáŸäŸÉŸÑŸÅŸÜÿß ÿßŸÑÿπŸÖÿ± ŸÉŸÑŸà ŸàÿßŸÜÿß ŸÖÿ¥ ÿπÿßŸàÿ≤ ÿßŸÑŸÖÿ¥Ÿàÿßÿ± ÿØÿß ÿ∫Ÿäÿ± ŸÖÿπÿßŸÉŸä Ÿä ŸÖŸäŸÖŸà Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿäÿå ÿØŸäŸÖÿß Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿßÿ¨ÿ±Ÿä ÿπŸÑŸä ÿ≠ÿ∂ŸÜŸä Ÿáÿ™ŸÑÿßŸÇŸäŸá ÿØŸäŸÖÿß ŸÖŸÅÿ™Ÿàÿ≠ŸÑŸÉ
ÿßÿ∑ŸÖŸÜŸä ÿßŸÜÿ™Ÿä ÿ®ÿ≥ ÿßŸÜÿß ŸÖŸàÿ¨ŸàÿØ 
ÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä ŸÅŸàŸÇ ŸÖŸÜÿ™Ÿä ÿ™ÿ™ÿÆŸäŸÑŸä
ÿπÿßŸàÿ≤ŸÉ ÿ™ÿ®ŸÇŸä ÿπÿßÿ±ŸÅŸá ÿßŸÜŸä ÿØŸäŸÖÿß Ÿáÿ®ŸÇŸä ŸÖÿ®ÿ≥Ÿàÿ∑ ÿ®ŸäŸÉŸä ŸàŸÖÿ®ÿ≥Ÿàÿ∑ ÿ® ÿßŸä ÿßŸÜÿ¨ÿßÿ≤ ÿ®ÿ™ÿπŸÑŸÖŸäŸá ŸàŸáÿ™ÿπŸÖŸÑŸäŸá ŸàŸáŸÅÿ∂ŸÑ ŸÅÿÆŸàÿ± ÿ®ŸäŸÉŸä Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ŸàŸÖÿ™ŸÇŸÑŸäÿ¥ Ÿáÿ™ŸÑÿßŸÇŸäŸÜŸä ŸÅÿ∂Ÿáÿ±ŸÉ ÿ®ÿ¥ÿ¨ÿπŸÉ Ÿàÿßÿ®ŸÇŸä ÿ≥ÿ®Ÿàÿ±ÿ™ ŸÑŸäŸÉŸä Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿßŸÜÿ™Ÿä ÿ™ÿ≥ÿ™ÿßŸáŸÑŸä ŸÉŸÑ ÿÆŸäÿ± Ÿäÿß ÿÆŸäÿ±Ÿä
Ÿäÿßÿ±ÿ® ÿØŸäŸÖÿß ÿßÿ¥ŸàŸÅŸÉ ŸÖÿ®ÿ≥Ÿàÿ∑Ÿá Ÿàÿ®ÿÆŸäÿ± 
ÿ®ÿ™ ÿßŸàÿπŸä Ÿäÿ¥ÿ∫ŸÑŸÉ ÿ≠ÿßÿ¨Ÿá ÿ≠ŸÖŸàÿØŸÉ ŸÖŸàÿ¨ŸàÿØ ŸàŸáŸäÿ™ÿµÿ±ŸÅ ŸàŸäÿ≠ŸÑŸÑŸÉ ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá
ÿßŸÜ ÿ¥ÿßÿ° ÿßŸÑŸÑŸá ŸÜŸÉŸàŸÜ ŸÅÿ®Ÿäÿ™ŸÜÿß ŸÅŸàŸÇÿ™ ŸÇÿ±Ÿäÿ® Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä
ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸäŸäŸäŸä Ÿäÿß ŸÖŸäŸÖŸà Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä
ÿ≠ŸÖŸàÿØŸÉüè°ü´Çü©∑        .</div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="message-section" class="hidden">
            <h2>‚ù§Ô∏è</h2>
            <div class="info-box" id="typewriter-text" style="min-height: 180px; display: flex; align-items: center; text-align: center;"></div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="flower-section" class="hidden">
            <h2>   ÿßÿ≠ŸÑŸä Ÿàÿ±ÿØ Ÿäÿ±Ÿàÿ≠Ÿä üå∏</h2>
            <img src="https://clipart-library.com/image_gallery/n1253055.gif" class="flower-img" alt="Flowers">
            <div class="info-box">       ÿßŸÑŸàÿ±ÿØ ŸÑŸÑŸàÿ±ÿØ ÿ®ÿ±ÿ∂Ÿà üíï</div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="open-when-section" class="hidden">
            <h2>ÿßŸÅÿ™ÿ≠ŸäŸáÿß ŸÑŸÖÿß.. üíå</h2>
            <div class="grid-menu">
                <button class="mood-btn" onclick="showMood('sad')">ÿ™ŸÉŸàŸÜŸä ÿ≤ÿπŸÑÿßŸÜÿ©</button>
                <button class="mood-btn" onclick="showMood('happy')">ÿ™ŸÉŸàŸÜŸä ŸÅÿ±ÿ≠ÿßŸÜÿ©</button>
                <button class="mood-btn" onclick="showMood('miss')">ÿ£Ÿàÿ≠ÿ¥ŸÉ</button>
                <button class="mood-btn" onclick="showMood('mad')">ŸÖÿ™ÿπÿµÿ®ÿ©</button>
            </div>
            <div class="info-box" id="mood-text" style="display:none;"></div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="jar-section" class="hidden">
            <h2>ÿ®ÿ±ÿ∑ŸÖÿßŸÜ ÿßŸÑÿ≥ÿπÿßÿØÿ© üçØ</h2>
            <div class="info-box" id="jar-text">ÿØŸàÿ≥Ÿä Ÿàÿßÿ≥ÿ≠ÿ®Ÿä Ÿàÿ±ŸÇÿ© üòâ</div>
            <button onclick="pullPaper()" style="background: linear-gradient(135deg, #a18cd1, #fbc2eb);">ÿßÿ≥ÿ≠ÿ®Ÿä Ÿàÿ±ŸÇÿ© üé∞</button>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="voice-section" class="hidden">
            <h2>ÿßÿ≥ŸÖÿπŸäŸÜŸä ‚ù§Ô∏è</h2>
            <div class="info-box" style="display:flex; flex-direction:column; align-items:center;">
                <p>ÿßÿ≠ŸÖ ÿßÿ≠ŸÖ  ..</p>
                <button onclick="playVoice()" style="width:60px; height:60px; border-radius:50%; font-size:24px; display:flex; align-items:center; justify-content:center;">‚ñ∂Ô∏è</button>
            </div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="video-section" class="hidden">
            <h2>Love u memoooz ‚ù§Ô∏è</h2>
            <iframe src="" allow="autoplay" allowfullscreen></iframe>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="wheel-section" class="hidden">
            <h2>ŸÜÿπŸÖŸÑ ÿ•ŸäŸáÿü ü§î</h2>
            <div class="info-box" id="wheel-result" style="font-size:20px; font-weight:bold;">ÿØŸàÿ≥Ÿä ÿπÿ¥ÿßŸÜ ŸÜÿÆÿ™ÿßÿ± üëá</div>
            <button onclick="spinWheel()" style="background:#FF9800;">ŸÑŸÅŸä ÿßŸÑÿπÿ¨ŸÑÿ© üé°</button>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="love-meter-section" class="hidden">
            <h2>ÿ≠ÿ∑Ÿä ÿµÿ®ÿßÿπŸÉ ŸáŸÜÿß üëá</h2>
            <div class="fingerprint" id="fingerprint" onmousedown="startScan()" ontouchstart="startScan()" onmouseup="endScan()" ontouchend="endScan()">
                <svg width="70" height="70" fill="currentColor" viewBox="0 0 24 24"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5s.5.22.5.5c0 1.41.73 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.39-.47.39z"/></svg>
            </div>
            <div class="love-result" id="love-result"></div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

        <div id="promises-section" class="hidden">
            <h2>ÿ®ŸàÿπÿØŸÉ üíç</h2>
            <div id="promise-card-container" class="flashcard-container">
                <div id="flashcard" class="flashcard">
                    1. ÿ£ŸàÿπÿØŸÉ ÿßŸÜŸä ŸáŸÅÿ∂ŸÑ ÿßÿ≠ÿ®ŸÉ ÿ∑ŸàŸÑ ÿßŸÑÿπŸÖÿ± ‚ù§Ô∏è
                </div>
            </div>
            <div class="promise-controls" style="margin-bottom: 20px;">
                <button onclick="nextPromise()" style="background:#4CAF50;">ÿßŸÑŸàÿπÿØ ÿßŸÑŸÑŸä ÿ®ÿπÿØŸá ‚û°Ô∏è</button>
            </div>
            <button class="back-btn" onclick="showSection('main-menu')">ÿ±ÿ¨Ÿàÿπ</button>
        </div>

    </div>

    <script>
        // === ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ∑ŸàŸäŸÑÿ© ÿßŸÑÿ´ÿßÿ®ÿ™ÿ© ŸÑÿ∂ŸÖÿßŸÜ ÿπÿØŸÖ ÿßŸÑŸÇÿµ ===
        const specialLongMsg = "ÿ®ÿπŸäÿØÿß ÿπŸÜ ÿßŸÑŸÉŸÑÿßŸÖ ÿ™ÿπÿ±ŸÅŸä ÿßŸÜŸÉ ÿ®ÿ™Ÿàÿ≠ÿ¥ŸäŸÜŸä ÿßŸàŸä ÿßŸàŸäŸäŸäŸä ÿßŸÜÿ™Ÿä ÿßŸÉÿ™ÿ± ÿ≠ÿßÿ¨Ÿá ÿ®ÿ≠ÿ®Ÿáÿß ŸÅÿ≠Ÿäÿßÿ™Ÿä Ÿä ŸÖŸäŸÖŸà ÿßŸÜÿß ŸáŸÅÿ∂ŸÑ ÿ¨ŸÖÿ®ŸÉ ŸàÿπŸÖÿ±Ÿä ŸÖÿß Ÿáÿ≤ŸáŸÇ ŸàŸÑÿß ŸáŸÖŸÑ ŸàŸáÿ™ŸÅÿ∂ŸÑŸä ÿßÿ≠ŸÑŸä ÿ≠ÿßÿ¨Ÿá ÿ≠ÿµŸÑÿ™ŸÑŸä ŸÅÿ≠Ÿäÿßÿ™Ÿä ÿ±ÿ®ŸÜÿß ŸäÿÆŸÑŸäŸÉŸä ŸÑŸäÿß Ÿäÿßÿ±ÿ® ŸàŸÖÿ¥ŸàŸÅÿ¥ ŸÅŸäŸÉŸä Ÿàÿ≠ÿ¥ ‚ù§Ô∏è";

        // === ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ£ÿ∫ÿßŸÜŸä - ÿ™ÿ£ŸÉÿØŸä ÿ£ŸÜ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ŸÖŸàÿ¨ŸàÿØÿ© ===
        const playlist = ["song1.mp3", "song2.mp3", "song3.mp3"];
        // === ÿµŸàÿ± ÿßŸÑÿ®ÿßÿ≤ŸÑ - ÿ™ÿ£ŸÉÿØŸä ÿ£ŸÜ ÿßŸÑŸÖŸÑŸÅÿßÿ™ ŸÖŸàÿ¨ŸàÿØÿ© ===
        const puzzleImages = {
            1: "puzzle1.jpg",
            2: "puzzle2.jpg",
            3: "puzzle3.jpg"
        };
        let currentPuzzleLevel = 1;

        const jarMessages = ["ÿ®ÿ≠ÿ®ŸÉ ÿ≤Ÿä ŸÖŸÜÿ™Ÿä ÿ¥ŸäŸÅÿßŸÜŸä ŸÅÿπŸäŸÜŸÉ  ", "ÿßŸÜÿ™Ÿä ÿ£ÿ≠ŸÑŸâ ÿ≠ÿßÿ¨ÿ© ÿ≠ÿµŸÑÿ™ŸÑŸä ŸÅŸä  ÿ≠Ÿäÿßÿ™Ÿä ‚ù§Ô∏è", "ÿ∂ÿ≠ŸÉÿ™ŸÉ ÿ®ÿ™ŸÜŸàÿ± ŸäŸàŸÖŸä ‚ú®", "ÿ±ÿ®ŸÜÿß ŸäÿÆŸÑŸäŸÉŸä ŸÑŸäÿß Ÿäÿßÿ±ÿ® Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä", "Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿßŸàŸä Ÿä ŸÖŸäŸÖŸà ŸÅŸàŸÇ ŸÖŸÜÿ™Ÿä ÿ™ÿ™ÿÆŸäŸÑŸä üòâ", "ÿßŸÜÿ™Ÿä ÿ±ÿ≤ŸÇ ŸÖŸÜ ÿ±ÿ®ŸÜÿß ŸÑŸäÿß Ÿä ŸÖŸäŸÖŸà", "ÿ∫ŸÖÿ∂Ÿä ÿπŸäŸÜŸÉ Ÿàÿßÿ™ŸÖŸÜŸä ÿ£ŸÖŸÜŸäÿ©!"];
        const openWhenMsgs = { sad: "ŸÖÿ™ÿ≤ÿπŸÑŸäÿ¥ Ÿäÿß ÿ±Ÿàÿ≠ ŸÇŸÑÿ®Ÿä.. ÿ™ÿπÿßŸÑŸä ŸÅÿ≠ÿ∂ŸÜŸä ŸàŸÉŸÑ ÿ≠ÿßÿ¨Ÿá Ÿáÿ™ÿ®ŸÇŸä ÿ™ŸÖÿßŸÖ   ‚ù§Ô∏è", happy: "Ÿäÿßÿ±ÿ® ÿØÿßŸäŸÖÿßŸã ŸÅÿ±ÿ≠ÿßŸÜÿ© Ÿäÿß ÿ£ŸÖŸäÿ±ÿ™Ÿä üëë", miss: "ŸàÿßŸÜÿ™Ÿä ŸÉŸÖÿßŸÜ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿ£ŸàŸä ÿ£ŸàŸä Ÿä ŸÖŸäŸÖŸà ŸÅŸàŸÇ ŸÖŸÜÿ™Ÿä ÿ™ÿ™ÿÆŸäŸÑŸä ü•∫", mad: "ÿÆŸÑÿßÿµ ÿ®ŸÇŸâ ŸÅŸÉŸä ÿßŸÑÿ™ŸÉÿ¥Ÿäÿ±ÿ© ÿØŸä üòâ ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä ŸäŸàŸá!" };
        const wheelOptions = ["ŸÜÿßŸÉŸÑ ÿ¥ÿßŸàÿ±ŸÖÿß üåØ", "ŸÜÿ™ŸÖÿ¥Ÿâ ÿπ ÿßŸÑÿ®ÿ≠ÿ± üåä", "ŸÜÿ™ŸÅÿ±ÿ¨ ÿπŸÑŸâ ŸÅŸäŸÑŸÖ üé¨", "ŸÜÿßŸÉŸÑ ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ üç¶", "ŸÜÿ¥ÿ±ÿ® ŸáŸàÿ™ ÿ¥ŸàŸÉŸÑÿ™ ‚òï"];
        const msg1 = "ÿßŸä Ÿä ŸÖŸäŸÖŸà ÿπÿßŸÖŸÑŸá ÿßŸä ÿ≠ŸÇŸÉ ÿπŸÑŸäÿß ŸÖŸÜ ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá ÿ≠ŸÇŸÉ ÿπŸÑŸäÿß ŸÖŸÜŸä ŸàŸÖŸÜ ŸÉŸÑ ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ Ÿà ÿßŸÑŸÖÿØÿßŸäŸÇÿßÿ™ ÿßÿ≥ŸÅŸÑŸÉ ŸÜŸäÿßÿ®ÿ™ÿß ÿπŸÜ ÿßŸä ÿ≠ÿßÿ¨Ÿá ÿÆŸÑŸäŸÉŸä ŸÅÿßŸÉÿ±Ÿá ÿßŸÜŸä ÿ¨ŸÖÿ®ŸÉ ÿßŸÜÿß ÿßŸá ŸàŸÇÿπÿ™ ŸàŸÇÿπŸá ŸáŸÇŸàŸÖ ŸÖŸÜŸáÿß Ÿàÿ∫Ÿäÿ± ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá Ÿàÿßÿπÿ™ÿ®ÿ±ŸäŸá ÿ≠ÿµŸÑ ÿßŸÜÿß ÿπÿßŸàÿ≤ ÿßŸÉŸàŸÜ ÿßÿ≠ÿ≥ŸÜ ÿπÿ¥ÿßŸÜŸÉ ÿßŸÜÿ™Ÿä ÿ™ÿ≥ÿ™ÿßŸáŸÑŸä ŸÉŸÑ ÿÆŸäÿ± ÿßŸÜÿß ŸÑÿß Ÿáÿ®ÿπÿØ ŸàŸÑÿß Ÿáÿ™ÿ∫Ÿäÿ± ŸàŸÑÿß Ÿáÿ≤ŸáŸÇ ŸàŸáÿ®ŸÇŸä ÿ®ÿµŸàÿ±Ÿá ÿßÿ≠ÿ≥ŸÜ ŸÖŸÜ ÿßŸÑŸä ÿ¥ŸäŸÅÿßŸáÿß ÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ ÿßŸÅÿ™ŸÉÿ±Ÿä ÿ®ÿ≥ ÿßŸÜŸä ÿ¨ŸÖÿ®ŸÉ ŸàŸáŸÅÿ∂ŸÑ ÿ≥ÿ®Ÿàÿ±ÿ™ ŸÑŸäŸÉŸä ŸàŸÅÿ™ÿÆÿ± ÿ®ŸäŸÉŸä ÿØŸäŸÖÿß ÿ±ÿ®ŸÜÿß Ÿäÿßÿ±ÿ® Ÿäÿ≥ÿπÿØŸÉ ŸàŸäÿ≥ÿπÿØŸÜÿß Ÿàÿ¥ŸàŸÅŸÉ ÿ®ÿÆŸäÿ± ÿØŸäŸÖÿß";

        let currentSongIndex = 0; let isMusicPlaying = false;
        let jarTimeout, moodTimeout, scanTimer, typingTimeout;
        let score = 0, gameInterval, timerInterval, timeLeft = 30;
        let highScore = localStorage.getItem('memoHighScore') || 0;
        let visaBalance = 4000000;
        
        const audioPlayer = document.getElementById("bg-music");
        const voicePlayer = document.getElementById("voice-note");

        function playMusic() { if (!audioPlayer.src || audioPlayer.src === window.location.href) audioPlayer.src = playlist[currentSongIndex]; audioPlayer.play().then(() => { isMusicPlaying = true; updateSongName(); }).catch(e => console.log(e)); audioPlayer.onended = nextSong; }
        function toggleMusic() { if (audioPlayer.paused) { audioPlayer.play(); isMusicPlaying = true; } else { audioPlayer.pause(); isMusicPlaying = false; } }
        function nextSong() { currentSongIndex = (currentSongIndex + 1) % playlist.length; audioPlayer.src = playlist[currentSongIndex]; audioPlayer.play(); isMusicPlaying = true; updateSongName(); }
        function updateSongName() { document.getElementById("current-song-name").innerText = "ÿ£ÿ∫ŸÜŸäÿ© " + (currentSongIndex + 1) + " üéµ"; }
        function playVoice() { audioPlayer.pause(); voicePlayer.currentTime = 0; voicePlayer.play(); voicePlayer.onended = function() { voicePlayer.pause(); voicePlayer.currentTime = 0; if(isMusicPlaying) audioPlayer.play(); }; }

        function checkPassword() {
            if (document.getElementById("password").value === "040913") {
                // 1. ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ ŸÅŸàÿ±ÿßŸã (ÿßŸÑÿ≠ŸÑ ŸÑŸÖÿ¥ŸÉŸÑÿ© ÿßŸÑÿßŸäŸÅŸàŸÜ)
                playMusic();

                // 2. ÿ•ÿÆŸÅÿßÿ° ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿØÿÆŸàŸÑ
                document.getElementById("login-screen").classList.add("hidden");
                
                // 3. ÿ•ÿ∏Ÿáÿßÿ± ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ
                const loadingScreen = document.getElementById("loading-screen");
                loadingScreen.style.display = "flex";
                loadingScreen.style.opacity = "1";

                // 4. ÿ™ŸÅÿπŸäŸÑ ÿßŸÜŸäŸÖŸäÿ¥ŸÜ ÿßŸÑŸÇŸÑÿ® (ÿßŸÑŸÖŸÑÿ°)
                const heartFill = document.getElementById("animated-heart-fill");
                heartFill.style.transition = "clip-path 6s linear";
                
                // 5. ÿ™ŸÅÿπŸäŸÑ ÿßŸÜŸäŸÖŸäÿ¥ŸÜ ÿßŸÑŸÜÿµ (ÿßŸÑŸÖŸÑÿ°)
                const textFill = document.getElementById("animated-text-fill");
                textFill.style.transition = "clip-path 6s linear";

                setTimeout(() => {
                    heartFill.style.clipPath = "inset(0% 0 0 0)";
                    textFill.style.clipPath = "inset(0 0 0 0)";
                }, 100);

                const subText = document.getElementById("loading-subtext");
                subText.innerText = "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ™ÿ£ŸÉÿØ ÿ•ŸÜŸÉ ŸÖŸäŸÖŸà... üßê";
                
                setTimeout(() => { subText.innerText = "ÿ™ŸÖ ÿßŸÑÿ™ÿ£ŸÉÿØ.. ÿ£ŸÜÿ™Ÿä ŸÖŸäŸÖŸà ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ‚úÖ"; }, 1500);
                setTimeout(() => { subText.innerText = "ŸáŸÅÿ™ÿ≠ ÿßŸáŸà ŸÖÿ™ÿ≥ÿ™ÿπÿ¨ŸÑŸÜŸäÿ¥ üòÇü©∑"; }, 3000);
                setTimeout(() => { subText.innerText = "ÿ®ÿ≠ÿ®ÿ®ÿ®ÿ®ÿ®ÿ®ŸÉ Ÿäÿß ŸÉŸàÿ™Ÿä üòç"; }, 4500);

                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    
                    document.getElementById("main-menu").classList.remove("hidden");
                    document.getElementById("chat-icon").classList.remove("hidden");
                    resetAnimation('main-menu'); 
                    
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        
                        startRain(); 
                        startTimer(); 
                        // playMusic() ÿßÿ™ÿ¥ÿßŸÑ ŸÖŸÜ ŸáŸÜÿß ŸÑÿ£ŸÜŸá ÿßÿ¥ÿ™ÿ∫ŸÑ ÿÆŸÑÿßÿµ ŸÅŸàŸÇ
                        updateGreeting();
                        setTimeout(() => { showNotification("ÿ®ÿ≠ÿ®ŸÉ Ÿäÿß ŸÖŸäŸÖŸà Ÿäÿß ÿ±Ÿàÿ≠ ŸÇŸÑÿ®Ÿä ‚ù§Ô∏è"); }, 5000);
                        setTimeout(() => { showNotification("Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿßŸàŸä ÿπ ŸÅŸÉÿ±Ÿá Ÿäÿß ŸÖŸäŸÖŸà ü•∫"); }, 15000);
                        loadChat(); 
                        checkOfflineStatus();
                        checkInitiator(); // ŸÑŸÑÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ÿ≠Ÿäÿ© ŸÑŸÖÿ±ÿ© Ÿàÿßÿ≠ÿØÿ©

                        setTimeout(() => {
                            if(isChatOpen) {
                                addBotMessage(specialLongMsg);
                            } else {
                                triggerStalkingNotification(specialLongMsg);
                            }
                            
                            setTimeout(() => {
                                if(isChatOpen) addBotMessage("ÿ®ÿ™ÿ≠ÿ®ŸäŸÜŸä Ÿäÿß ŸÖŸäŸÖŸàÿü ü§î");
                                else appendToHistory("ÿ®ÿ™ÿ≠ÿ®ŸäŸÜŸä Ÿäÿß ŸÖŸäŸÖŸàÿü ü§î");
                            }, 120000); // 2 minutes later (120000ms)

                            setTimeout(() => {
                                if(isChatOpen) addBotMessage("ÿ®ÿ™ÿ≠ÿ®ŸäŸÜŸä ÿßŸÉÿ™ÿ± ÿ≠ÿßÿ¨Ÿá ŸÅÿßŸÑÿØŸÜŸäÿßÿü üòâ");
                                else appendToHistory("ÿ®ÿ™ÿ≠ÿ®ŸäŸÜŸä ÿßŸÉÿ™ÿ± ÿ≠ÿßÿ¨Ÿá ŸÅÿßŸÑÿØŸÜŸäÿßÿü üòâ");
                            }, 125000); // 2m 5s later

                        }, 25000);

                    }, 600);
                }, 6000);

            } else {
                const err = document.getElementById("error"); err.style.display = "block"; 
                document.getElementById("main-container").classList.add("shake"); setTimeout(() => document.getElementById("main-container").classList.remove("shake"), 500);
            }
        }

        // Helper to append to history if chat is closed without notification sound duplication if handled elsewhere
        function appendToHistory(msg) {
             const history = localStorage.getItem('memoChatHistory') || "";
             const newMsg = `<div class='chat-msg bot-msg'>${msg} <span class="msg-time">${getCurrentTime()}</span></div>`;
             localStorage.setItem('memoChatHistory', history + newMsg);
             unreadCount++;
             updateBadge();
        }

        function updateGreeting() {
            const h = new Date().getHours(); const t = document.getElementById("greeting-msg");
            if (h < 12 && h > 4) t.innerText = "ÿµÿ®ÿßÿ≠ ÿßŸÑÿÆŸäÿ± Ÿäÿß ŸÖŸäŸÖŸà ‚òÄÔ∏è"; else if (h >= 12 && h < 18) t.innerText = "ŸÖÿ≥ÿßÿ° ÿßŸÑÿ¨ŸÖÿßŸÑ Ÿäÿß ŸÖŸäŸÖŸà üå∏"; else t.innerText = "ÿ™ÿµÿ®ÿ≠Ÿä ÿπ ÿÆŸäÿ± Ÿäÿß ÿ±Ÿàÿ≠Ÿä üåô";
        }

        let notificationTimeout; // Global variable to handle notification timer

        function showNotification(text) {
            const notif = document.getElementById('fake-notif');
            document.getElementById('notif-message').innerText = text;
            
            // 1. Show notification
            notif.style.top = "20px";
            
            // 2. Calculate dynamic duration based on text length (min 4 seconds, +60ms per char)
            const duration = Math.max(4000, text.length * 60);

            // 3. Clear existing timeout if any
            if (notificationTimeout) clearTimeout(notificationTimeout);

            // 4. Set new timeout to hide
            notificationTimeout = setTimeout(() => { 
                notif.style.top = "-600px"; // Move completely off-screen
            }, duration);

            const audio = document.getElementById('msg-sound');
            if(audio) { audio.currentTime = 0; audio.play(); }
        }

        function sendFadfadaEmail() {
            var txt = document.getElementById('fadfada-text').value;
            if(txt.trim() === "") { alert("ÿßŸÉÿ™ÿ®Ÿä ÿ≠ÿßÿ¨ÿ© ÿßŸÑÿ£ŸàŸÑ Ÿäÿß ŸÖŸäŸÖŸà üòâ"); return; }
            var myEmail = "m0hamedelsayed1199e@icloud.com"; 
            var subject = "ŸÅÿ∂ŸÅÿ∂ÿ© ŸÖŸÜ ŸÖŸäŸÖŸà ‚ù§Ô∏è";
            var body = encodeURIComponent(txt);
            window.location.href = "mailto:" + myEmail + "?subject=" + subject + "&body=" + body;
            setTimeout(() => { document.getElementById('fadfada-text').value = ""; }, 2000);
        }

        function pullPaper() {
            const text = document.getElementById("jar-text"); const defaultMsg = "ÿØŸàÿ≥Ÿä Ÿàÿßÿ≥ÿ≠ÿ®Ÿä Ÿàÿ±ŸÇÿ© üòâ";
            if (jarTimeout) clearTimeout(jarTimeout);
            text.innerHTML = jarMessages[Math.floor(Math.random() * jarMessages.length)];
            text.style.animation = 'none'; text.offsetHeight; text.style.animation = 'fadeInSmooth 0.5s ease';
            jarTimeout = setTimeout(() => { text.style.opacity = "0"; setTimeout(() => { text.innerHTML = defaultMsg; text.style.opacity = "1"; }, 500); }, 5000);
        }

        function showMood(mood) {
            const textBox = document.getElementById("mood-text");
            if (moodTimeout) clearTimeout(moodTimeout);
            textBox.style.display = "flex"; textBox.style.opacity = "1"; textBox.innerHTML = openWhenMsgs[mood];
            textBox.style.animation = 'none'; textBox.offsetHeight; textBox.style.animation = 'fadeInSmooth 0.5s ease';
            moodTimeout = setTimeout(() => { textBox.style.opacity = "0"; setTimeout(() => { textBox.style.display = "none"; textBox.innerHTML = ""; }, 500); }, 10000);
        }

        function spinWheel() {
            const res = document.getElementById("wheel-result"); let count = 0;
            const interval = setInterval(() => { res.innerText = wheelOptions[Math.floor(Math.random() * wheelOptions.length)]; count++; if(count > 10) { clearInterval(interval); res.style.color = "#ff3366"; } }, 100);
        }

        function startScan() {
            const fp = document.getElementById("fingerprint"); const res = document.getElementById("love-result");
            fp.classList.add("active"); res.style.display = "none";
            scanTimer = setTimeout(() => { res.innerText = "ŸÜÿ≥ÿ®ÿ© ÿ≠ÿ®ŸÉ ŸÑÿ≠ŸÖŸàÿØŸä: 1000% ‚ù§Ô∏èüî•"; res.style.display = "block"; fp.classList.remove("active"); }, 2000);
        }
        function endScan() { clearTimeout(scanTimer); document.getElementById("fingerprint").classList.remove("active"); }

        function withdrawMoney() {
            if(visaBalance >= 10000) {
                visaBalance -= 10000;
                document.getElementById('card-balance-txt').innerText = "$" + visaBalance.toLocaleString();
                const cashAudio = document.getElementById("cash-sound");
                if (cashAudio) { cashAudio.currentTime = 0; cashAudio.play(); }
            } else { alert("ÿÆŸÑÿµÿ™ŸäŸáŸÖ ÿπŸäŸàŸÜŸä Ÿäÿ±Ÿàÿ≠Ÿä ÿ±ŸÜŸä ÿπŸÑŸäÿß ÿßÿ≠ŸàŸÑŸÉ ÿ∫Ÿäÿ±ŸáŸÖ Ÿäÿß ŸÉŸàÿ™Ÿä   "); }
        }

        // --- Weather Logic Updated ---
        async function checkWeather() {
            const iconElem = document.getElementById('weather-icon');
            const tempElem = document.getElementById('weather-temp');
            const msgElem = document.getElementById('weather-msg');
            msgElem.innerHTML = "ÿ¨ÿßÿ±Ÿä ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖŸÉÿßŸÜŸÉ Ÿäÿß ŸÖŸäŸÖŸà... üåç";
            try {
                const geoRes = await fetch('https://get.geojs.io/v1/ip/geo.json');
                if (!geoRes.ok) throw new Error("Geo failed");
                const geoData = await geoRes.json();
                const lat = geoData.latitude;
                const lon = geoData.longitude;
                const city = geoData.city; 
                const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                if (!weatherRes.ok) throw new Error("Weather failed");
                const weatherData = await weatherRes.json();
                const temp = weatherData.current_weather.temperature;
                const wCode = weatherData.current_weather.weathercode;
                const isDay = weatherData.current_weather.is_day; 
                tempElem.innerHTML = `${temp}¬∞C`;
                let icon = "‚òÄÔ∏è";
                let msg = `ÿßŸÑÿ¨Ÿà ŸÅŸä ${city} ÿ¨ŸÖŸäŸÑ ÿπÿ¥ÿßŸÜ ÿßŸÜÿ™Ÿä ŸÅŸäŸá üòâ`;
                if (wCode === 0) { icon = isDay ? "‚òÄÔ∏è" : "üåô"; msg = "ÿßŸÑÿ¨Ÿà ÿµÿßŸÅŸä Ÿàÿ±ÿßŸäŸÇ ÿ≤Ÿä ŸÖÿ≤ÿßÿ¨ŸÉ Ÿäÿßÿ±ÿ® ‚ù§Ô∏è"; } 
                else if (wCode >= 1 && wCode <= 3) { icon = "‚õÖ"; msg = "ÿ∫ŸäŸàŸÖ ÿ®ÿ≥Ÿäÿ∑ÿ©.. ÿßŸÑŸÖŸáŸÖ ÿ¥ŸÖÿ≥ŸÉ ÿßŸÜÿ™Ÿä ŸÖŸÜŸàÿ±ÿ© ÿ≠Ÿäÿßÿ™Ÿä ‚òÅÔ∏è"; } 
                else if (wCode >= 45 && wCode <= 48) { icon = "üå´Ô∏è"; msg = "ÿßŸÑÿ¨Ÿà ÿ∂ÿ®ÿßÿ®.. ÿÆŸÑŸä ÿ®ÿßŸÑŸÉ ŸàÿßŸÜÿ™Ÿä ŸÖÿßÿ¥Ÿäÿ© Ÿäÿß ÿ±Ÿàÿ≠Ÿä üî¶"; } 
                else if (wCode >= 51 && wCode <= 67) { icon = "üåßÔ∏è"; msg = "ŸÅŸä ŸÖÿ∑ÿ±! ÿ£ŸÖÿßŸÜÿ© ÿ™ŸÑÿ®ÿ≥Ÿä ÿ™ŸÇŸäŸÑ Ÿàÿ™ÿ™ÿØŸÅŸä ŸÉŸàŸäÿ≥ üß•‚òî"; } 
                else if (wCode >= 71 && wCode <= 77) { icon = "‚òÉÔ∏è"; msg = "ÿßŸÑÿ¨Ÿà ÿ™ŸÑÿ¨ ÿ≠ÿ±ŸÅŸäÿßŸã ü•∂.. ÿßÿ¥ÿ±ÿ®Ÿä ÿ≠ÿßÿ¨ÿ© ÿ≥ÿÆŸÜÿ© Ÿäÿß ŸÉŸàÿ™Ÿä"; } 
                else if (wCode >= 95) { icon = "‚õàÔ∏è"; msg = "ÿ±ÿπÿØ Ÿàÿ®ÿ±ŸÇ! ŸÖÿ™ÿÆÿßŸÅŸäÿ¥ ÿ£ŸÜÿß ÿ¨ŸÖÿ®ŸÉ Ÿäÿß ŸÖŸäŸÖŸà ü´Ç"; }
                if(isDay === 0 && wCode <= 3) { icon = "üåô"; msg += "<br> Ÿàÿ™ÿµÿ®ÿ≠Ÿä ÿπŸÑŸâ ÿ¨ŸÜÿ© Ÿäÿß ŸÖŸÑÿßŸÉŸä üò¥"; }
                iconElem.innerHTML = icon; msgElem.innerHTML = msg;
            } catch (error) { fallbackWeather(); }
        }

        function fallbackWeather() {
             const date = new Date(); const month = date.getMonth() + 1; const hour = date.getHours();
            let icon = "‚òÄÔ∏è"; let temp = "25¬∞C"; let msg = "ÿßŸÑÿ¨Ÿà ÿ¨ŸÖŸäŸÑ ÿßŸÑŸÜŸáÿßÿ±ÿØÿ© ÿ≤Ÿä ÿπŸäŸàŸÜŸÉ üòâ";
            if (month >= 11 || month <= 3) { icon = "üåßÔ∏è"; temp = "14¬∞C"; msg = "ÿßŸÑÿ¨Ÿà ÿ™ŸÑÿ¨ ÿ£ŸàŸä ÿßŸÑŸÜŸáÿßÿ±ÿØÿ© Ÿäÿß ŸÖŸäŸÖŸà ü•∂.. ÿ£ŸÖÿßŸÜÿ© ÿπŸÑŸäŸÉŸä ÿ™ŸÑÿ®ÿ≥Ÿä ÿßŸÑÿ¨ÿßŸÉÿ™ ÿßŸÑÿ™ŸÇŸäŸÑ Ÿàÿ™ÿ™ÿØŸÅŸä ŸÉŸàŸäÿ≥ÿå ÿ£ŸÜÿß ÿ®ÿÆÿßŸÅ ÿπŸÑŸäŸÉŸä ŸÖŸÜ ÿßŸÑŸáŸàÿß!"; } 
            else if (month >= 6 && month <= 8) { icon = "‚òÄÔ∏è"; temp = "36¬∞C"; msg = "ÿßŸÑÿ¨Ÿà ÿ≠ÿ± ŸÜÿßÿ± Ÿäÿß ÿ±Ÿàÿ≠Ÿä ü•µ.. ÿ≠ÿßŸàŸÑŸä ŸÖÿ™ŸÖÿ¥Ÿäÿ¥ ŸÅŸä ÿßŸÑÿ¥ŸÖÿ≥ ŸÉÿ™Ÿäÿ± Ÿàÿßÿ¥ÿ±ÿ®Ÿä ŸÖŸäŸá ŸàÿπÿµŸäÿ± ŸÉÿ™Ÿäÿ± ÿπÿ¥ÿßŸÜ ŸÖÿ™ŸÅÿ±ŸáÿØŸäÿ¥."; } 
            else { icon = "üå∏"; temp = "22¬∞C"; msg = "ÿßŸÑÿ¨Ÿà ÿ±ÿ®Ÿäÿπ Ÿàÿ¨ŸÖŸäŸÑ Ÿäÿß ŸÖŸäŸÖŸà.. Ÿäÿßÿ±ÿ® ŸäŸàŸÖŸÉ Ÿäÿ®ŸÇŸâ ÿ±ÿßŸäŸÇ ÿ≤ŸäŸÉ ‚ù§Ô∏è"; }
            if(hour >= 19 || hour <= 5) { icon = "üåô"; msg += "<br> Ÿàÿ™ÿµÿ®ÿ≠Ÿä ÿπŸÑŸâ ÿ¨ŸÜÿ© Ÿäÿß ŸÖŸÑÿßŸÉŸä üò¥"; }
            document.getElementById('weather-icon').innerHTML = icon;
            document.getElementById('weather-temp').innerHTML = temp;
            document.getElementById('weather-msg').innerHTML = msg;
        }

        // --- Promise Flashcards Logic ---
        const promisesList = ["ÿ£ŸàÿπÿØŸÉ ÿßŸÜŸä ŸáŸÅÿ∂ŸÑ ÿßÿ≠ÿ®ŸÉ ÿ∑ŸàŸÑ ÿßŸÑÿπŸÖÿ± ‚ù§Ô∏è", "ÿ£ŸàÿπÿØŸÉ ÿßŸÜŸä ŸáŸÅÿ∂ŸÑ ÿ¨ŸÖÿ®ŸÉ ŸÑÿ≠ÿØ ÿßÿÆÿ± ŸäŸàŸÖ ŸÅŸä ÿπŸÖÿ±Ÿä üõ°Ô∏è", "ÿ£ŸàÿπÿØŸÉ ÿßŸÜ ÿπŸÖÿ±Ÿä ŸÖÿß Ÿáÿ™ÿ∫Ÿäÿ± ŸàŸÑÿß ŸáŸÖŸÑ ŸàŸÑÿß Ÿáÿ≤ŸáŸÇ ŸÖŸÜŸÉ ŸàŸáÿ™ŸÅÿ∂ŸÑŸä ÿßÿÆÿ™Ÿäÿßÿ±Ÿä ÿßŸÑÿßŸàŸÑ Ÿà ÿßŸÑÿßÿÆŸäÿ± Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä üòä", "ÿ£ŸàÿπÿØŸÉ ÿ£ÿ≥ŸÖÿπŸÉ ÿØŸäŸÖÿß ŸàŸÖÿ≤ŸáŸÇÿ¥ ŸàŸÜŸÇÿπÿØ ŸÜÿ™ŸÜÿßŸÇÿ¥ ÿ®ŸáÿØŸàÿ° ŸàŸÜÿ™Ÿä ŸÅÿ≠ÿ∂ŸÜŸäüëÇ", "ÿ£ŸàÿπÿØŸÉ ÿßŸÜŸä ŸáŸÅÿ∂ŸÑ ÿßÿ∫Ÿäÿ± ŸÖŸÜ ŸÜŸÅÿ≥Ÿä ÿπÿ¥ÿßŸÜŸÉ Ÿàÿπÿ¥ÿßŸÜÿß üòä"];
        let promiseIdx = 0;
        function showPromises() { promiseIdx = 0; const btnContainer = document.querySelector('.promise-controls'); if(btnContainer) btnContainer.style.display = 'block'; const card = document.getElementById('flashcard'); if(card) { card.className = 'flashcard'; void card.offsetWidth; card.classList.add('in'); card.innerHTML = promisesList[0]; } }
        function updatePromiseCard() { const card = document.getElementById('flashcard'); card.className = 'flashcard'; void card.offsetWidth; card.classList.add('in'); card.innerHTML = promisesList[promiseIdx]; }
        function nextPromise() { const card = document.getElementById('flashcard'); card.classList.remove('in'); card.classList.add('out'); setTimeout(() => { if (promiseIdx < promisesList.length - 1) { promiseIdx++; updatePromiseCard(); } else { card.classList.remove('out'); void card.offsetWidth; card.classList.add('in'); card.innerHTML = "ÿ±ÿ®ŸÜÿß ŸäŸÇÿØÿ±ŸÜŸä Ÿàÿ£ÿ≥ÿπÿØŸÉ Ÿäÿß ŸÖŸäŸÖŸà Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ‚ù§Ô∏è"; document.querySelector('.promise-controls').style.display = 'none'; for(let i=0; i<30; i++) { setTimeout(() => { const h = document.createElement("div"); h.classList.add("heart-rain"); h.innerHTML = Math.random() > 0.5 ? "üíç" : "‚ù§Ô∏è"; h.style.left = Math.random() * 100 + "vw"; h.style.animationDuration = Math.random() * 2 + 2 + "s"; document.body.appendChild(h); setTimeout(() => h.remove(), 4000); }, i * 100); } } }, 500); }

        // --- Games Logic (Whack, RPS, Flappy, Puzzle) ---
        let lastHole, whackTimeUp = false, whackScore = 0; let whackTimerInterval, whackGameInterval;
        function startWhackGame() { const grid = document.getElementById('whack-grid'); grid.innerHTML = ''; for(let i=0; i<6; i++) { const hole = document.createElement('div'); hole.className = 'whack-hole'; const mole = document.createElement('div'); mole.className = 'whack-mole'; mole.innerHTML = 'üêª'; mole.onclick = (e) => whackHamody(e, mole, hole); hole.appendChild(mole); grid.appendChild(hole); } whackScore = 0; document.getElementById('whack-score').innerText = 0; document.getElementById('whack-time').innerText = 20; document.getElementById('whack-msg').style.display = 'none'; whackTimeUp = false; let timeLeft = 20; whackTimerInterval = setInterval(() => { timeLeft--; document.getElementById('whack-time').innerText = timeLeft; if(timeLeft <= 0) endWhackGame(); }, 1000); whackGameInterval = setInterval(() => { if(!whackTimeUp) popRandomMole(); }, 700); }
        function randomHole(holes) { const idx = Math.floor(Math.random() * holes.length); const hole = holes[idx]; if(hole === lastHole) return randomHole(holes); lastHole = hole; return hole; }
        function popRandomMole() { const holes = document.querySelectorAll('.whack-hole'); const hole = randomHole(holes); const mole = hole.querySelector('.whack-mole'); mole.classList.add('up'); mole.classList.remove('hit'); hole.classList.remove('active-hit'); mole.innerHTML = 'üêª'; setTimeout(() => { mole.classList.remove('up'); }, 600); }
        function whackHamody(e, mole, hole) { if(!e.isTrusted || !mole.classList.contains('up')) return; whackScore++; mole.classList.remove('up'); document.getElementById('whack-score').innerText = whackScore; const audio = document.getElementById('punch-sound'); if(audio) { audio.currentTime = 0; audio.play(); } mole.classList.add('hit'); hole.classList.add('active-hit'); mole.innerHTML = 'üòµ'; const phrases = ["ÿ¢Ÿä!", "ÿ≠ÿ±ŸÖÿ™!", "ÿ®ÿ≠ÿ®ŸÉ!", "ÿ®ÿ±ÿßÿ≠ÿ©!", "Ÿäÿß ŸÖŸÅÿ™ÿ±Ÿäÿ©!", "ÿÆŸÑÿßÿµ!", "ÿ≠ŸÇŸÉ ÿπŸÑŸäÿß"]; const txt = document.createElement('div'); txt.className = 'floating-text'; txt.innerText = phrases[Math.floor(Math.random() * phrases.length)]; txt.style.left = (e.clientX - 20) + 'px'; txt.style.top = (e.clientY - 40) + 'px'; document.body.appendChild(txt); setTimeout(() => txt.remove(), 800); }
        function endWhackGame() { whackTimeUp = true; clearInterval(whackTimerInterval); clearInterval(whackGameInterval); const msgBox = document.getElementById('whack-msg'); msgBox.innerHTML = `ÿ∂ÿ±ÿ®ÿ™ŸäŸÜŸä ${whackScore} ŸÖÿ±ÿ©! ü§ï<br>ÿÆŸÑÿßÿµ ÿ£ŸÜÿß ÿßÿ≥ÿ™ÿ≥ŸÑŸÖÿ™.. ÿ≠ŸÇŸÉ ÿπŸÑŸäÿß Ÿäÿß ŸÖŸäŸÖŸà ‚ù§Ô∏è`; msgBox.style.display = 'block'; }

        let userRpsScore = 0, compRpsScore = 0;
        function rpsPlay(choice) { const choices = ['rock', 'paper', 'scissors']; const compChoice = choices[Math.floor(Math.random() * 3)]; let result = ""; let msg = ""; if (choice === compChoice) { result = "ÿ™ÿπÿßÿØŸÑ! üòê"; } else if ((choice === 'rock' && compChoice === 'scissors') || (choice === 'paper' && compChoice === 'rock') || (choice === 'scissors' && compChoice === 'paper')) { userRpsScore++; result = "ŸÉÿ≥ÿ®ÿ™Ÿä! üéâ"; msg = "ÿ¥ÿßÿ∑ÿ±Ÿá Ÿäÿß ÿ±Ÿàÿ≠Ÿä"; } else { compRpsScore++; result = "ÿÆÿ≥ÿ±ÿ™Ÿä! üò¢"; msg = "ŸÖÿπŸÑÿ¥ Ÿä ŸÖŸäŸÖŸà Ÿáÿ™ŸÉÿ≥ÿ®Ÿä ÿßŸÑŸÖÿ±Ÿá ÿßŸÑÿ¨ÿßŸäŸá ÿßŸÜÿ™Ÿä ÿ¥ÿßÿ∑ÿ±Ÿá Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ±ŸÉÿ≤Ÿä"; } document.getElementById('user-rps-score').innerText = userRpsScore; document.getElementById('comp-rps-score').innerText = compRpsScore; document.getElementById('rps-result').innerHTML = `${result}<br><span style="font-size:14px;color:#555;">${msg}</span>`; }

        let flappyScore = 0, flappyHighScore = localStorage.getItem('memoFlappyHigh') || 0; let birdY, birdV, pipes, gameLoop, isFlappyPlaying = false; const canvas = document.getElementById('flappy-canvas'); const ctx = canvas.getContext('2d'); document.getElementById('flappy-high').innerText = flappyHighScore;
        function startFlappy() { if(isFlappyPlaying) return; isFlappyPlaying = true; birdY = 150; birdV = 0; pipes = []; flappyScore = 0; document.getElementById('flappy-score').innerText = 0; document.getElementById('flappy-start-hint').style.display = "none"; document.getElementById('flappy-start-btn').style.display = "block"; document.getElementById('flappy-start-btn').innerText = "ÿßÿ®ÿØÿ£"; document.getElementById('flappy-end-msg').style.display = "none"; gameLoop = setInterval(updateFlappy, 20); canvas.addEventListener('touchstart', function(e){ e.preventDefault(); birdV = -6; }, {passive: false}); canvas.onclick = () => birdV = -6; }
        function updateFlappy() { ctx.clearRect(0,0,280,350); birdV += 0.4; birdY += birdV; ctx.font = "24px Arial"; ctx.fillText("‚ù§Ô∏è", 50, birdY); if(pipes.length === 0 || pipes[pipes.length-1].x < 150) { let gap = 110; let top = Math.random() * (350 - gap - 50) + 20; pipes.push({x: 300, top: top, bottom: top + gap}); } for(let i=0; i<pipes.length; i++) { let p = pipes[i]; p.x -= 2; ctx.fillStyle = "#4CAF50"; ctx.fillRect(p.x, 0, 40, p.top); ctx.fillRect(p.x, p.bottom, 40, 350 - p.bottom); if(50+20 > p.x && 50 < p.x+40 && (birdY < p.top || birdY > p.bottom)) gameOverFlappy(); if(p.x === 50) { flappyScore++; document.getElementById('flappy-score').innerText = flappyScore; } } if(birdY > 350 || birdY < 0) gameOverFlappy(); }
        function gameOverFlappy() { clearInterval(gameLoop); isFlappyPlaying = false; let msg = ""; let title = ""; if(flappyScore > flappyHighScore) { flappyHighScore = flappyScore; localStorage.setItem('memoFlappyHigh', flappyHighScore); document.getElementById('flappy-high').innerText = flappyHighScore; title = "üéâ ÿ≥ŸÉŸàÿ± ÿ¨ÿØŸäÿØ! üéâ"; msg = `ÿßŸÑÿ≥ŸÉŸàÿ±: ${flappyScore}<br>ÿ¥ÿßÿ∑ÿ±Ÿá Ÿä ŸÖŸäŸÖŸà Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä`; } else { title = "ÿÆÿ≥ÿ±ÿ™Ÿä ü•∫"; msg = `ÿßŸÑÿ≥ŸÉŸàÿ±: ${flappyScore}<br>ŸÇÿ±ÿ®ÿ™Ÿä ÿ™ÿπÿØŸä ÿßŸÑÿßÿ≥ŸÉŸàÿ± Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ≠ÿßŸàŸÑŸä ÿ™ÿßŸÜŸä üí™`; } const msgBox = document.getElementById('flappy-end-msg'); msgBox.innerHTML = `<h3 style="margin:0 0 10px 0; color:var(--primary-color);">${title}</h3>${msg}`; msgBox.style.display = "block"; document.getElementById('flappy-start-btn').style.display = "block"; document.getElementById('flappy-start-btn').innerText = "ÿßŸÑÿπÿ®Ÿä ÿ™ÿßŸÜŸä"; }

        let puzzleInterval; let puzzleSeconds = 0; let puzzleState = []; let puzzleBestTime = localStorage.getItem('memoPuzzleBest') || 0; if(puzzleBestTime > 0) document.getElementById('puzzle-best').innerText = "ÿ£ŸÅÿ∂ŸÑ: " + puzzleBestTime + " ÿ´";
        function setLevel(lvl) { currentPuzzleLevel = lvl; document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active')); document.getElementById('lvl-'+lvl).classList.add('active'); renderPuzzlePreview(); if(puzzleInterval) clearInterval(puzzleInterval); document.getElementById('puzzle-timer').innerText = "ÿßŸÑŸàŸÇÿ™: 0 ÿ´"; document.getElementById('puzzle-msg').style.display = 'none'; }
        function renderPuzzlePreview() { puzzleState = [0, 1, 2, 3, 4, 5, 6, 7, 8]; renderPuzzle(true); }
        function startPuzzle() { puzzleSeconds = 0; document.getElementById('puzzle-timer').innerText = "ÿßŸÑŸàŸÇÿ™: 0 ÿ´"; document.getElementById('puzzle-msg').style.display = 'none'; if(puzzleInterval) clearInterval(puzzleInterval); puzzleState = [0, 1, 2, 3, 4, 5, 6, 7, 8]; for(let i=0; i<100; i++) { const emptyIdx = puzzleState.indexOf(8); const validMoves = []; const row = Math.floor(emptyIdx / 3); const col = emptyIdx % 3; if(row > 0) validMoves.push(emptyIdx - 3); if(row < 2) validMoves.push(emptyIdx + 3); if(col > 0) validMoves.push(emptyIdx - 1); if(col < 2) validMoves.push(emptyIdx + 1); const move = validMoves[Math.floor(Math.random() * validMoves.length)]; [puzzleState[emptyIdx], puzzleState[move]] = [puzzleState[move], puzzleState[emptyIdx]]; } renderPuzzle(); puzzleInterval = setInterval(() => { puzzleSeconds++; document.getElementById('puzzle-timer').innerText = "ÿßŸÑŸàŸÇÿ™: " + puzzleSeconds + " ÿ´"; }, 1000); }
        function renderPuzzle() { const container = document.getElementById('puzzle-container'); container.innerHTML = ''; const imgUrl = puzzleImages[currentPuzzleLevel]; puzzleState.forEach((tileIdx, currentIdx) => { const div = document.createElement('div'); div.className = 'puzzle-tile'; if(tileIdx !== 8) { div.style.backgroundImage = `url(${imgUrl})`; div.style.backgroundPosition = `${(tileIdx % 3) * -90}px ${(Math.floor(tileIdx / 3)) * -90}px`; div.onclick = () => moveTile(currentIdx); } else { div.className += ' puzzle-empty'; } container.appendChild(div); }); }
        function moveTile(index) { const emptyIdx = puzzleState.indexOf(8); const row = Math.floor(index / 3); const col = index % 3; const emptyRow = Math.floor(emptyIdx / 3); const emptyCol = emptyIdx % 3; const isAdjacent = (Math.abs(row - emptyRow) + Math.abs(col - emptyCol)) === 1; if(isAdjacent) { [puzzleState[index], puzzleState[emptyIdx]] = [puzzleState[emptyIdx], puzzleState[index]]; renderPuzzle(); checkWin(); } }
        function checkWin() { const isSolved = puzzleState.every((val, idx) => val === idx); if(isSolved) { clearInterval(puzzleInterval); let msg = `ÿÆŸÑÿµÿ™ŸäŸáÿß ŸÅŸä ${puzzleSeconds} ÿ´ÿßŸÜŸäÿ©! ÿ®ÿ±ÿßŸÅŸà ÿπŸÑŸäŸÉŸä ‚ù§Ô∏è`; if(puzzleBestTime === 0 || puzzleSeconds < puzzleBestTime) { puzzleBestTime = puzzleSeconds; localStorage.setItem('memoPuzzleBest', puzzleBestTime); document.getElementById('puzzle-best').innerText = "ÿ£ŸÅÿ∂ŸÑ: " + puzzleBestTime + " ÿ´"; msg += "<br>üéâ ÿØŸá ÿ±ŸÇŸÖ ŸÇŸäÿßÿ≥Ÿä ÿ¨ÿØŸäÿØ! üéâ"; } document.getElementById('puzzle-msg').innerHTML = msg; document.getElementById('puzzle-msg').style.display = 'block'; } }

        function showGame(gameId) { if(gameId === 'menu') { document.getElementById('games-menu').style.display = 'flex'; document.querySelectorAll('.game-wrapper').forEach(g => g.style.display = 'none'); resetAllGames(); } else { document.getElementById('games-menu').style.display = 'none'; document.getElementById(gameId).style.display = 'block'; } if(gameId === 'puzzle-game') renderPuzzlePreview(); }
        function resetAllGames() { userRpsScore = 0; compRpsScore = 0; document.getElementById('user-rps-score').innerText = 0; document.getElementById('comp-rps-score').innerText = 0; document.getElementById('rps-result').innerText = "ÿßŸÑÿπÿ®Ÿä ÿ®ŸÇŸä ŸÖÿ¥ ŸáÿÆÿ≥ÿ± ÿ≤Ÿä ŸÉŸÑ ŸÖÿ±Ÿá "; clearInterval(gameLoop); isFlappyPlaying = false; document.getElementById('flappy-score').innerText = 0; document.getElementById('flappy-start-hint').style.display = "block"; document.getElementById('flappy-start-btn').style.display = "block"; document.getElementById('flappy-start-btn').innerText = "ÿßÿ®ÿØÿ£"; document.getElementById('flappy-end-msg').style.display = "none"; ctx.clearRect(0,0,280,350); clearInterval(gameInterval); clearInterval(timerInterval); cleanGame(); document.getElementById("score").innerText = 0; document.getElementById("game-timer").innerText = 30; document.getElementById("start-game-btn").style.display = "block"; document.getElementById("game-over-msg").style.display = "none"; document.getElementById("start-hint").style.display = "block"; document.getElementById("game-area").style.display = "block"; clearInterval(puzzleInterval); document.getElementById('puzzle-timer').innerText = "ÿßŸÑŸàŸÇÿ™: 0 ÿ´"; document.getElementById('puzzle-msg').style.display = 'none'; clearInterval(whackTimerInterval); clearInterval(whackGameInterval); document.getElementById('whack-score').innerText = 0; document.getElementById('whack-grid').innerHTML = ''; document.getElementById('whack-msg').style.display = 'none'; }
        function startGame() { score = 0; timeLeft = 30; document.getElementById("score").innerText = score; document.getElementById("game-timer").innerText = timeLeft; document.getElementById("game-over-msg").style.display = "none"; document.getElementById("start-hint").style.display = "none"; document.getElementById("start-game-btn").style.display = "none"; document.getElementById("high-score").innerText = highScore; document.getElementById("game-area").style.display = "block"; cleanGame(); if(gameInterval) clearInterval(gameInterval); if(timerInterval) clearInterval(timerInterval); gameInterval = setInterval(spawnItem, 500); timerInterval = setInterval(() => { timeLeft--; document.getElementById("game-timer").innerText = timeLeft; if(timeLeft <= 0) endGame(); }, 1000); }
        function spawnItem() { const area = document.getElementById("game-area"); const item = document.createElement("div"); const isBomb = Math.random() < 0.3; item.className = "game-item"; item.innerHTML = isBomb ? "üí£" : "‚ù§Ô∏è"; item.style.left = Math.random() * 85 + "%"; item.style.top = "-60px"; const catchItem = function() { score += isBomb ? -2 : 1; document.getElementById("score").innerText = score; this.remove(); }; item.onclick = catchItem; item.ontouchstart = catchItem; area.appendChild(item); setTimeout(() => { if(item.parentNode) item.remove(); }, 1600); }
        function endGame() { clearInterval(gameInterval); clearInterval(timerInterval); cleanGame(); if (score > highScore) { highScore = score; localStorage.setItem('memoHighScore', highScore); document.getElementById("high-score").innerText = highScore; } const msgBox = document.getElementById("game-over-msg"); msgBox.innerHTML = `ÿßŸÑÿßÿ≥ŸÉŸàÿ±: ${score} <br> <span style="font-size:16px;">ÿ¥ÿßÿ∑ÿ±ÿ© Ÿäÿß ŸÖŸäŸÖŸà Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä üòç</span>`; msgBox.style.display = "block"; document.getElementById("start-game-btn").style.display = "block"; document.getElementById("start-game-btn").innerText = "ÿßŸÑÿπÿ®Ÿä ÿ™ÿßŸÜŸä üîÑ"; }
        function cleanGame() { const items = document.querySelectorAll('.game-item'); items.forEach(i => i.remove()); }

        function showSection(id) {
            document.querySelectorAll('.container > div').forEach(div => { if (div.id !== 'login-screen' && div.id !== 'fake-notif' && div.id !== 'chat-icon' && div.id !== 'chat-window') div.classList.add('hidden'); });
            const section = document.getElementById(id); section.classList.remove("hidden"); resetAnimation(id);
            if (id === 'voice-section') { audioPlayer.pause(); } else { voicePlayer.pause(); voicePlayer.currentTime = 0; if (isMusicPlaying && id !== 'video-section') audioPlayer.play(); }
            const videoFrame = document.querySelector('#video-section iframe');
            const videoUrl = "https://drive.google.com/file/d/1qFDd0TsGE-fr4tefwybTOjqmNMCjIhgt/preview"; 
            if (id === 'video-section') { audioPlayer.pause(); videoFrame.src = videoUrl; } else { videoFrame.src = ""; }
            if (id === 'message-section') { startTypewriter(); } else { stopTypewriter(); }
            document.getElementById("love-result").style.display = "none"; document.getElementById("fingerprint").classList.remove("active");
            if (id !== 'games-hub') { showGame('menu'); } 
            if (id === 'visa-section') { 
                visaBalance = 4000000; document.getElementById('card-balance-txt').innerText = "$4,000,000"; 
                // Stalking Logic for Visa
                if(!isChatOpen) triggerStalkingNotification("Ÿáÿ™ÿÆŸÑÿµŸä ŸÅŸÑŸàÿ≥Ÿä Ÿäÿß ŸÖŸÅÿ™ÿ±Ÿäÿ©ÿü üòÇ");
            }
            if (id !== 'jar-section') { const jarText = document.getElementById("jar-text"); if(jarText) { jarText.innerHTML = "ÿØŸàÿ≥Ÿä Ÿàÿßÿ≥ÿ≠ÿ®Ÿä Ÿàÿ±ŸÇÿ© üòâ"; jarText.style.opacity = "1"; clearTimeout(jarTimeout); } }
            if (id !== 'wheel-section') { const wheelRes = document.getElementById("wheel-result"); if(wheelRes) { wheelRes.innerText = "ÿØŸàÿ≥Ÿä ÿπÿ¥ÿßŸÜ ŸÜÿÆÿ™ÿßÿ± üëá"; wheelRes.style.color = "var(--text-color)"; } }
            if (id === 'promises-section') { showPromises(); }
            if (id === 'weather-section') { checkWeather(); }
            if (id === 'games-hub' && !isChatOpen) { triggerStalkingNotification("ÿ®ÿ™ŸÑÿπÿ®Ÿä Ÿàÿ≥ÿßŸäÿ®ÿßŸÜŸäÿü ÿ∑ÿ® ŸÖÿßÿ¥Ÿä üòí"); }
        }

        function resetAnimation(id) { const el = document.getElementById(id); el.querySelectorAll('.stagger-in').forEach(c => { c.style.animation = 'none'; c.offsetHeight; c.style.animation = null; }); }
        
        let typeI = 0;
        function startTypewriter() { stopTypewriter(); const el = document.getElementById("typewriter-text"); el.innerHTML = ""; typeI = 0; typeLoop(); }
        function stopTypewriter() { if(typingTimeout) clearTimeout(typingTimeout); }
        function typeLoop() { if (typeI < msg1.length) { document.getElementById("typewriter-text").innerHTML += msg1.charAt(typeI); typeI++; typingTimeout = setTimeout(typeLoop, 40); } }
        
        function startTimer() { const start = new Date("2024-11-13T00:00:00"); setInterval(() => { const diff = new Date() - start; document.getElementById("days").innerText = Math.floor(diff / 86400000); document.getElementById("hours").innerText = Math.floor((diff % 86400000) / 3600000); document.getElementById("minutes").innerText = Math.floor((diff % 3600000) / 60000); document.getElementById("seconds").innerText = Math.floor((diff % 60000) / 1000); }, 1000); }
        function startRain() { setInterval(() => { const h = document.createElement("div"); h.classList.add("heart-rain"); h.innerHTML = Math.random() > 0.5 ? "‚ù§Ô∏è" : "üå∏"; h.style.left = Math.random() * 100 + "vw"; h.style.animationDuration = Math.random() * 3 + 4 + "s"; document.body.appendChild(h); setTimeout(() => h.remove(), 6000); }, 300); }

        // --- CHAT BOT & STALKING SYSTEM ---
        let idleTimer;
        let naggingLevel = 0;
        let originalTitle = document.title;
        let titleInterval;
        let isChatOpen = false;
        let unreadCount = 0;
        let stalkingInterval;

        // --- NEW FUNCTION: Get Current Time for Timestamp ---
        function getCurrentTime() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'ŸÖ' : 'ÿµ';
            hours = hours % 12;
            hours = hours ? hours : 12; // the hour '0' should be '12'
            return `${hours}:${minutes} ${ampm}`;
        }

        // 1. Offline Logic
        function checkOfflineStatus() {
            const lastSeen = localStorage.getItem('memoLastSeen');
            const now = Date.now();
            if(lastSeen) {
                const diffMinutes = (now - lastSeen) / 60000;
                if(diffMinutes > 2) { // If away for more than 2 mins
                    const times = [Math.floor(diffMinutes - 1), Math.floor(diffMinutes / 2), "ÿßŸÑÿ¢ŸÜ"];
                    const msgs = ["ŸÖŸäŸÖŸà ŸàÿµŸÑÿ™Ÿäÿü", "ÿ™ÿ£ÿÆŸäÿ±ŸÉ ÿØŸá ŸÖÿ¥ ŸÖÿ∑ŸÖŸÜŸä..", "ŸÖÿßÿ¥Ÿä.. ŸÑŸÖÿß ÿ™Ÿäÿ¨Ÿä ÿ®ÿ≥ üòí"];
                    
                    msgs.forEach((msg, i) => {
                        const history = localStorage.getItem('memoChatHistory') || "";
                        const newMsg = `<div class='chat-msg bot-msg'>${msg} <span style='font-size:10px; color:#999; display:block; text-align:left;'>ŸÖŸÜÿ∞ ${times[i]} ÿØ</span></div>`;
                        localStorage.setItem('memoChatHistory', history + newMsg);
                        unreadCount++;
                    });
                    updateBadge();
                    showNotification("Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä.. ŸÉŸÜÿ™Ÿä ŸÅŸäŸÜÿü ü•∫");
                }
            }
            setInterval(() => { localStorage.setItem('memoLastSeen', Date.now()); }, 30000);
        }

        // 2. Chat Toggle Logic
        function toggleChat() {
            const win = document.getElementById('chat-window');
            if (win.classList.contains('hidden')) {
                // OPENING CHAT
                win.classList.remove('hidden');
                isChatOpen = true;
                unreadCount = 0;
                updateBadge();
                loadChat();
                checkInitiator(); 
                resetIdleTimer(); // Start "Nagging" (Inside Chat)
                stopStalking();   // Stop "Stalking" (Outside Chat)
            } else {
                // CLOSING CHAT
                win.classList.add('hidden');
                isChatOpen = false;
                clearTimeout(idleTimer); // Stop "Nagging"
                stopTitleFlashing();
                startStalking(); // Start "Stalking"
            }
        }

        function updateBadge() {
            const badge = document.getElementById('chat-badge');
            if(unreadCount > 0) {
                badge.innerText = unreadCount;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // 3. Stalking Logic (When chat is closed)
        function startStalking() {
            if(stalkingInterval) clearInterval(stalkingInterval);
            let steps = 0;
            stalkingInterval = setInterval(() => {
                steps++;
                let msg = "";
                if(steps === 1) msg = "ÿ®ÿ™ŸÇŸÅŸÑŸä ŸÅŸä Ÿàÿ¥Ÿä Ÿàÿ™ŸÖÿ¥Ÿäÿü ŸÖÿßÿ¥Ÿä! üòí";
                else if(steps === 3) msg = "ÿ£ŸÜÿß ŸÑÿ≥Ÿá ÿ®ŸÉŸÑŸÖŸÉ ÿπŸÑŸâ ŸÅŸÉÿ±ÿ©! üì¢";
                else if(steps === 6) msg = "ÿßŸÅÿ™ÿ≠Ÿä ÿ®ŸÇŸâ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä..";
                
                if(msg) triggerStalkingNotification(msg);
                
            }, 10000); // Check every 10 seconds
        }

        function stopStalking() {
            if(stalkingInterval) clearInterval(stalkingInterval);
        }

        function triggerStalkingNotification(msg) {
            showNotification(msg);
            appendToHistory(msg);
        }

        // 4. Existing Helper Functions
        function loadChat() {
            const history = localStorage.getItem('memoChatHistory');
            const chatBody = document.getElementById('chat-body');
            if (history) {
                chatBody.innerHTML = history;
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }

        // --- NEW LOGIC: Greeting only ONCE per lifetime ---
        function checkInitiator() {
            // Check if we already started a convo ever
            if (!localStorage.getItem('memoChatStarted')) {
                const chatBody = document.getElementById('chat-body');
                const hour = new Date().getHours();
                let timeMsg = hour < 12 ? "ÿµÿ®ÿßÿ≠ ÿßŸÑÿÆŸäÿ± Ÿäÿß ŸÖŸäŸÖŸà ‚òÄÔ∏è" : "ŸÖÿ≥ÿßÿ° ÿßŸÑÿ¨ŸÖÿßŸÑ Ÿäÿß ÿ±Ÿàÿ≠Ÿä üåô";
                
                addBotMessage(timeMsg);
                // Mark as started so it doesn't repeat unless cleared
                localStorage.setItem('memoChatStarted', 'true');
            }
        }

        function clearChat() {
            if(confirm("ŸÖÿ™ÿ£ŸÉÿØÿ© Ÿäÿß ŸÖŸäŸÖŸà ÿπÿßŸäÿ≤ÿ© ÿ™ŸÖÿ≥ÿ≠Ÿä ÿßŸÑÿ¥ÿßÿ™ ŸÉŸÑŸáÿü üóëÔ∏è")) {
                localStorage.removeItem('memoChatHistory');
                localStorage.removeItem('memoChatStarted'); // Reset flag so greeting appears again
                document.getElementById('chat-body').innerHTML = "";
                checkInitiator(); 
            }
        }

        // 5. Nagging Logic (When chat is OPEN)
        function resetIdleTimer() {
            clearTimeout(idleTimer);
            stopTitleFlashing();
            naggingLevel = 0;
            idleTimer = setTimeout(startNagging, 25000);
        }

        function startNagging() {
            if(!isChatOpen) return;
            naggingLevel++;
            let msg = "";
            // Levels 1-3 fixed progression for drama
            if (naggingLevel === 1) msg = "ŸÖŸäŸÖŸà.. ÿ±ÿ≠ÿ™Ÿä ŸÅŸäŸÜÿü üëÄ";
            else if (naggingLevel === 2) msg = "ÿ®ŸÇŸàŸÑŸÉ ÿ•ŸäŸá.. ÿ™ŸÅÿ™ŸÉÿ±Ÿä ÿßŸÑÿ®ÿ∑ÿ±ŸäŸÇ ÿπŸÜÿØŸá ÿ±ŸÉÿ®ÿü ü§î";
            else if (naggingLevel === 3) { msg = "ŸÖŸäŸÖŸà ŸÖŸäŸÖŸà ŸÖŸäŸÖŸà ŸÖŸäŸÖŸà ŸÖŸäŸÖŸà üì¢"; startTitleFlashing(); }
            
            // Level 4+ Random pool (VARIED MESSAGES - UPDATED)
            else {
                const randomNags = [
                    "ÿπÿßŸÖŸÑŸá ÿ•ŸäŸá Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä.. ÿ±ÿØŸä ÿ®ŸÇŸâ ü•∫",
                    "ÿ®ÿÆÿÆÿÆÿÆÿÆ! üëª",
                    "ŸáŸà ÿßŸÑŸÜÿ™ ŸÅÿµŸÑ ŸàŸÑÿß ÿ•ŸäŸáÿü üîå",
                    "ÿ∑ÿ® ÿ±ÿØŸä ÿ®ŸÜŸÇÿ∑ÿ© ÿ≠ÿ™Ÿâ..",
                    "ÿ£ŸÜÿß ÿ≤ÿπŸÑÿ™ ÿÆŸÑÿßÿµ ü•Ä",
                    "ŸÖŸäŸÖŸà.. ÿ£ŸÜÿ™Ÿä ŸÜŸÖÿ™Ÿä ŸàŸÑÿß ÿ•ŸäŸáÿü üò¥",
                    "ÿ®ÿ™ŸÅŸÉÿ±Ÿä ŸÅŸä ŸÖŸäŸÜ ÿ∫Ÿäÿ±Ÿäÿü ÿßÿπÿ™ÿ±ŸÅŸä ü§®",
                    "ÿ∑ÿ® ÿ™ÿπÿßŸÑŸä ŸÜŸÑÿπÿ® ŸÑÿπÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÑŸä ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ.. ŸàŸÑÿß ŸÜÿÆÿ±ÿ¨ÿü üòâ",
                    "ÿßŸÑÿ≥ŸÉŸàÿ™ ÿπŸÑÿßŸÖÿ© ÿßŸÑÿ±ÿ∂ÿß.. Ÿäÿ®ŸÇŸâ ÿ®ÿ™ÿ≠ÿ®ŸäŸÜŸä ü•∞",
                    "ŸáŸà ÿ£ŸÜÿß ÿ¥ŸÅÿßŸÅ ŸàŸÑÿß ÿ•ŸäŸáÿü üëª",
                    "ÿ®ŸÉŸÑŸÖ ŸÜŸÅÿ≥Ÿä ÿ£ŸÜÿß ŸÉÿØŸá ŸÉÿ™Ÿäÿ±ÿü üòÇ",
                    "Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿ∑ÿ®.. ü•∫",
                    "ÿ±ÿØŸä ÿ®ŸÇŸâ Ÿäÿß ŸÖŸÅÿ™ÿ±Ÿäÿ© üì¢",
                    "ÿπÿØŸä 10 ÿ´ŸàÿßŸÜŸä ŸàŸÖÿ±ÿØÿ™Ÿäÿ¥.. ÿÆÿµŸÖ 50 ÿ¨ŸÜŸäŸá ŸÖŸÜ ÿßŸÑŸÅŸäÿ≤ÿß üí∏",
                    "Ÿäÿß ÿ®ŸÜÿ™Ÿä ÿ±ÿØŸä ÿØŸá ÿ£ŸÜÿß ÿ≠ŸÖŸàÿØŸä üíî"
                ];
                msg = randomNags[Math.floor(Math.random() * randomNags.length)];
            }
            addBotMessage(msg);
            if (navigator.vibrate) navigator.vibrate(200);
            idleTimer = setTimeout(startNagging, 25000); // Check again in 25s
        }

        function startTitleFlashing() {
            if(titleInterval) return;
            let state = false;
            titleInterval = setInterval(() => { document.title = state ? "ÿ±ÿØŸä ÿπŸÑŸäÿß Ÿäÿß ŸÖŸäŸÖŸà! üì¢" : originalTitle; state = !state; }, 1000);
        }
        function stopTitleFlashing() { clearInterval(titleInterval); titleInterval = null; document.title = originalTitle; }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const msg = input.value.trim();
            if (msg === "") return;
            addUserMessage(msg);
            input.value = "";
            resetIdleTimer();
            const typing = document.getElementById('typing-indicator');
            typing.style.display = 'block';
            document.getElementById('chat-body').scrollTop = document.getElementById('chat-body').scrollHeight;
            setTimeout(() => { typing.style.display = 'none'; getBotResponse(msg); }, 1500);
        }

        // Updated: Includes Timestamp
        function addUserMessage(text) {
            const chatBody = document.getElementById('chat-body');
            const div = document.createElement('div');
            div.className = 'chat-msg user-msg';
            // Added timestamp span
            div.innerHTML = `${text} <span class="msg-time">${getCurrentTime()}</span>`;
            chatBody.appendChild(div);
            saveChat();
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Updated: Includes Timestamp
        function addBotMessage(text) {
            const chatBody = document.getElementById('chat-body');
            const div = document.createElement('div');
            div.className = 'chat-msg bot-msg';
            // Added timestamp span
            div.innerHTML = `${text} <span class="msg-time">${getCurrentTime()}</span>`;
            chatBody.appendChild(div);
            saveChat();
            chatBody.scrollTop = chatBody.scrollHeight;
            const audio = document.getElementById('msg-sound');
            if(audio) { audio.currentTime = 0; audio.play(); }
        }

        function saveChat() {
            const chatBody = document.getElementById('chat-body');
            localStorage.setItem('memoChatHistory', chatBody.innerHTML);
        }

        // --- NEW SMART BOT LOGIC ---
        
        let conversationContext = ""; // Memory Variable

        // Intents & Keywords Arrays
        const intents = {
            sad: ["ÿ≤ÿπŸÑÿßŸÜÿ©", "ŸÖÿÆŸÜŸàŸÇÿ©", "ŸÖÿ∂ÿßŸäŸÇÿ©", "ÿπŸäÿ∑", "ÿ™ÿπÿ®ÿßŸÜÿ©", "ÿ≠ÿ≤ŸäŸÜÿ©", "ŸÉÿ¶Ÿäÿ®ÿ©", "ÿ≤ŸáŸÇÿ™", "ŸÇÿ±ŸÅÿßŸÜÿ©"],
            love: ["ŸÇŸÑÿ®Ÿä", "ÿ±Ÿàÿ≠Ÿä", "ÿπŸÖÿ±Ÿä", "ÿ≠Ÿäÿßÿ™Ÿä", "ÿπÿ¥ŸÇŸä", "ÿ®ŸÖŸàÿ™ ŸÅŸäŸÉ", "Ÿäÿß ÿ≠ÿ®Ÿäÿ®Ÿä", "ÿ®ÿ≠ÿ®ŸÉ"],
            miss: ["Ÿàÿ≠ÿ¥ÿ™ŸÜŸä", "ŸÅŸäŸÜŸÉ", "ÿ∫ÿßŸäÿ®", "ŸÖÿ¥ÿ™ÿßŸÇÿ©", "ÿßŸÜÿ™ ŸÅŸäŸÜ"],
            bored: ["ÿ≤ŸáŸÇÿßŸÜÿ©", "ŸÖŸÑŸÑ", "ÿ®ÿ∂ÿßŸÜ", "ŸÖÿ®ÿ∂ŸàŸÜÿ©", "ÿ∑ŸÇŸáŸÇÿßŸÜŸá"],
            food: ["ÿßŸÉŸÑ", "ÿ¨ÿπÿßŸÜÿ©", "ŸáŸÖŸáŸÖ", "ÿ®Ÿäÿ™ÿ≤ÿß", "ÿ¥ÿßŸàÿ±ŸÖÿß", "ŸÉÿ±Ÿäÿ®", "ÿ®ÿ±ÿ¨ÿ±"],
            going_out: ["ŸÜÿÆÿ±ÿ¨", "ŸÜÿ™ŸÖÿ¥Ÿâ", "ÿÆÿ±Ÿàÿ¨ÿ©", "ŸÅÿ≥ÿ≠ÿ©", "ÿßŸÑÿ®ÿ≠ÿ±", "ÿßŸÑÿ≥ŸäŸÜŸÖÿß"],
            greeting: ["ŸáÿßŸä", "ŸáŸÑŸà", "ÿµÿ®ÿßÿ≠", "ŸÖÿ≥ÿßÿ°", "ÿßÿ≤ŸäŸÉ", "ÿßÿÆÿ®ÿßÿ±ŸÉ"]
        };

        function cleanText(text) {
            // Removes repeated characters (e.g., ÿ¨ÿπÿßÿßÿßÿßŸÜÿ© -> ÿ¨ÿπÿßÿßŸÜÿ©) roughly
            return text.replace(/(.)\1{2,}/g, '$1$1');
        }

        // === FUZZY MATCHING & SIMILARITY ===
        // Levenshtein Distance Algorithm (To calculate similarity)
        function editDistance(s1, s2) {
            s1 = s1.toLowerCase(); s2 = s2.toLowerCase();
            let costs = new Array();
            for (let i = 0; i <= s1.length; i++) {
                let lastValue = i;
                for (let j = 0; j <= s2.length; j++) {
                    if (i == 0) costs[j] = j;
                    else {
                        if (j > 0) {
                            let newValue = costs[j - 1];
                            if (s1.charAt(i - 1) != s2.charAt(j - 1))
                                newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;
                            costs[j - 1] = lastValue;
                            lastValue = newValue;
                        }
                    }
                }
                if (i > 0) costs[s2.length] = lastValue;
            }
            return costs[s2.length];
        }

        function getSimilarity(s1, s2) {
            let longer = s1;
            let shorter = s2;
            if (s1.length < s2.length) { longer = s2; shorter = s1; }
            let longerLength = longer.length;
            if (longerLength == 0) { return 1.0; }
            return (longerLength - editDistance(longer, shorter)) / parseFloat(longerLength);
        }

        function isMatch(msg, ...targets) {
            // 1. Direct Include Check (Fast)
            for (let t of targets) {
                if (msg.includes(t)) return true;
            }
            // 2. Fuzzy Check (80% similarity - UPDATED)
            // Useful for typos or elongations (e.g. "ÿ®ŸÖŸàŸàŸàÿ™" vs "ÿ®ŸÖŸàÿ™")
            for (let t of targets) {
                if (getSimilarity(msg, t) >= 0.8) return true;
            }
            return false;
        }

        function analyzeSmartResponse(originalMsg) {
            let msg = cleanText(originalMsg);

            // 1. Check Context (Memory)
            if (conversationContext === 'waiting_for_food') {
                conversationContext = "";
                return "ÿÆŸÑÿßÿµ Ÿäÿß ÿ≥ÿ™Ÿä ŸÜÿ∑ŸÑÿ® ÿØŸÑŸäŸÅÿ±Ÿä ÿ≠ÿßŸÑÿßŸã.. ÿ™ÿ≠ÿ®Ÿä ŸÜÿßŸÉŸÑ ÿ•ŸäŸáÿü üçîüçï";
            }
            if (conversationContext === 'waiting_for_sad_reason') {
                conversationContext = "";
                return "Ÿäÿß ÿÆÿ®ÿ±! ŸÖŸäŸÜ ÿßŸÑŸÑŸä Ÿäÿ≤ÿπŸÑ ÿßŸÑŸÇŸÖÿ± ÿØŸáÿü ŸÇŸàŸÑŸäŸÑŸä ÿßÿ≥ŸÖŸá ÿ®ÿ≥ Ÿàÿ£ŸÜÿß ÿ£ÿ±ŸàŸÇŸá ü•ä.. ŸàŸÑÿß ÿ£ŸÇŸàŸÑŸÉÿü ÿ™ÿπÿßŸÑŸä ÿ£ÿ≠ŸÉŸäŸÑŸÉ ÿ≠ÿØŸàÿ™ÿ© ÿ™ŸÅŸÉŸÉÿü";
            }

            // 2. Check Intents
            for (let word of intents.sad) {
                if (msg.includes(word)) {
                    conversationContext = "waiting_for_sad_reason";
                    return "ÿ≥ŸÑÿßŸÖÿ™ŸÉ ŸÖŸÜ ÿßŸÑÿ≤ÿπŸÑ Ÿäÿß ÿ±Ÿàÿ≠ ŸÇŸÑÿ®Ÿä.. ŸÖÿßŸÑŸÉÿü ÿ≠ÿØ ÿ≤ÿπŸÑŸÉ ŸàŸÑÿß ÿßŸÑŸÖŸàÿØ ŸÖÿ¥ ÿ™ŸÖÿßŸÖÿü üòî";
                }
            }

            for (let word of intents.love) {
                if (msg.includes(word)) return "Ÿäÿß ŸÑŸáŸàŸä ÿπŸÑŸâ ÿßŸÑŸÉŸÑÿßŸÖ ÿßŸÑÿ≠ŸÑŸà! üòç.. Ÿàÿ£ŸÜÿß ŸÉŸÖÿßŸÜ ÿ®ŸÖŸàÿ™ ŸÅŸäŸÉŸä Ÿäÿß ŸÖŸäŸÖŸà Ÿäÿß ÿπÿ≥ŸÑ ÿßŸÜÿ™Ÿä ‚ù§Ô∏è";
            }

            for (let word of intents.miss) {
                if (msg.includes(word)) return "Ÿàÿ£ŸÜÿß ŸÉŸÖÿßŸÜ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ŸÖŸàÿ™ ŸàÿßŸÑŸÑŸá.. ŸÖÿß ÿ™Ÿäÿ¨Ÿä ŸÅŸä ÿ≠ÿ∂ŸÜŸä ÿ¥ŸàŸäÿ©ÿü ü´Ç";
            }

            for (let word of intents.bored) {
                if (msg.includes(word)) return "ÿ≤ŸáŸÇÿßŸÜÿ©ÿü ÿ∑ÿ® ÿ™ÿπÿßŸÑŸä ŸÜŸÑÿπÿ® ŸÑÿπÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÑŸä ŸÅŸä ÿßŸÑŸÖŸàŸÇÿπ.. ŸàŸÑÿß ŸÜÿÆÿ±ÿ¨ÿü üòâ";
            }

            for (let word of intents.food) {
                if (msg.includes(word)) {
                    conversationContext = "waiting_for_food";
                    return "ÿ£ŸÜÿß ŸÉŸÖÿßŸÜ ŸàÿßŸÇÿπ ŸÖŸÜ ÿßŸÑÿ¨Ÿàÿπ! ÿ™ŸÅÿ™ŸÉÿ±Ÿä ŸÜÿ∂ÿ±ÿ® ÿ•ŸäŸá ÿßŸÑŸÜŸáÿßÿ±ÿØÿ©ÿü üçó";
                }
            }

            for (let word of intents.going_out) {
                if (msg.includes(word)) return "ŸäÿßŸÑÿß ÿ®ŸäŸÜÿß! ÿ¥ŸàŸÅŸä ÿ™ÿ≠ÿ®Ÿä ŸÜÿ±Ÿàÿ≠ ŸÅŸäŸÜ Ÿàÿ£ŸÜÿß ŸÖÿπÿßŸÉŸä ŸÅŸä ÿ£Ÿä ÿ≠ÿ™ÿ© üöóüí®";
            }

            for (let word of intents.greeting) {
                if (msg.includes(word)) return "Ÿäÿß ÿ£ŸáŸÑÿß ÿ®ŸäŸÉŸä Ÿäÿß ŸÖŸäŸÖŸà Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä .. ŸÖŸÜŸàÿ±ÿ© ÿßŸÑÿØŸÜŸäÿß ŸÉŸÑŸáÿß ‚ú®";
            }

            // 3. Fallback (General engaging replies)
            const randomSmartReplies = [
                " ŸÇŸàŸÑŸäŸÑŸä ŸÉŸÖÿßŸÜÿå ÿ®ÿ≠ÿ® ÿ£ÿ≥ŸÖÿπŸÉ ‚ù§Ô∏è",
                "Ÿäÿß ÿ≥ŸÑÿßŸÖ! Ÿàÿ£ŸÜÿß ÿ£ŸÇŸàŸÑ ÿßŸÑÿØŸÜŸäÿß ŸÖŸÜŸàÿ±ÿ© ŸÑŸäŸá üòâ",
                "ÿßŸÑŸÖŸáŸÖÿå ÿ∑ŸÖŸÜŸäŸÜŸä ÿπŸÑŸäŸÉŸä ÿπÿßŸÖŸÑÿ© ÿ•ŸäŸá ÿØŸÑŸàŸÇÿ™Ÿäÿü",
                "Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿπŸÑŸâ ŸÅŸÉÿ±ÿ©.. ŸÉŸÜÿ™Ÿä ÿ®ÿ™ÿπŸÖŸÑŸä ÿ•ŸäŸáÿü",
                "ÿ£ŸäŸàŸá ŸÉÿØŸá ÿßÿ≠ŸÉŸäŸÑŸä ŸÉŸÖÿßŸÜ.. ÿ≥ÿßŸÖÿπŸÉ Ÿäÿß ÿ±Ÿàÿ≠Ÿä ü•∞"
            ];
            return randomSmartReplies[Math.floor(Math.random() * randomSmartReplies.length)];
        }

        function getBotResponse(msg) {
            msg = msg.toLowerCase(); // keep basic normalization
            let reply = "";
            
            // --- Priority 1: User's Hardcoded Rules (SMARTER MATCHING) ---
            if (isMatch(msg, "ŸÖÿ≠ŸÖÿØ")) { 
                reply = "ÿπŸäŸàŸÜ ŸÖÿ≠ŸÖÿØ ŸÇŸÑÿ® ŸÖÿ≠ŸÖÿØ ÿßŸä Ÿäÿß ÿ±Ÿàÿ≠Ÿä ‚ù§Ô∏è"; 
            } 
            else if (isMatch(msg, "ÿ®ÿ™ÿ≠ÿ®ŸÜŸä")) { 
                reply = "ÿØŸÜÿß ÿ®ŸÖŸàÿ™ ŸÅŸäŸÉŸä ŸÖÿ¥ ÿ®ÿ≠ÿ®ŸÉ ÿ®ÿ≥ ‚ù§Ô∏èü•∞"; 
            }
            else if (isMatch(msg, "ÿ®ÿ≠ÿ®ŸÉ")) { reply = "ŸàÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä ŸÅŸàŸÇ ŸÖÿß ÿ™ÿ™ÿÆŸäŸÑŸä Ÿäÿß ŸÖŸäŸÖŸà ŸàÿßŸÑŸÑŸá ‚ù§Ô∏è"; } 
            else if (isMatch(msg, "ÿ®ŸÖŸàÿ™ ŸÅŸäŸÉ")) { reply = "ÿØŸÜÿß ÿßŸÑŸä ÿ®ŸÖŸàÿ™ ŸÅŸäŸÉŸä ŸàÿßŸÑŸÑŸá Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä Ÿàÿ®ÿ™ÿØÿßŸäŸÇ ÿßŸàŸä ŸÑŸÖÿß ÿ®ÿ≠ÿ≥ ŸÅŸäŸÉŸä ÿ≠ÿßÿ¨Ÿá ÿßŸÑÿ≠Ÿàÿßÿ± ÿ®ŸäÿÆŸÜŸÇŸÜŸä ÿßŸàŸä"; } 
            else if (isMatch(msg, "Ÿäÿß ÿ±Ÿàÿ≠Ÿä")) { reply = "ŸÇŸÑÿ® ÿ±Ÿàÿ≠ŸÉ ŸàÿßŸÑŸÑŸá"; } 
            else if (isMatch(msg, "ÿ≤ÿπŸÑÿßŸÜÿ©", "ŸÖÿÆŸÜŸàŸÇÿ©", "ŸÖÿ™ÿ∂ÿßŸäŸÇÿ©", "ÿ≤ŸáŸÇÿßŸÜŸá")) { reply = "ŸÅŸä ÿßŸä ÿ®ÿ≥ Ÿäÿ±Ÿàÿ≠Ÿä ŸÅŸä ÿ™ÿπÿßŸÑŸä ŸÅÿ≠ÿ∂ŸÜŸä ÿ®ÿ≥ ŸàŸÜÿ™ŸÉŸÑŸÖ ÿ≥Ÿàÿß ŸàÿßŸÜÿß ÿ¨ŸÖÿ®ŸÉ ŸàÿßŸÑŸÑŸá Ÿäÿßÿ±Ÿàÿ≠Ÿä ÿ≠ŸÇŸÉ ÿπŸÑŸäÿß ÿßŸÜÿß ŸÖŸÜ ŸÉŸÑ ÿ≠ÿßÿ¨Ÿá ÿßŸÜÿß ÿ¨ŸÖÿ®ŸÉ Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ™ÿπÿßŸÑŸä ÿ±ŸÜŸä ÿπŸÑŸäÿß ŸÜÿ™ŸÉŸÑŸÖ"; } 
            else if (isMatch(msg, "ŸÖÿ®ÿ∂ŸàŸÜŸá")) { reply = "ÿ™ÿπÿßŸÑŸä ŸÜŸÑÿπÿ® ÿßŸÇŸàŸÑŸÉ ÿßŸÑÿ®ÿ≥Ÿä ŸàŸáÿ¨ŸäŸÑŸÉ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿßÿµŸÑÿß"; } 
            else if (isMatch(msg, "ÿ¨ÿπÿßŸÜÿ©", "ÿπÿßŸäÿ≤ÿ© ÿ¢ŸÉŸÑ")) { reply = "ÿßŸÑÿ®ÿ≥Ÿä ŸàŸäŸÑÿß ŸÜŸÜÿ≤ŸÑ ŸÜÿßŸÉŸÑ .. ÿßŸÑÿπÿ≤ŸàŸÖÿ© ÿπŸÑŸäÿß!"; } 
            else if (isMatch(msg, "ÿ®ÿ™ÿπŸÖŸÑ ÿßŸä", "ÿ®ÿ™ÿπŸÖŸÑ ÿßŸäŸá")) { reply = "ÿ®ŸÅŸÉÿ± ŸÅŸäŸÉŸä Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ‚ù§Ô∏è"; }
            else if (isMatch(msg, "ŸÅŸäŸÜŸÉ")) { reply = "ÿ®ŸÅŸÉÿ± ŸÅŸäŸÉŸä.. ŸáŸà ÿ£ŸÜÿß Ÿàÿ±ÿßŸäÿß ÿ∫Ÿäÿ±ŸÉÿü üòâ"; } 
            else if (isMatch(msg, "Ÿàÿ≠ÿ¥ÿ™ŸÜŸä")) { reply = "ŸàÿßŸÜÿ™Ÿä ŸÉŸÖÿßŸÜ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä ÿ£ŸàŸä ŸÅŸàŸÇ ŸÖŸÜÿ™Ÿä ŸÖÿ™ÿÆŸäŸÑŸá Ÿäÿß ŸÖŸäŸÖŸà ŸàÿßŸÑŸÑŸá.. ÿ™ÿπÿßŸÑŸä ŸÅŸä ÿ≠ÿ∂ŸÜŸä ÿ®ŸÇŸâ ü´Ç"; } 
            else if (isMatch(msg, "ÿßŸÜÿ™ ÿπÿ®Ÿäÿ∑", "Ÿäÿß ÿ∫ÿ®Ÿä", "ÿ∫ÿ®Ÿä")) { reply = "ŸÖŸÇÿ®ŸàŸÑÿ© ŸÖŸÜŸÉ Ÿäÿß ŸÖŸÑŸÉŸá.. ÿ®ÿ≠ÿ®ŸÉ ÿ®ÿ±ÿ∂Ÿá üòÇ"; } 
            else if (isMatch(msg, "ÿ≠ŸÖŸàÿØŸä")) { reply = "ÿπŸäŸàŸÜ ÿ≠ŸÖŸàÿØŸä ŸÇŸÑÿ® ÿ≠ŸÖŸàÿØŸä"; } 
            else if (isMatch(msg, "ÿπÿßŸÖŸÑ ÿßŸä", "ÿπÿßŸÖŸÑ ÿ•ŸäŸá")) { reply = "ŸäÿπŸÜŸä ÿ®ÿµÿ±ÿßÿ≠Ÿá Ÿáÿ®ŸÇŸä ÿ™ŸÖÿßŸÖ ÿßÿ≤ÿßŸä ŸÖŸÜ ÿ∫Ÿäÿ±ŸÉ ÿ™ÿπÿßŸÑŸä ŸÜŸÜÿ≤ŸÑ Ÿàÿ≠ÿ¥ÿ™ŸäŸÜŸä"; } 
            else if (isMatch(msg, "ŸÅŸàŸäÿ≥", "ÿµŸàÿ™ŸÉ")) { reply = "ÿ±ŸÜŸä ÿπŸÑŸäÿß ŸäÿπŸÜŸä Ÿä ÿ∞ŸÉŸäŸá ÿµŸàÿ™ŸÉ Ÿàÿ≠ÿ¥ŸÜŸä üòâüìû"; } 
            else if (isMatch(msg, "ŸàÿßŸÑŸÑŸá")) { reply = "ŸàÿßŸÑŸÑŸá ÿ®ÿ≠ÿ®ŸÉ ‚ù§Ô∏è"; } 
            else if (isMatch(msg, "ÿ≤ŸÜÿßŸÜ")) { reply = "ÿ≤ŸÜÿßŸÜ ÿßŸá ÿ®ÿ≥ ÿ®ÿ≠ÿ®ŸÉ ÿ®ÿ±ÿ∂Ÿà üòÇ"; } 
            else if (isMatch(msg, "ÿ™ÿπÿßŸÑŸä ŸÜŸÜÿ≤ŸÑ", "ŸÜÿÆÿ±ÿ¨")) { reply = "ÿ±ŸÜŸä ÿπŸÑŸäÿß ÿ∑ÿ® ŸÜÿ∏ÿ®ÿ∑Ÿáÿß üòâ"; } 
            else if (isMatch(msg, "ÿßŸÜÿ™ ŸÖÿßŸÑŸÉ", "ŸÖÿßŸÑŸÉ ÿ®Ÿäÿß")) { reply = "ÿßŸÜÿ™Ÿä ŸÖÿßŸÑŸä ŸàÿØŸÜŸäÿ™Ÿä Ÿàÿ≠Ÿäÿßÿ™Ÿä Ÿä ŸÖŸäŸÖŸà ‚ù§Ô∏è"; } 
            else if (isMatch(msg, "ÿßŸÜÿ™ ÿπÿ≥ŸÑ", "ÿπÿ≥ŸÑ ÿßŸàŸä")) { reply = "ŸàÿßŸÑŸÑŸá ÿßŸÜÿ™Ÿä ÿßŸÑŸä ÿπÿ≥ŸÑ Ÿàÿ≥ŸÉÿ± ŸÖÿ≠ŸÑŸä üçØ"; }
            
            // --- NEW RULES ADDED HERE ---
            else if (isMatch(msg, "ÿßŸÜÿßŸÖ", "ŸáŸÜÿßŸÖ", "ÿπÿßŸàÿ≤Ÿá ÿßŸÜÿßŸÖ")) {
                addBotMessage("ÿ¥ÿØŸäÿ™ŸÉ ŸÅÿ≠ÿ∂ŸÜŸä Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä Ÿàÿ®Ÿàÿ≥ÿ™ ÿ±ÿßÿ≥ŸÉ ü´Çüíã");
                setTimeout(() => addBotMessage("ÿ™ÿµÿ®ÿ≠Ÿä ÿπŸÑŸä ÿÆŸäÿ± Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä üò¥‚ù§Ô∏è"), 1000);
                setTimeout(() => addBotMessage("ÿ≥ŸÑÿßŸÖ Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä Ÿáÿ™Ÿàÿ≠ÿ¥ŸäŸÜŸä üëã"), 2500);
                return; 
            }
            else if (isMatch(msg, "ÿ™ÿµÿ®ÿ≠ ÿπŸÑŸä ÿÆŸäÿ±")) { reply = "ŸàÿßŸÜÿ™Ÿä ŸÖŸÜ ÿßŸáŸÑŸä Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ‚ù§Ô∏è"; }
            else if (isMatch(msg, "ÿ≥ŸÑÿßŸÖ")) { reply = "ÿ≥ŸÑÿßŸÖ Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä üëã"; }
            else if (isMatch(msg, "ÿ¥ŸàŸäŸá Ÿàÿ¨ŸäŸá")) { reply = "ŸÖÿ™ÿ∫ÿ®Ÿäÿ¥ ÿπŸÑŸäÿß ÿ®ÿ™Ÿàÿ≠ÿ¥ŸäŸÜŸä Ÿáÿß üòâ"; }
            else if (isMatch(msg, "ÿßŸÜÿ™ ŸÅŸäŸÜ", "ŸÉŸÜÿ™ ŸÅŸäŸÜ")) { reply = "ŸÇÿßÿπÿØ ŸÅÿ≠ÿ∂ŸÜŸÉ ü´Ç"; }
            else if (isMatch(msg, "ÿ™ÿπÿßŸÑŸä ŸÅÿ≠ÿ∂ŸÜŸä")) { reply = "ÿ¨ŸäŸäŸäÿ™ üèÉ‚Äç‚ôÇÔ∏èüí®"; }
            else if (isMatch(msg, "ÿ™ÿπÿ®ÿßŸÜŸá")) { reply = "ÿ≥ŸÑÿßŸÖÿ™ŸÉ Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä Ÿäÿßÿ±ÿ™ŸÜŸä ŸÉŸÜÿ™ ÿßŸÜÿß ŸàŸÑÿß ÿßÿ¥ŸàŸÅ ŸÅŸäŸÉŸä ÿ≠ÿßÿ¨Ÿá Ÿàÿ≠ÿ¥Ÿá ÿ∑ÿ® ÿßŸä ÿßŸÜÿß ÿ¨ŸÖÿ®ŸÉ Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ü•∫üíä"; }
            else if (isMatch(msg, "ÿßŸä ŸÑÿßŸÅ ŸäŸà")) { reply = "ŸÑÿßŸÅ ŸäŸàŸàŸàŸà ÿ™ŸàŸàŸàŸàŸàŸàŸàŸà Ÿäÿß ÿ≠ÿ®Ÿäÿ®ÿ™ ŸÇŸÑÿ®Ÿä ÿßŸÜÿ™Ÿä ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è"; }
            else if (isMatch(msg, "ŸÖŸäŸÑÿßÿØ", "ÿπŸäÿØ ŸÖŸäŸÑÿßÿØ")) { reply = "ÿπŸäÿØ ŸÖŸäŸÑÿßÿØŸÉ Ÿäÿß ŸÖŸäŸÖŸà 19/9/2006 üéÇüéâ"; }
            else if (isMatch(msg, "ÿßÿ™ÿπÿ±ŸÅŸÜÿß")) { reply = "ŸäŸàŸÖ ŸÖÿß ÿßÿ™ÿπÿ±ŸÅŸÜÿß ŸÉÿßŸÜ 13/11/2024ÿå ÿ£ÿ≠ŸÑŸâ ŸäŸàŸÖ ŸÅŸä ÿ≠Ÿäÿßÿ™Ÿä ü•∞"; }
            else if (isMatch(msg, "ÿßŸàŸÑ ÿØŸäÿ™", "ÿßŸàŸÑ ŸÖÿ±Ÿá ŸÜÿ≤ŸÑŸÜÿß") || (isMatch(msg, "ŸÜÿ≤ŸÑŸÜÿß") && isMatch(msg, "ÿßŸÖÿ™Ÿâ"))) { reply = "ÿ£ŸàŸÑ ÿØŸäÿ™ ŸÉÿßŸÜ ŸäŸàŸÖ 4/12/2024 Ÿäÿß ÿ±Ÿàÿ≠Ÿä üìÖ"; }
            else if (isMatch(msg, "ŸÉŸÜÿß ŸÅŸäŸÜ")) { reply = "ÿßŸÑÿ≥ŸäŸÜŸÖÿß Ÿä ÿ≠ÿ®Ÿäÿ®ÿ™Ÿä ÿ®ŸÜÿ¥ŸàŸÅ ŸÖŸàÿßŸÜÿß Ÿàÿßÿ™ÿµŸàÿ±ŸÜÿß ÿßŸÉÿ™ÿ± ÿµŸàÿ±Ÿá ÿ®ŸÜÿ≠ÿ®Ÿáÿß ŸÅÿßŸÑÿßÿ≥ÿßŸÜÿ≥Ÿäÿ± ÿßŸÜÿß ÿ®ÿ≠ÿ®ŸÉ ÿßŸàŸä Ÿäÿß ŸÖŸäŸÖŸà üçøüé¨"; }
            else if (isMatch(msg, "memorito")) {
                window.open("https://memorito0.netlify.app/", "_blank");
                reply = "ÿ¨ÿßÿ±Ÿä ŸÅÿ™ÿ≠ ÿ∞ŸÉÿ±Ÿäÿßÿ™ŸÜÿß Ÿäÿß ŸÖŸäŸÖŸà... ‚ù§Ô∏è‚è≥";
            }
            else { 
                // --- Priority 2: Smart Brain (Fallback) ---
                reply = analyzeSmartResponse(msg);
            }
            addBotMessage(reply);
        }
    </script>
</body>
</html>
