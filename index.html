<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ff9a9e">
    <title>For Memo â¤ï¸</title>
    
    <link rel="icon" type="image/gif" href="https://media.tenor.com/HbsmAg2_OUUAAAAj/newt00th-newtooth.gif">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;600;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">

    <style>
        /* --- Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† --- */
        :root {
            --primary-color: #e91e63;
            --secondary-color: #f48fb1;
            --text-color: #4a0e26;
            --card-bg: rgba(255, 255, 255, 0.85);
            --glass-border: 1px solid rgba(255, 255, 255, 0.6);
            --shadow: 0 10px 30px rgba(233, 30, 99, 0.15);
            --btn-gradient: linear-gradient(135deg, #fce4ec, #f8bbd0);
            --btn-text: #880e4f;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 300% 300%;
            animation: gradientBG 15s ease infinite;
            font-family: 'El Messiri', sans-serif;
            height: 100dvh; margin: 0;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; position: relative;
        }

        @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

        .heart-rain {
            position: absolute; color: var(--primary-color); top: -10vh; font-size: 20px;
            animation: fall linear forwards; z-index: 0; opacity: 0.6; pointer-events: none;
        }
        @keyframes fall { to { transform: translateY(110vh) rotate(360deg); } }

        /* --- Ø§Ù„ÙƒØ§Ø±Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ --- */
        .container {
            width: 90%; max-width: 400px;
            background: var(--card-bg); 
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: var(--glass-border);
            border-radius: 35px; 
            padding: 35px 25px;
            text-align: center; box-shadow: var(--shadow);
            z-index: 10; position: relative;
            max-height: 90vh; overflow-y: auto; scrollbar-width: none;
            display: flex; flex-direction: column; 
            gap: 16px; 
        }
        .container::-webkit-scrollbar { display: none; }

        h2 { color: var(--text-color); font-weight: 700; margin: 0; font-size: 26px; margin-bottom: 5px; }
        h3 { color: var(--primary-color); font-weight: 700; margin: 0 0 15px 0; font-size: 22px; }
        
        .bear-gif { width: 110px; margin: 0 auto; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1)); }
        .msg-gif { width: 140px; margin: 0 auto 15px auto; display: block; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1)); }

        .info-box {
            background: rgba(255, 255, 255, 0.6); padding: 15px; border-radius: 20px;
            color: var(--text-color); line-height: 1.8; font-size: 17px; font-weight: 600;
            border: 1px solid #fff; width: 100%; box-shadow: 0 4px 15px rgba(0,0,0,0.03);
        }

        .fadfada-box {
            width: 100%; height: 160px;
            border-radius: 20px;
            border: 2px solid #e0e0e0;
            padding: 15px;
            font-family: 'El Messiri', sans-serif;
            font-size: 16px;
            color: #333;
            outline: none;
            resize: none;
            background: rgba(255, 255, 255, 0.9);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
            transition: 0.3s;
            margin-top: 5px;
        }
        .fadfada-box:focus { border-color: var(--primary-color); background: #fff; }
        .fadfada-box::placeholder { color: #aaa; }

        .special-msg-box {
            background: #fff5f8; padding: 20px; border-radius: 20px;
            color: #880e4f; font-size: 17px; line-height: 1.9; font-weight: 600;
            border: 2px dashed var(--secondary-color); white-space: pre-line;
            animation: popText 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            text-align: right; direction: rtl;
        }
        @keyframes popText { 0% { opacity: 0; transform: scale(0.8) translateY(10px); } 100% { opacity: 1; transform: scale(1) translateY(0); } }

        input[type="password"] {
            width: 100%; padding: 15px; border-radius: 50px; border: 2px solid transparent; background: #fff;
            text-align: center; font-size: 22px; color: var(--primary-color); letter-spacing: 5px; outline: none;
            transition: 0.3s; box-shadow: inset 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 5px;
        }
        input[type="password"]:focus { border-color: var(--secondary-color); }

        button {
            width: 100%; padding: 16px; border: none; border-radius: 50px;
            background: linear-gradient(135deg, #ff3366, #ff6b8b);
            color: white; font-size: 17px; font-weight: 700; cursor: pointer; 
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 8px 20px rgba(255, 51, 102, 0.3); font-family: 'El Messiri', sans-serif; 
            margin: 0; 
            -webkit-user-select: none; user-select: none;
        }
        button:active { transform: scale(0.97); }
        
        .spacer-btn { margin-top: 5px !important; margin-bottom: 5px !important; }
        
        .back-btn { background: linear-gradient(135deg, #cfd9df, #e2ebf0); color: #555; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-top: 10px; }
        .emergency-btn { background: linear-gradient(135deg, #ff512f, #dd2476); animation: pulseRed 2s infinite; margin-top: 15px; }
        @keyframes pulseRed { 0%, 100% { box-shadow: 0 0 0 0 rgba(221, 36, 118, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(221, 36, 118, 0); } }

        .flashcard-container { width: 100%; height: 250px; position: relative; perspective: 1000px; margin-bottom: 10px; }
        .flashcard { width: 100%; height: 100%; background: #fff; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: center; padding: 20px; font-size: 20px; font-weight: bold; color: var(--primary-color); position: absolute; top: 0; left: 0; backface-visibility: hidden; transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.6s ease; border: 2px solid var(--secondary-color); }
        .flashcard.out { transform: translateX(-120%) rotate(-15deg); opacity: 0; }
        .flashcard.in { transform: translateX(0) rotate(0deg); opacity: 1; }

        #weather-icon { font-size: 80px; margin: 5px 0; animation: floatIcon 3s ease-in-out infinite; text-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        @keyframes floatIcon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        #weather-temp { font-size: 32px; font-weight: 800; color: #555; margin-bottom: 10px; }

        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; margin-bottom: 5px; margin-top: 5px; }
        .grid-menu button { font-size: 15px; background: var(--btn-gradient); color: var(--btn-text); box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .mood-btn { background: linear-gradient(135deg, #e0c3fc, #8ec5fc) !important; color: #fff !important; }
        .visa-btn { background: linear-gradient(135deg, #434343, #000000) !important; color: #fff !important; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4) !important; }
        .new-msg-btn { background: linear-gradient(135deg, #84fab0, #8fd3f4) !important; color: #006466 !important; grid-column: span 2; }
        .fadfada-btn { background: linear-gradient(135deg, #a6c0fe, #f68084) !important; color: white !important; grid-column: span 2; }
        .weather-btn { background: linear-gradient(135deg, #89f7fe, #66a6ff) !important; color: white !important; grid-column: span 2; }

        .music-player { background: #fff; padding: 10px 20px; border-radius: 50px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 5px 15px rgba(0,0,0,0.05); width: 100%; }
        .song-info { text-align: right; font-size: 14px; font-weight: bold; color: var(--text-color); }
        .music-controls button { width: 38px; height: 38px; padding: 0; margin: 0 3px; border-radius: 50%; font-size: 14px; box-shadow: none; background: linear-gradient(135deg, #ff80ab, #ff4081); color: white; }

        .timer-container { display: flex; justify-content: space-between; gap: 8px; direction: ltr; margin-top: 5px; }
        .time-unit { background: #fff; padding: 10px 0; border-radius: 15px; flex: 1; box-shadow: 0 3px 10px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; }
        .time-number { font-size: 20px; font-weight: 800; color: var(--primary-color); line-height: 1.1; }
        .time-label { font-size: 12px; color: #888; font-weight: 700; margin-top: 2px; }

        /* --- VISA CARD --- */
        .credit-card { width: 100%; aspect-ratio: 1.586 / 1; background: linear-gradient(135deg, #1f1f1f 0%, #2c3e50 50%, #000000 100%); border-radius: 16px; padding: 20px; color: #fff; text-align: left; position: relative; box-shadow: 0 15px 35px rgba(0,0,0,0.4); margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1); display: flex; flex-direction: column; justify-content: space-between; overflow: hidden; font-family: 'Share Tech Mono', monospace; }
        .credit-card::before { content: ''; position: absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(115deg, transparent 40%, rgba(255,255,255,0.1) 45%, transparent 50%); pointer-events: none; }
        .card-top { display: flex; justify-content: space-between; align-items: flex-start; }
        .card-chip { width: 45px; height: 35px; background: linear-gradient(135deg, #d4af37 0%, #f9e29a 50%, #d4af37 100%); border-radius: 6px; border: 1px solid #b8860b; position: relative; }
        .card-chip::after { content: ''; position: absolute; top: 50%; left: 0; width: 100%; height: 1px; background: #b8860b; }
        .card-chip::before { content: ''; position: absolute; left: 30%; top: 15%; width: 40%; height: 70%; border: 1px solid #b8860b; border-top: none; border-bottom: none; }
        .wifi-icon { width: 30px; height: 30px; opacity: 0.8; fill: #fff; margin-left: 10px; transform: rotate(90deg); }
        .card-number { font-size: 19px; letter-spacing: 2px; margin: 15px 0; color: #fff; text-shadow: 1px 1px 2px #000; z-index: 2; }
        .card-balance-container { display: flex; justify-content: space-between; align-items: center; }
        .card-balance { font-size: 24px; font-weight: bold; text-shadow: 0 0 10px rgba(255,255,255,0.3); color: #fff; direction: ltr; }
        .card-info-row { display: flex; justify-content: space-between; align-items: flex-end; width: 100%; margin-top: 5px; }
        .info-group { display: flex; flex-direction: column; }
        .info-label { font-size: 9px; text-transform: uppercase; color: #ccc; margin-bottom: 2px; }
        .info-value { font-size: 14px; text-transform: uppercase; text-shadow: 1px 1px 1px #000; letter-spacing: 1px; }
        .visa-logo { width: 50px; height: auto; fill: #fff; font-style: italic; font-weight: bold; font-size: 24px; text-align: right; opacity: 0.9; }

        /* --- Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ --- */
        .games-menu { display: flex; flex-direction: column; gap: 12px; }
        .game-wrapper { display: none; }
        .rps-score { display: flex; justify-content: space-around; background: #fff; padding: 15px; border-radius: 20px; margin-bottom: 15px; font-weight: bold; }
        .rps-btn { font-size: 35px; width: 70px; height: 70px; background: #fff; border: 2px solid #eee; margin: 0 5px; }
        .rps-result { font-size: 20px; font-weight: bold; margin-top: 20px; min-height: 60px; color: var(--primary-color); }
        #flappy-canvas { background: #87CEEB; border-radius: 15px; border: 3px solid #333; margin: 0 auto; display: block; box-shadow: 0 5px 15px rgba(0,0,0,0.1); cursor: pointer; touch-action: none; }
        .flappy-score-board { display: flex; justify-content: space-between; padding: 10px; font-weight: bold; font-size: 16px; }
        .flappy-msg-box { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.98); padding: 25px; border-radius: 25px; width: 85%; text-align: center; border: 2px solid var(--primary-color); box-shadow: 0 15px 40px rgba(0,0,0,0.2); display: none; z-index: 20; }
        .puzzle-container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; width: 270px; height: 270px; margin: 0 auto; border: 3px solid #fff; border-radius: 10px; overflow: hidden; background: #eee; }
        .puzzle-tile { width: 90px; height: 90px; background-size: 270px 270px; cursor: pointer; transition: transform 0.2s ease-in-out; }
        .puzzle-empty { background: transparent !important; cursor: default; }
        .puzzle-stats { display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; color: #444; }
        .puzzle-timer-val { color: #d32f2f; font-size: 18px; }
        .puzzle-best-val { color: #4CAF50; font-size: 18px; }
        .puzzle-msg { font-size: 18px; font-weight: bold; color: var(--primary-color); margin-top: 10px; display: none; }
        .level-btns { display: flex; justify-content: center; gap: 10px; margin-bottom: 15px; }
        .level-btn { background: #fff; color: #333; padding: 8px 15px; font-size: 14px; border-radius: 20px; box-shadow: 0 3px 5px rgba(0,0,0,0.1); width: auto; border: 1px solid #ddd; }
        .level-btn.active { background: var(--primary-color); color: #fff; border-color: var(--primary-color); }
        .game-area { width: 100%; height: 300px; background: rgba(0,0,0,0.03); border-radius: 20px; position: relative; overflow: hidden; border: 2px dashed var(--secondary-color); margin-bottom: 10px; }
        .game-item { position: absolute; font-size: 45px; cursor: pointer; animation: fallGame 1.5s linear forwards; user-select: none; z-index: 5; width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; }
        @keyframes fallGame { to { top: 100%; } }
        .game-over-msg { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(255,255,255,0.98); padding: 25px; border-radius: 20px; width: 90%; font-weight: bold; color: var(--primary-color); display: none; box-shadow: 0 15px 40px rgba(0,0,0,0.2); z-index: 10; border: 1px solid var(--secondary-color); }
        .whack-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; height: 300px; margin: 15px 0; }
        .whack-hole { background: #ffccbc; border-radius: 50%; position: relative; overflow: hidden; border: 3px solid #ff8a65; box-shadow: inset 0 5px 10px rgba(0,0,0,0.2); cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><text y="20" font-size="20">ğŸ©´</text></svg>') 16 16, pointer; transition: background-color 0.1s; }
        .whack-hole.active-hit { background-color: #ff5252; }
        .whack-mole { width: 100%; height: 100%; position: absolute; top: 100%; left: 0; transition: top 0.1s; display: flex; align-items: center; justify-content: center; font-size: 50px; user-select: none; }
        .whack-mole.up { top: 0; }
        .whack-mole.hit { animation: hitShake 0.2s ease; filter: grayscale(0.5); }
        @keyframes hitShake { 0% { transform: translate(0, 0) rotate(0); } 25% { transform: translate(-8px, 8px) rotate(-15deg); } 50% { transform: translate(8px, -8px) rotate(15deg); } 75% { transform: translate(-5px, 0) rotate(-5deg); } 100% { transform: translate(0, 0) rotate(0); } }
        .whack-score-board { display: flex; justify-content: space-between; font-weight: bold; font-size: 18px; margin-bottom: 10px; color: var(--primary-color); }
        .floating-text { position: absolute; font-size: 18px; font-weight: 900; color: #d32f2f; pointer-events: none; animation: floatUp 0.6s ease-out forwards; z-index: 20; text-shadow: 2px 2px 0 #fff, -1px -1px 0 #fff; white-space: nowrap; }
        @keyframes floatUp { 0% { opacity: 1; transform: translateY(0) scale(1); } 100% { opacity: 0; transform: translateY(-50px) scale(1.5); } }

        /* --- CHAT BOT STYLES --- */
        #chat-icon {
            position: fixed; bottom: 20px; right: 20px; width: 60px; height: 60px; background: linear-gradient(135deg, #00C6FF, #0072FF); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; color: white; box-shadow: 0 5px 15px rgba(0,0,0,0.3); cursor: pointer; z-index: 2000; transition: transform 0.3s; animation: bounceIcon 2s infinite;
        }
        @keyframes bounceIcon { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
        #chat-icon:hover { transform: scale(1.1); }
        #chat-window { position: fixed; bottom: 90px; right: 20px; width: 320px; height: 450px; background: #fff; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.3); display: flex; flex-direction: column; overflow: hidden; z-index: 2000; border: 1px solid #eee; transform-origin: bottom right; transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); }
        #chat-window.hidden { transform: scale(0); opacity: 0; pointer-events: none; }
        .chat-header { background: linear-gradient(135deg, #00C6FF, #0072FF); padding: 15px; color: white; font-weight: bold; display: flex; justify-content: space-between; align-items: center; font-size: 18px; }
        .chat-header span { cursor: pointer; font-size: 14px; background: rgba(0,0,0,0.1); padding: 5px 10px; border-radius: 15px; }
        .chat-actions { display: flex; gap: 10px; align-items: center; }
        #chat-body { flex: 1; overflow-y: auto; padding: 15px; background: #f9f9f9; display: flex; flex-direction: column; gap: 10px; }
        .chat-msg { max-width: 80%; padding: 10px 15px; border-radius: 15px; font-size: 14px; line-height: 1.4; position: relative; word-wrap: break-word; }
        .user-msg { align-self: flex-end; background: #DCF8C6; color: #333; border-bottom-right-radius: 2px; }
        .bot-msg { align-self: flex-start; background: #fff; color: #333; border: 1px solid #eee; border-bottom-left-radius: 2px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .chat-input-area { padding: 10px; background: #fff; border-top: 1px solid #eee; display: flex; gap: 10px; align-items: center; }
        #chat-input { flex: 1; padding: 10px; border-radius: 20px; border: 1px solid #ddd; outline: none; font-family: 'El Messiri', sans-serif; }
        .chat-input-area button { width: 40px; height: 40px; padding: 0; border-radius: 50%; background: #0072FF; color: white; font-size: 18px; display: flex; align-items: center; justify-content: center; }
        .typing-indicator { font-size: 12px; color: #888; font-style: italic; margin-left: 10px; display: none; align-self: flex-start; margin-bottom: 5px; }
        .typing-indicator span { display: inline-block; width: 5px; height: 5px; background: #aaa; border-radius: 50%; margin: 0 1px; animation: typing 1s infinite; }
        .typing-indicator span:nth-child(2) { animation-delay: 0.2s; } .typing-indicator span:nth-child(3) { animation-delay: 0.4s; }
        @keyframes typing { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .fingerprint { font-size: 80px; color: #e0e0e0; margin: 20px 0; transition: 0.3s; cursor: pointer; }
        .fingerprint.active { color: var(--primary-color); transform: scale(1.1); text-shadow: 0 0 25px var(--primary-color); }
        .love-result { font-size: 22px; font-weight: 800; color: var(--primary-color); display: none; margin-top: 20px; animation: popIn 0.5s ease; }
        iframe { width: 100%; height: 240px; border-radius: 25px; border: 4px solid #fff; box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .fake-notification { position: fixed; top: -100px; left: 50%; transform: translateX(-50%); background: rgba(255, 255, 255, 0.95); padding: 12px 20px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); z-index: 1000; display: flex; align-items: center; gap: 15px; width: 90%; max-width: 350px; transition: top 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.5); }
        .notif-icon { width: 40px; height: 40px; background: #25d366; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px; }
        .notif-content div:first-child { font-weight: bold; font-size: 14px; text-align: right; margin-bottom: 2px; }
        .notif-content div:last-child { font-size: 12px; color: #555; text-align: right; }
        .signature { font-size: 12px; margin-top: 35px; color: #777; font-weight: bold; opacity: 0.8; }
        .signature span { color: red; animation: beat 1s infinite; display: inline-block; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.3); } }
        .icons-container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.5); width: 100%; }
        .icon-btn { width: 50px; height: 50px; background: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.08); border: none; cursor: pointer; padding: 0; }
        .icon-btn svg { width: 24px; fill: var(--primary-color); }
        .icon-btn:hover { transform: translateY(-5px); background: var(--primary-color); } .icon-btn:hover svg { fill: #fff; }
        .flower-img { width: 200px; filter: drop-shadow(0 10px 20px rgba(255,105,180,0.3)); margin-bottom: 20px; }
        .hidden { display: none !important; }
        .stagger-in { opacity: 0; transform: translateY(15px); animation: fadeInSmooth 0.6s ease-out forwards; }
        .delay-1 { animation-delay: 0.1s; } .delay-2 { animation-delay: 0.2s; } .delay-3 { animation-delay: 0.3s; } .delay-4 { animation-delay: 0.4s; } .delay-5 { animation-delay: 0.5s; }
        @keyframes fadeInSmooth { to { opacity: 1; transform: translateY(0); } }
        .shake { animation: shake 0.4s ease-in-out; border: 2px solid var(--primary-color) !important; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
    </style>
</head>
<body>

    <audio id="bg-music" preload="auto"><source src="" type="audio/mpeg"></audio>
    <audio id="voice-note" preload="auto"><source src="voice.mp3" type="audio/mpeg"></audio>
    <audio id="cash-sound" preload="auto"><source src="cash.mp3" type="audio/mpeg"></audio>
    <audio id="punch-sound" preload="auto"><source src="punch.mp3" type="audio/mpeg"></audio>
    <audio id="msg-sound" preload="auto"><source src="msg.mp3" type="audio/mpeg"></audio>

    <div id="fake-notif" class="fake-notification">
        <div class="notif-icon">ğŸ’¬</div>
        <div class="notif-content">
            <div>Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ø­Ù…ÙˆØ¯ÙŠ</div>
            <div id="notif-message">...</div>
        </div>
    </div>

    <div id="chat-icon" class="hidden" onclick="toggleChat()">ğŸ’¬</div>
    <div id="chat-window" class="hidden">
        <div class="chat-header">
            Ø­Ù…ÙˆØ¯ÙŠ ğŸ¤–
            <div class="chat-actions">
                <span onclick="clearChat()" title="Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Øª" style="font-size: 16px;">ğŸ—‘ï¸</span>
                <span onclick="toggleChat()" title="Ø¥ØºÙ„Ø§Ù‚">âœ–ï¸</span>
            </div>
        </div>
        <div id="chat-body">
            </div>
        <div class="typing-indicator" id="typing-indicator">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø© <span></span><span></span><span></span></div>
        <div class="chat-input-area">
            <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§..." onkeypress="if(event.key==='Enter') sendChatMessage()">
            <button onclick="sendChatMessage()">â¤</button>
        </div>
    </div>

    <div class="container" id="main-container">
        
        <div id="login-screen" style="display: flex; flex-direction: column; gap: 20px;">
            <img src="https://i.pinimg.com/originals/83/e2/a1/83e2a104d404d885af6a46f1b4ac435a.gif" class="bear-gif" alt="Bear">
            <h2 class="stagger-in delay-1">Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ÙŠØ§ ÙƒÙˆØªÙŠ ğŸ»</h2>
            <input type="password" id="password" inputmode="numeric" placeholder="******" class="stagger-in delay-2">
            <div id="error" style="display:none; color:#d90429; font-weight:bold; font-size:14px;">Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ØºÙ„Ø· ÙŠØ§  Ù…ÙŠÙ…Ùˆ ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§ÙˆÙ„ÙŠ ØªØ§Ù†ÙŠ!</div>
            <button onclick="checkPassword()" class="stagger-in delay-3">Ø¯Ø®ÙˆÙ„ â¤ï¸</button>
        </div>

        <div id="main-menu" class="hidden">
            <h2 id="greeting-msg" class="stagger-in delay-1">...</h2>
            
            <div class="music-player stagger-in delay-2">
                <div class="song-info">
                    <span style="font-size:10px; color:#888;">Ø´ØºØ§Ù„:</span>
                    <span id="current-song-name">Ø£ØºÙ†ÙŠØ© 1 ğŸµ</span>
                </div>
                <div class="music-controls">
                    <button onclick="toggleMusic()">â¯</button>
                    <button onclick="nextSong()">â­</button>
                </div>
            </div>

            <div class="info-box stagger-in delay-2" style="padding: 10px;">
                <div style="font-size:14px; margin-bottom:8px; color:#666; font-weight:bold;">Ø§Ù„Ø¹Ù…Ø± ÙƒÙ„Ùˆ Ù…Ø¹ Ø¨Ø¹Ø¶ ÙŠØ§Ø±Ø¨ â¤ï¸</div>
                <div class="timer-container">
                    <div class="time-unit"><span id="days" class="time-number">0</span><span class="time-label">ÙŠÙˆÙ…</span></div>
                    <div class="time-unit"><span id="hours" class="time-number">0</span><span class="time-label">Ø³Ø§Ø¹Ø©</span></div>
                    <div class="time-unit"><span id="minutes" class="time-number">0</span><span class="time-label">Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
                    <div class="time-unit"><span id="seconds" class="time-number">0</span><span class="time-label">Ø«Ø§Ù†ÙŠØ©</span></div>
                </div>
            </div>

            <button onclick="showSection('message-section')" class="stagger-in delay-3 spacer-btn">ğŸ’Œ Ø±Ø³Ø§Ù„ØªÙŠ</button>
            
            <div class="grid-menu stagger-in delay-4">
                <button onclick="showSection('open-when-section')">ğŸ’Œ Ø§ÙØªØ­ÙŠÙ‡Ø§ Ù„Ù…Ø§</button>
                <button onclick="showSection('jar-section')">ğŸ° Ø¨Ø±Ø·Ù…Ø§Ù† Ø§Ù„Ø³Ø¹Ø§Ø¯Ø©</button>
                <button onclick="showSection('voice-section')">ğŸ¤ ØªØ¹Ø§Ù„ÙŠ Ø§Ù‚ÙˆÙ„Ùƒ Ø­Ø§Ø¬Ù‡</button>
                <button onclick="showSection('games-hub')">ğŸ® ØªØ¹Ø§Ù„ÙŠ Ù†Ù„Ø¹Ø¨</button>
                <button onclick="showSection('wheel-section')">ğŸ¡ Ù†Ø®Ø±Ø¬ ÙÙŠÙ†ØŸ</button>
                <button onclick="showSection('love-meter-section')">ğŸ‘† Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­Ø¨</button>
                <button onclick="showSection('flower-section')">ğŸŒ¸ ØªØ§Ø®Ø¯ÙŠ ÙˆØ±Ø¯ØŸ</button>
                <button onclick="showSection('visa-section')" class="visa-btn">ğŸ’³ ÙÙŠØ²Ø§</button>
                <button onclick="showSection('new-msg-section')" class="new-msg-btn">ğŸ“ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ© Ù„ÙŠÙƒÙŠ</button>
                <button onclick="showSection('fadfada-section')" class="fadfada-btn">â˜ï¸ ÙØ¶ÙØ¶Ø© Ù„Ø­Ù…ÙˆØ¯ÙŠ</button>
                <button onclick="showSection('weather-section')" class="weather-btn">ğŸŒ¤ï¸ Ù†Ø´Ø±Ø© Ø­Ù…ÙˆØ¯ÙŠ</button>
            </div>

            <button onclick="showSection('promises-section')" class="stagger-in delay-5 spacer-btn">ğŸ“œ Ø¨ÙˆØ¹Ø¯Ùƒ</button>

            <a href="tel:01223377869" style="text-decoration:none;">
                <button class="emergency-btn stagger-in delay-5">ğŸš¨ Ø²Ø±Ø§Ø± Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</button>
            </a>

            <div class="icons-container stagger-in delay-5">
                <a href="https://sites.google.com/view/basbosaskndrany04" target="_blank" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg></a>
                <button onclick="showSection('video-section')" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg></button>
                <a href="https://sites.google.com/view/13-112025" target="_blank" class="icon-btn"><svg viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/></svg></a>
            </div>

            <div class="signature stagger-in delay-5">Made with <span>â¤ï¸</span> by Hamody</div>
        </div>

        <div id="weather-section" class="hidden">
            <h2>Ù†Ø´Ø±Ø© Ø£Ø®Ø¨Ø§Ø± Ø­Ù…ÙˆØ¯ÙŠ ğŸŒ¤ï¸</h2>
            <div id="weather-icon">â˜€ï¸</div>
            <div id="weather-temp">--Â°C</div>
            <div class="info-box" id="weather-msg">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³...</div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="fadfada-section" class="hidden">
            <h2>ÙØ¶ÙØ¶ÙŠ ÙŠØ§ Ø±ÙˆØ­ÙŠ â˜ï¸</h2>
            <div class="info-box" style="margin-bottom:10px;">
                Ù…ØªØ®Ø¨ÙŠØ´ Ø­Ø§Ø¬Ø© ÙÙŠ Ù‚Ù„Ø¨Ùƒ.. Ø§ÙƒØªØ¨ÙŠ ÙƒÙ„ Ø§Ù„Ù„ÙŠ Ù…Ø¶Ø§ÙŠÙ‚Ùƒ ÙˆØ£Ù†Ø§ Ù‡Ø³Ù…Ø¹Ùƒ ÙˆÙ‡ÙƒÙˆÙ† Ø¬Ù…Ø¨Ùƒ Ø¯Ø§ÙŠÙ…Ø§Ù‹ â¤ï¸
            </div>
            <textarea id="fadfada-text" class="fadfada-box" placeholder="Ø³Ø§Ù…Ø¹Ùƒ ÙŠØ§ Ù…ÙŠÙ…Ùˆ.. Ø§ÙƒØªØ¨ÙŠ Ù‡Ù†Ø§ ÙƒÙ„ Ø§Ù„Ù„ÙŠ ÙÙŠ Ù†ÙØ³Ùƒ..."></textarea>
            <button onclick="sendFadfadaEmail()" style="background: linear-gradient(135deg, #2196F3, #21CBF3); margin-top: 15px; box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);">Ø¥Ø±Ø³Ø§Ù„ Ù„Ø­Ù…ÙˆØ¯ÙŠ ğŸ“¤</button>
            <div style="font-size:10px; color:#999; margin-top:5px; font-weight:bold;">(Ù‡ÙŠÙØªØ­ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¹Ø´Ø§Ù† ØªØ¨Ø¹ØªÙŠÙ‡Ø§ Ø¹Ù„Ø·ÙˆÙ„)</div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="visa-section" class="hidden">
            <h2>Ø¨Ù†Ùƒ Ø§Ù„Ø­Ø¨ â¤ï¸</h2>
            <div class="credit-card">
                <div class="card-top">
                    <div class="card-chip"></div>
                    <svg class="wifi-icon" viewBox="0 0 24 24"><path d="M12 6c3.03 0 5.78 1.11 7.9 2.93l-1.42 1.42C16.69 8.9 14.47 8 12 8c-2.47 0-4.69.9-6.49 2.35l-1.42-1.42C6.22 7.11 8.97 6 12 6zm0 4c2.08 0 3.97.76 5.43 2.01l-1.43 1.43C15.11 12.63 13.64 12 12 12s-3.11.63-4.01 1.44l-1.43-1.43C8.03 10.76 9.92 10 12 10zm0 4c1.13 0 2.16.41 2.96 1.09l-1.45 1.45C13.15 16.27 12.61 16 12 16s-1.15.27-1.52.54l-1.45-1.45C9.84 14.41 10.87 14 12 14z"/></svg>
                </div>
                
                <div class="card-balance-container">
                    <div class="card-number">4532  9012  3456  0409</div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                    <div style="width: 70%;">
                        <div class="card-balance" id="card-balance-txt">$4,000,000</div>
                        <div class="card-info-row">
                            <div class="info-group">
                                <span class="info-label">Card Holder</span>
                                <span class="info-value">Omama Alaa</span>
                            </div>
                            <div class="info-group" style="margin-left: 15px;">
                                <span class="info-label">Expires</span>
                                <span class="info-value">09/19</span>
                            </div>
                        </div>
                    </div>
                    <div class="visa-logo">VISA</div>
                </div>
            </div>
            
            <button onclick="withdrawMoney()" style="background:#4CAF50; margin-top:10px;">Ø³Ø­Ø¨ 10,000$ ğŸ’¸</button>
            <div class="info-box" style="margin-top:20px; background:#fff; font-weight:bold; color:var(--primary-color);">Ø§ØµØ±ÙÙŠ ÙŠØ±ÙˆØ­ÙŠ Ø¨Ø±Ø§Ø­ØªÙƒ Ø§Ù‡Ù… 4 Ù…Ù„ÙŠÙˆÙ† Ø¯ÙˆÙ„Ø§Ø± Ù…Ø´ 2 Ø¨Ø³ ÙŠØ§ ÙƒÙˆØªÙŠ ğŸ˜‰ğŸ’¸</div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="games-hub" class="hidden">
            <h2>ØªØ¹Ø§Ù„ÙŠ Ù†Ù„Ø¹Ø¨ Ø³ÙˆØ§ ğŸ®</h2>
            
            <div id="games-menu" class="games-menu">
                <button onclick="showGame('whack-game')" style="background: linear-gradient(135deg, #ff9a9e, #e91e63); color:white;">ğŸ¥Š Ø§Ø¶Ø±Ø¨ÙŠ Ø­Ù…ÙˆØ¯ÙŠ</button>
                <button onclick="showGame('rps-game')" style="background: linear-gradient(135deg, #ffb7b2, #ff9a9e); color:white;">âœŒï¸ Ø­Ø¬Ø±Ø© ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ</button>
                <button onclick="showGame('flappy-game')" style="background: linear-gradient(135deg, #a2d2ff, #bde0fe); color:#333;">ğŸ¦… ÙÙ„Ø§Ø¨ÙŠ Ù‡Ø§Ø±Øª</button>
                <button onclick="showGame('collect-game')" style="background: linear-gradient(135deg, #ffccbc, #ffab91); color:white;">â¤ï¸ ØªØ¹Ø§Ù„ÙŠ Ù†Ø¬Ù…Ø¹ Ø§Ù„Ù‚Ù„ÙˆØ¨</button>
                <button onclick="showGame('puzzle-game')" style="background: linear-gradient(135deg, #c5cae9, #9fa8da); color:white;">ğŸ§© Ø¨Ø§Ø²Ù„</button>
            </div>

            <div id="whack-game" class="game-wrapper">
                <h3>Ø·Ù„Ø¹ÙŠ ØºÙ„Ùƒ ÙÙŠØ§ ğŸ¥Š</h3>
                <div class="whack-score-board">
                    <span>Ø§Ù„Ø¶Ø±Ø¨Ø§Øª: <span id="whack-score">0</span></span>
                    <span>ÙØ§Ø¶Ù„: <span id="whack-time">20</span>Ø«</span>
                </div>
                <div class="whack-grid" id="whack-grid">
                    </div>
                <div id="whack-msg" style="display:none; font-weight:bold; color:var(--primary-color); font-size:18px; margin-top:10px;"></div>
                <button onclick="startWhackGame()" style="background:#d32f2f; margin-top:10px;">ÙŠÙ„Ø§ Ø§Ø¶Ø±Ø¨ÙŠ ğŸ˜¡</button>
                <button class="back-btn" onclick="showGame('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            </div>

            <div id="rps-game" class="game-wrapper">
                <h3>Ø­Ø¬Ø±Ø© ÙˆØ±Ù‚Ø© Ù…Ù‚Øµ âœŒï¸</h3>
                <div class="rps-score">
                    <div>Ù…ÙŠÙ…Ùˆ: <span id="user-rps-score">0</span></div>
                    <div>Ø­Ù…ÙˆØ¯ÙŠ: <span id="comp-rps-score">0</span></div>
                </div>
                <div class="rps-result" id="rps-result">Ø§Ù„Ø¹Ø¨ÙŠ Ø¨Ù‚ÙŠ Ù…Ø´ Ù‡Ø®Ø³Ø± Ø²ÙŠ ÙƒÙ„ Ù…Ø±Ù‡ !</div>
                <div class="rps-choices">
                    <button class="rps-btn" onclick="rpsPlay('rock')">âœŠ</button>
                    <button class="rps-btn" onclick="rpsPlay('paper')">âœ‹</button>
                    <button class="rps-btn" onclick="rpsPlay('scissors')">âœŒï¸</button>
                </div>
                <button class="back-btn" onclick="showGame('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            </div>

            <div id="flappy-game" class="game-wrapper">
                <h3>ÙÙ„Ø§Ø¨ÙŠ Ù‡Ø§Ø±Øª â¤ï¸</h3>
                <div class="flappy-score-board">
                    <span>Ø³ÙƒÙˆØ±: <span id="flappy-score">0</span></span>
                    <span>Ø£Ø¹Ù„Ù‰: <span id="flappy-high">0</span></span>
                </div>
                <div style="position:relative;">
                    <canvas id="flappy-canvas" width="280" height="350"></canvas>
                    <div id="flappy-end-msg" class="flappy-msg-box"></div>
                </div>
                <div id="flappy-start-hint" style="margin-top:10px; font-weight:bold; color:var(--primary-color);">Ø¯ÙˆØ³ÙŠ Ø¹Ø´Ø§Ù† ØªØ·ÙŠØ± ğŸ¦…</div>
                <button onclick="startFlappy()" style="background:#4CAF50; margin-top:5px;" id="flappy-start-btn">Ø§Ø¨Ø¯Ø£</button>
                <button class="back-btn" onclick="showGame('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            </div>

            <div id="collect-game" class="game-wrapper">
                <h3>ØªØ¹Ø§Ù„ÙŠ Ù†Ø¬Ù…Ø¹ Ø§Ù„Ù‚Ù„ÙˆØ¨ â¤ï¸</h3>
                <div style="display:flex; justify-content:space-between; width:100%; padding:0 5px; font-weight:bold; font-size:14px; margin-bottom:10px;">
                    <span>Ø³ÙƒÙˆØ±: <span id="score">0</span></span>
                    <span>Ø£Ø¹Ù„Ù‰: <span id="high-score" style="color:#2196F3;">0</span></span>
                    <span>ÙˆÙ‚Øª: <span id="game-timer" style="color:red;">30</span></span>
                </div>
                <div class="game-area" id="game-area">
                    <div class="game-over-msg" id="game-over-msg"></div>
                    <div style="position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); color:#999;" id="start-hint">Ø¯ÙˆØ³ÙŠ Ø§Ø¨Ø¯Ø£ â¬‡ï¸</div>
                </div>
                <button onclick="startGame()" style="background:#4CAF50;" id="start-game-btn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨ ğŸ®</button>
                <button class="back-btn" onclick="showGame('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            </div>

            <div id="puzzle-game" class="game-wrapper">
                <h3>Ø¨Ø§Ø²Ù„ ğŸ§©</h3>
                <div class="level-btns">
                    <button class="level-btn active" id="lvl-1" onclick="setLevel(1)">Level 1</button>
                    <button class="level-btn" id="lvl-2" onclick="setLevel(2)">Level 2</button>
                    <button class="level-btn" id="lvl-3" onclick="setLevel(3)">Level 3</button>
                </div>
                <div class="puzzle-stats">
                    <span id="puzzle-timer" class="puzzle-timer-val">Ø§Ù„ÙˆÙ‚Øª: 0 Ø«</span>
                    <span id="puzzle-best" class="puzzle-best-val">Ø£ÙØ¶Ù„: --</span>
                </div>
                <div class="puzzle-container" id="puzzle-container"></div>
                <div class="puzzle-msg" id="puzzle-msg"></div>
                <button onclick="startPuzzle()" style="background:#4CAF50; margin-top:10px;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨Ø§Ø²Ù„</button>
                <button class="back-btn" onclick="showGame('menu')">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
            </div>

            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
        </div>

        <div id="new-msg-section" class="hidden">
            <h2>Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ© Ù„ÙŠÙƒÙŠ â¤ï¸</h2>
            <img src="https://i.pinimg.com/originals/15/3c/59/153c59185cc57bf81b69c4a0e692eaae.gif" class="msg-gif" alt="Cute Bear">
            <div class="special-msg-box">Ø¨ØµØ±Ø§Ø­Ù‡ ÙƒØ¯Ø§ ÙŠ Ù…ÙŠÙ…Ùˆ .. <br> Ø§Ù†Ø§ Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠ Ø§ÙˆÙŠ Ø§ÙˆÙŠ ÙÙˆÙ‚ Ù…Ù†ØªÙŠ ØªØªØ®ÙŠÙ„ÙŠ ÙˆØ¨ØªÙˆØ­Ø´ÙŠÙ†ÙŠ Ø¨Ø·Ø±ÙŠÙ‚Ù‡ ÙØ¸ÙŠØ¹Ù‡ Ø¨Ø¨Ù‚ÙŠ ØªØ§ÙŠÙ‡ ÙˆÙˆØ­Ø´ Ù…Ù† ØºÙŠØ±Ùƒ ÙˆØ¬ÙˆØ¯Ùƒ Ù†Ø¹Ù…Ù‡ ÙØ­ÙŠØ§ØªÙŠ ÙŠØ¨Ø®ØªÙŠ Ø¨ÙŠÙƒÙŠ ÙˆÙŠØ¨Ø®Øª Ø¹ÙŠØ§Ù„Ù†Ø§ Ø¨ÙŠ Ù…Ø§Ù…ÙŠ Ø¹Ø¸ÙŠÙ…Ù‡ Ø§Ø³Ù…Ù‡Ø§ Ù…ÙŠÙ…Ùˆ
Ø¨Ø¬Ø¯ Ø§Ù†ØªÙŠ Ø¹Ø³Ù„ Ø§ÙˆÙŠ ÙˆÙ…Ù„Ø§Ù…Ø­Ùƒ ØªØ­ÙÙ‡ Ø§ÙˆÙŠ Ø¨Ø¬Ø¯ ÙˆØ¹ÙŠÙˆÙ†Ùƒ Ù…Ø§Ø´Ø§Ø¡Ø§Ù„Ù„Ù‡ Ø§Ù†ØªÙŠ ÙƒÙ„Ùƒ Ø¹ Ø¨Ø¹Ø¶ Ù…Ø§Ø´Ø§Ø¡Ø§Ù„Ù„Ù‡ ÙŠ Ø±ÙˆØ­ÙŠ ÙˆØ§Ù„Ù„Ù‡ ÙŠØ§ Ù…ÙŠÙ…Ùˆ Ø±Ø¨Ù†Ø§ Ø¹Ø§Ù„Ù… Ø¨Ù†ÙŠØªÙŠ Ø§ØªØ¬Ø§Ù‡Ùƒ ÙˆØ§Ù†ÙŠ Ø¨ØªÙ…Ù†Ø§Ù„Ùƒ Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù†ÙŠ Ù…Ø´ Ø¨Ø¨Ù‚ÙŠ Ø¨Ø®ÙŠØ± Ø·ÙˆÙ„ Ù…Ø§ ÙÙŠÙƒÙŠ Ø­Ø§Ø¬Ù‡ ÙˆÙ„Ø§ Ø¨ÙŠÙ‡Ø¯Ø§Ù„ÙŠ Ø¨Ø§Ù„ Ø¹Ù…Ø± Ù…Ø§ Ø²Ø¹Ù„Ùƒ ÙƒØ§Ù† Ù‚Ù„ÙŠÙ„ Ø¹Ù†Ø¯ÙŠ Ù†ÙØ³ÙŠ Ø§Ø®Ø¯ Ù…Ù†Ùƒ ÙƒÙ„ Ø­Ø§Ø¬Ù‡ Ù…Ø¯ÙŠÙ‚Ø§ÙƒÙŠ ÙˆØ´ÙŠÙ„Ù‡Ø§ Ø§Ù†Ø§ Ø§Ù†ØªÙŠ Ø§Ù„Ø­Ø§Ø¬Ù‡ Ø§Ù„ÙˆØ­ÙŠØ¯Ù‡ Ø§Ù„ÙŠ Ø¹Ø§ÙˆØ² Ø§Ø´ÙŠÙ„ Ø¹Ù†Ù‡Ø§ ÙƒÙ„ Ø­Ø§Ø¬Ù‡
Ø¹Ù…Ø±Ùƒ Ù…ÙƒÙ†ØªÙŠ ØªÙ‚ÙŠÙ„Ù‡ Ø¹Ù„ÙŠØ§ Ø§Ø¨Ø¯Ø§ Ø¨ØµÙŠ ØªØ§Ø¹Ù„ÙŠÙ„ÙŠ Ø¯ÙŠÙ…Ø§ ØªØ­Øª Ø§ÙŠ Ø¸Ø±Ù Ø§Ù†Ø§ ÙÙŠÙ‡ 
Ø¹Ù…Ø±ÙŠ Ù…Ù‡ØªØ¯Ø§ÙŠÙ‚ Ø§Ù†Ùƒ Ø¬ÙŠØ§Ù„ÙŠ Ø¨Ø§Ù„Ø¹ÙƒØ³ Ø§Ù†Ø§ Ù‡Ø¨Ù‚ÙŠ ÙØ±Ø­Ø§Ù† Ø§ÙˆÙŠ Ø§Ù†Ùƒ Ù…Ø®ØªØ±Ø§Ù†ÙŠ Ø¯ÙŠÙ…Ø§ Ø§Ù†ØªÙŠ ØºØ§Ù„ÙŠÙ‡ Ø¹Ù†Ø¯ÙŠ Ø§ÙˆÙŠ Ø±Ø¨Ù†Ø§ ÙŠØ®Ù„ÙŠÙƒÙŠ Ù„ÙŠØ§ ÙŠØ§Ø±Ø¨ ÙŠ Ù…ÙŠÙ…Ùˆ ÙˆÙ…Ø´ÙˆÙØ´ ÙÙŠÙƒÙŠ ÙˆØ­Ø´ ÙˆØ¯ÙŠÙ…Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ Ø§Ù„Ø¹Ù…Ø± ÙƒÙ„Ùˆ ÙˆÙ†ÙØ¶Ù„ Ù†Ø±Ø®Ù… Ø¹Ù„ÙŠ Ø¨Ø¹Ø¶ ÙƒØ¯Ø§ ÙˆÙ†Ù†ÙƒØ´ ÙØ¨Ø¹Ø¶ ÙˆÙ†ÙØ¶Ù„ ÙƒØ±ÙŠØ²ÙŠ ÙƒØ¯Ø§
ğŸ˜‚ğŸ©· Ø¹Ø§ÙˆØ²Ùƒ ØªØ¨Ù‚ÙŠ Ø¹Ø§Ø±ÙÙ‡ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø§Ù†ÙŠ Ø¯ÙŠÙ…Ø§ Ù‡ØªÙ„Ø§Ù‚ÙŠÙ†ÙŠ ÙØ¶Ù‡Ø±Ùƒ ÙˆØ¬Ù…Ø¨Ùƒ ÙˆØ¹Ù…Ø±ÙŠ Ù…Ø§ Ù‡Ø³ÙŠØ¨Ùƒ ÙˆÙ„Ø§ Ù‡Ù…Ù„ ÙˆÙ„Ø§ Ù‡Ø²Ù‡Ù‚ ÙˆÙ„Ø§ Ù‡ØªØºÙŠØ± Ø¹Ù„ÙŠÙƒÙŠ Ø§Ø¨Ù‚ÙŠÙ„ÙŠ Ø§Ù†ØªÙŠ Ø¨Ø³ ÙˆØ¨Ù†Ø§Ù‚Øµ Ø§Ù„Ø¹Ø§Ù„Ù… Ø¯Ø§ ÙƒÙ„ÙˆØŒ Ø¹Ø§ÙˆØ²Ùƒ ÙƒØ¯Ø§ Ù…Ø¹Ø§ÙŠØ§ Ù…Ø´ÙˆØ§Ø± Ù‡ÙŠÙƒÙ„ÙÙ†Ø§ Ø§Ù„Ø¹Ù…Ø± ÙƒÙ„Ùˆ ÙˆØ§Ù†Ø§ Ù…Ø´ Ø¹Ø§ÙˆØ² Ø§Ù„Ù…Ø´ÙˆØ§Ø± Ø¯Ø§ ØºÙŠØ± Ù…Ø¹Ø§ÙƒÙŠ ÙŠ Ù…ÙŠÙ…Ùˆ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠØŒ Ø¯ÙŠÙ…Ø§ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø§Ø¬Ø±ÙŠ Ø¹Ù„ÙŠ Ø­Ø¶Ù†ÙŠ Ù‡ØªÙ„Ø§Ù‚ÙŠÙ‡ Ø¯ÙŠÙ…Ø§ Ù…ÙØªÙˆØ­Ù„Ùƒ
Ø§Ø·Ù…Ù†ÙŠ Ø§Ù†ØªÙŠ Ø¨Ø³ Ø§Ù†Ø§ Ù…ÙˆØ¬ÙˆØ¯ 
Ø§Ù†Ø§ Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠ ÙÙˆÙ‚ Ù…Ù†ØªÙŠ ØªØªØ®ÙŠÙ„ÙŠ
Ø¹Ø§ÙˆØ²Ùƒ ØªØ¨Ù‚ÙŠ Ø¹Ø§Ø±ÙÙ‡ Ø§Ù†ÙŠ Ø¯ÙŠÙ…Ø§ Ù‡Ø¨Ù‚ÙŠ Ù…Ø¨Ø³ÙˆØ· Ø¨ÙŠÙƒÙŠ ÙˆÙ…Ø¨Ø³ÙˆØ· Ø¨ Ø§ÙŠ Ø§Ù†Ø¬Ø§Ø² Ø¨ØªØ¹Ù„Ù…ÙŠÙ‡ ÙˆÙ‡ØªØ¹Ù…Ù„ÙŠÙ‡ ÙˆÙ‡ÙØ¶Ù„ ÙØ®ÙˆØ± Ø¨ÙŠÙƒÙŠ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ÙˆÙ…ØªÙ‚Ù„ÙŠØ´ Ù‡ØªÙ„Ø§Ù‚ÙŠÙ†ÙŠ ÙØ¶Ù‡Ø±Ùƒ Ø¨Ø´Ø¬Ø¹Ùƒ ÙˆØ§Ø¨Ù‚ÙŠ Ø³Ø¨ÙˆØ±Øª Ù„ÙŠÙƒÙŠ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø§Ù†ØªÙŠ ØªØ³ØªØ§Ù‡Ù„ÙŠ ÙƒÙ„ Ø®ÙŠØ± ÙŠØ§ Ø®ÙŠØ±ÙŠ
ÙŠØ§Ø±Ø¨ Ø¯ÙŠÙ…Ø§ Ø§Ø´ÙˆÙÙƒ Ù…Ø¨Ø³ÙˆØ·Ù‡ ÙˆØ¨Ø®ÙŠØ± 
Ø¨Øª Ø§ÙˆØ¹ÙŠ ÙŠØ´ØºÙ„Ùƒ Ø­Ø§Ø¬Ù‡ Ø­Ù…ÙˆØ¯Ùƒ Ù…ÙˆØ¬ÙˆØ¯ ÙˆÙ‡ÙŠØªØµØ±Ù ÙˆÙŠØ­Ù„Ù„Ùƒ ÙƒÙ„ Ø­Ø§Ø¬Ù‡
Ø§Ù† Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ù†ÙƒÙˆÙ† ÙØ¨ÙŠØªÙ†Ø§ ÙÙˆÙ‚Øª Ù‚Ø±ÙŠØ¨ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ
Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠÙŠÙŠÙŠ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ
Ø­Ù…ÙˆØ¯ÙƒğŸ¡ğŸ«‚ğŸ©·         .</div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="message-section" class="hidden">
            <h2>â¤ï¸</h2>
            <div class="info-box" id="typewriter-text" style="min-height: 180px; display: flex; align-items: center; text-align: center;"></div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="flower-section" class="hidden">
            <h2>  Ø§Ø­Ù„ÙŠ ÙˆØ±Ø¯ ÙŠØ±ÙˆØ­ÙŠ ğŸŒ¸</h2>
            <img src="https://clipart-library.com/image_gallery/n1253055.gif" class="flower-img" alt="Flowers">
            <div class="info-box">     Ø§Ù„ÙˆØ±Ø¯ Ù„Ù„ÙˆØ±Ø¯ Ø¨Ø±Ø¶Ùˆ ğŸ’•</div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="open-when-section" class="hidden">
            <h2>Ø§ÙØªØ­ÙŠÙ‡Ø§ Ù„Ù…Ø§.. ğŸ’Œ</h2>
            <div class="grid-menu">
                <button class="mood-btn" onclick="showMood('sad')">ØªÙƒÙˆÙ†ÙŠ Ø²Ø¹Ù„Ø§Ù†Ø©</button>
                <button class="mood-btn" onclick="showMood('happy')">ØªÙƒÙˆÙ†ÙŠ ÙØ±Ø­Ø§Ù†Ø©</button>
                <button class="mood-btn" onclick="showMood('miss')">Ø£ÙˆØ­Ø´Ùƒ</button>
                <button class="mood-btn" onclick="showMood('mad')">Ù…ØªØ¹ØµØ¨Ø©</button>
            </div>
            <div class="info-box" id="mood-text" style="display:none;"></div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="jar-section" class="hidden">
            <h2>Ø¨Ø±Ø·Ù…Ø§Ù† Ø§Ù„Ø³Ø¹Ø§Ø¯Ø© ğŸ¯</h2>
            <div class="info-box" id="jar-text">Ø¯ÙˆØ³ÙŠ ÙˆØ§Ø³Ø­Ø¨ÙŠ ÙˆØ±Ù‚Ø© ğŸ˜‰</div>
            <button onclick="pullPaper()" style="background: linear-gradient(135deg, #a18cd1, #fbc2eb);">Ø§Ø³Ø­Ø¨ÙŠ ÙˆØ±Ù‚Ø© ğŸ°</button>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="voice-section" class="hidden">
            <h2>Ø§Ø³Ù…Ø¹ÙŠÙ†ÙŠ â¤ï¸</h2>
            <div class="info-box" style="display:flex; flex-direction:column; align-items:center;">
                <p>Ø§Ø­Ù… Ø§Ø­Ù…  ..</p>
                <button onclick="playVoice()" style="width:60px; height:60px; border-radius:50%; font-size:24px; display:flex; align-items:center; justify-content:center;">â–¶ï¸</button>
            </div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="video-section" class="hidden">
            <h2>Love u memoooz â¤ï¸</h2>
            <iframe src="" allow="autoplay" allowfullscreen></iframe>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="wheel-section" class="hidden">
            <h2>Ù†Ø¹Ù…Ù„ Ø¥ÙŠÙ‡ØŸ ğŸ¤”</h2>
            <div class="info-box" id="wheel-result" style="font-size:20px; font-weight:bold;">Ø¯ÙˆØ³ÙŠ Ø¹Ø´Ø§Ù† Ù†Ø®ØªØ§Ø± ğŸ‘‡</div>
            <button onclick="spinWheel()" style="background:#FF9800;">Ù„ÙÙŠ Ø§Ù„Ø¹Ø¬Ù„Ø© ğŸ¡</button>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="love-meter-section" class="hidden">
            <h2>Ø­Ø·ÙŠ ØµØ¨Ø§Ø¹Ùƒ Ù‡Ù†Ø§ ğŸ‘‡</h2>
            <div class="fingerprint" id="fingerprint" onmousedown="startScan()" ontouchstart="startScan()" onmouseup="endScan()" ontouchend="endScan()">
                <svg width="70" height="70" fill="currentColor" viewBox="0 0 24 24"><path d="M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5s.5.22.5.5c0 1.41.73 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.39-.47.39z"/></svg>
            </div>
            <div class="love-result" id="love-result"></div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

        <div id="promises-section" class="hidden">
            <h2>Ø¨ÙˆØ¹Ø¯Ùƒ ğŸ’</h2>
            <div id="promise-card-container" class="flashcard-container">
                <div id="flashcard" class="flashcard">
                    1. Ø£ÙˆØ¹Ø¯Ùƒ Ø§Ù†ÙŠ Ù‡ÙØ¶Ù„ Ø§Ø­Ø¨Ùƒ Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…Ø± â¤ï¸
                </div>
            </div>
            <div class="promise-controls" style="margin-bottom: 20px;">
                <button onclick="nextPromise()" style="background:#4CAF50;">Ø§Ù„ÙˆØ¹Ø¯ Ø§Ù„Ù„ÙŠ Ø¨Ø¹Ø¯Ù‡ â¡ï¸</button>
            </div>
            <button class="back-btn" onclick="showSection('main-menu')">Ø±Ø¬ÙˆØ¹</button>
        </div>

    </div>

    <script>
        // === Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØºØ§Ù†ÙŠ - ØªØ£ÙƒØ¯ÙŠ Ø£Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ===
        const playlist = ["song1.mp3", "song2.mp3", "song3.mp3"];
        // === ØµÙˆØ± Ø§Ù„Ø¨Ø§Ø²Ù„ - ØªØ£ÙƒØ¯ÙŠ Ø£Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ===
        const puzzleImages = {
            1: "puzzle1.jpg",
            2: "puzzle2.jpg",
            3: "puzzle3.jpg"
        };
        let currentPuzzleLevel = 1;

        const jarMessages = ["Ø¨Ø­Ø¨Ùƒ Ø²ÙŠ Ù…Ù†ØªÙŠ Ø´ÙŠÙØ§Ù†ÙŠ ÙØ¹ÙŠÙ†Ùƒ  ", "Ø§Ù†ØªÙŠ Ø£Ø­Ù„Ù‰ Ø­Ø§Ø¬Ø© Ø­ØµÙ„ØªÙ„ÙŠ ÙÙŠ  Ø­ÙŠØ§ØªÙŠ â¤ï¸", "Ø¶Ø­ÙƒØªÙƒ Ø¨ØªÙ†ÙˆØ± ÙŠÙˆÙ…ÙŠ âœ¨", "Ø±Ø¨Ù†Ø§ ÙŠØ®Ù„ÙŠÙƒÙŠ Ù„ÙŠØ§ ÙŠØ§Ø±Ø¨ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ", "ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ø§ÙˆÙŠ ÙŠ Ù…ÙŠÙ…Ùˆ ÙÙˆÙ‚ Ù…Ù†ØªÙŠ ØªØªØ®ÙŠÙ„ÙŠ ğŸ˜‰", "Ø§Ù†ØªÙŠ Ø±Ø²Ù‚ Ù…Ù† Ø±Ø¨Ù†Ø§ Ù„ÙŠØ§ ÙŠ Ù…ÙŠÙ…Ùˆ", "ØºÙ…Ø¶ÙŠ Ø¹ÙŠÙ†Ùƒ ÙˆØ§ØªÙ…Ù†ÙŠ Ø£Ù…Ù†ÙŠØ©!"];
        const openWhenMsgs = { sad: "Ù…ØªØ²Ø¹Ù„ÙŠØ´ ÙŠØ§ Ø±ÙˆØ­ Ù‚Ù„Ø¨ÙŠ.. ØªØ¹Ø§Ù„ÙŠ ÙØ­Ø¶Ù†ÙŠ ÙˆÙƒÙ„ Ø­Ø§Ø¬Ù‡ Ù‡ØªØ¨Ù‚ÙŠ ØªÙ…Ø§Ù…   â¤ï¸", happy: "ÙŠØ§Ø±Ø¨ Ø¯Ø§ÙŠÙ…Ø§Ù‹ ÙØ±Ø­Ø§Ù†Ø© ÙŠØ§ Ø£Ù…ÙŠØ±ØªÙŠ ğŸ‘‘", miss: "ÙˆØ§Ù†ØªÙŠ ÙƒÙ…Ø§Ù† ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ø£ÙˆÙŠ Ø£ÙˆÙŠ ÙŠ Ù…ÙŠÙ…Ùˆ ÙÙˆÙ‚ Ù…Ù†ØªÙŠ ØªØªØ®ÙŠÙ„ÙŠ ğŸ¥º", mad: "Ø®Ù„Ø§Øµ Ø¨Ù‚Ù‰ ÙÙƒÙŠ Ø§Ù„ØªÙƒØ´ÙŠØ±Ø© Ø¯ÙŠ ğŸ˜‰ Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠ ÙŠÙˆÙ‡!" };
        const wheelOptions = ["Ù†Ø§ÙƒÙ„ Ø´Ø§ÙˆØ±Ù…Ø§ ğŸŒ¯", "Ù†ØªÙ…Ø´Ù‰ Ø¹ Ø§Ù„Ø¨Ø­Ø± ğŸŒŠ", "Ù†ØªÙØ±Ø¬ Ø¹Ù„Ù‰ ÙÙŠÙ„Ù… ğŸ¬", "Ù†Ø§ÙƒÙ„ Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… ğŸ¦", "Ù†Ø´Ø±Ø¨ Ù‡ÙˆØª Ø´ÙˆÙƒÙ„Øª â˜•"];
        const msg1 = "Ø§ÙŠ ÙŠ Ù…ÙŠÙ…Ùˆ Ø¹Ø§Ù…Ù„Ù‡ Ø§ÙŠ Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ Ù…Ù† ÙƒÙ„ Ø­Ø§Ø¬Ù‡ Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ Ù…Ù†ÙŠ ÙˆÙ…Ù† ÙƒÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ùˆ Ø§Ù„Ù…Ø¯Ø§ÙŠÙ‚Ø§Øª Ø§Ø³ÙÙ„Ùƒ Ù†ÙŠØ§Ø¨ØªØ§ Ø¹Ù† Ø§ÙŠ Ø­Ø§Ø¬Ù‡ Ø®Ù„ÙŠÙƒÙŠ ÙØ§ÙƒØ±Ù‡ Ø§Ù†ÙŠ Ø¬Ù…Ø¨Ùƒ Ø§Ù†Ø§ Ø§Ù‡ ÙˆÙ‚Ø¹Øª ÙˆÙ‚Ø¹Ù‡ Ù‡Ù‚ÙˆÙ… Ù…Ù†Ù‡Ø§ ÙˆØºÙŠØ± ÙƒÙ„ Ø­Ø§Ø¬Ù‡ ÙˆØ§Ø¹ØªØ¨Ø±ÙŠÙ‡ Ø­ØµÙ„ Ø§Ù†Ø§ Ø¹Ø§ÙˆØ² Ø§ÙƒÙˆÙ† Ø§Ø­Ø³Ù† Ø¹Ø´Ø§Ù†Ùƒ Ø§Ù†ØªÙŠ ØªØ³ØªØ§Ù‡Ù„ÙŠ ÙƒÙ„ Ø®ÙŠØ± Ø§Ù†Ø§ Ù„Ø§ Ù‡Ø¨Ø¹Ø¯ ÙˆÙ„Ø§ Ù‡ØªØºÙŠØ± ÙˆÙ„Ø§ Ù‡Ø²Ù‡Ù‚ ÙˆÙ‡Ø¨Ù‚ÙŠ Ø¨ØµÙˆØ±Ù‡ Ø§Ø­Ø³Ù† Ù…Ù† Ø§Ù„ÙŠ Ø´ÙŠÙØ§Ù‡Ø§ Ø§Ù†Ø§ Ø¨Ø­Ø¨Ùƒ Ø§ÙØªÙƒØ±ÙŠ Ø¨Ø³ Ø§Ù†ÙŠ Ø¬Ù…Ø¨Ùƒ ÙˆÙ‡ÙØ¶Ù„ Ø³Ø¨ÙˆØ±Øª Ù„ÙŠÙƒÙŠ ÙˆÙØªØ®Ø± Ø¨ÙŠÙƒÙŠ Ø¯ÙŠÙ…Ø§ Ø±Ø¨Ù†Ø§ ÙŠØ§Ø±Ø¨ ÙŠØ³Ø¹Ø¯Ùƒ ÙˆÙŠØ³Ø¹Ø¯Ù†Ø§ ÙˆØ´ÙˆÙÙƒ Ø¨Ø®ÙŠØ± Ø¯ÙŠÙ…Ø§";

        let currentSongIndex = 0; let isMusicPlaying = false;
        let jarTimeout, moodTimeout, scanTimer, typingTimeout;
        let score = 0, gameInterval, timerInterval, timeLeft = 30;
        let highScore = localStorage.getItem('memoHighScore') || 0;
        let visaBalance = 4000000;
        
        const audioPlayer = document.getElementById("bg-music");
        const voicePlayer = document.getElementById("voice-note");

        function playMusic() { if (!audioPlayer.src || audioPlayer.src === window.location.href) audioPlayer.src = playlist[currentSongIndex]; audioPlayer.play().then(() => { isMusicPlaying = true; updateSongName(); }).catch(e => console.log(e)); audioPlayer.onended = nextSong; }
        function toggleMusic() { if (audioPlayer.paused) { audioPlayer.play(); isMusicPlaying = true; } else { audioPlayer.pause(); isMusicPlaying = false; } }
        function nextSong() { currentSongIndex = (currentSongIndex + 1) % playlist.length; audioPlayer.src = playlist[currentSongIndex]; audioPlayer.play(); isMusicPlaying = true; updateSongName(); }
        function updateSongName() { document.getElementById("current-song-name").innerText = "Ø£ØºÙ†ÙŠØ© " + (currentSongIndex + 1) + " ğŸµ"; }
        function playVoice() { audioPlayer.pause(); voicePlayer.currentTime = 0; voicePlayer.play(); voicePlayer.onended = function() { voicePlayer.pause(); voicePlayer.currentTime = 0; if(isMusicPlaying) audioPlayer.play(); }; }

        function checkPassword() {
            if (document.getElementById("password").value === "040913") {
                document.getElementById("login-screen").classList.add("hidden"); 
                document.getElementById("main-menu").classList.remove("hidden");
                document.getElementById("chat-icon").classList.remove("hidden");
                resetAnimation('main-menu'); startRain(); startTimer(); playMusic();
                updateGreeting();
                setTimeout(() => { showNotification("Ø¨Ø­Ø¨Ùƒ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙŠØ§ Ø±ÙˆØ­ Ù‚Ù„Ø¨ÙŠ â¤ï¸"); }, 5000);
                setTimeout(() => { showNotification("ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ø§ÙˆÙŠ Ø¹ ÙÙƒØ±Ù‡ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ğŸ¥º"); }, 15000);
                loadChat(); // Load chat history on login
            } else {
                const err = document.getElementById("error"); err.style.display = "block"; 
                document.getElementById("main-container").classList.add("shake"); setTimeout(() => document.getElementById("main-container").classList.remove("shake"), 500);
            }
        }

        function updateGreeting() {
            const h = new Date().getHours(); const t = document.getElementById("greeting-msg");
            if (h < 12 && h > 4) t.innerText = "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ÙŠØ§ Ù…ÙŠÙ…Ùˆ â˜€ï¸"; else if (h >= 12 && h < 18) t.innerText = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø¬Ù…Ø§Ù„ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ğŸŒ¸"; else t.innerText = "ØªØµØ¨Ø­ÙŠ Ø¹ Ø®ÙŠØ± ÙŠØ§ Ø±ÙˆØ­ÙŠ ğŸŒ™";
        }

        function showNotification(text) {
            const notif = document.getElementById('fake-notif');
            document.getElementById('notif-message').innerText = text;
            notif.style.top = "20px"; setTimeout(() => { notif.style.top = "-100px"; }, 4000);
        }

        function sendFadfadaEmail() {
            var txt = document.getElementById('fadfada-text').value;
            if(txt.trim() === "") { alert("Ø§ÙƒØªØ¨ÙŠ Ø­Ø§Ø¬Ø© Ø§Ù„Ø£ÙˆÙ„ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ğŸ˜‰"); return; }
            // âš ï¸ Ø­Ø· Ø¥ÙŠÙ…ÙŠÙ„Ùƒ Ù‡Ù†Ø§ âš ï¸
            var myEmail = "m0hamedelsayed1199e@icloud.com"; 
            var subject = "ÙØ¶ÙØ¶Ø© Ù…Ù† Ù…ÙŠÙ…Ùˆ â¤ï¸";
            var body = encodeURIComponent(txt);
            window.location.href = "mailto:" + myEmail + "?subject=" + subject + "&body=" + body;
            setTimeout(() => { document.getElementById('fadfada-text').value = ""; }, 2000);
        }

        function pullPaper() {
            const text = document.getElementById("jar-text"); const defaultMsg = "Ø¯ÙˆØ³ÙŠ ÙˆØ§Ø³Ø­Ø¨ÙŠ ÙˆØ±Ù‚Ø© ğŸ˜‰";
            if (jarTimeout) clearTimeout(jarTimeout);
            text.innerHTML = jarMessages[Math.floor(Math.random() * jarMessages.length)];
            text.style.animation = 'none'; text.offsetHeight; text.style.animation = 'fadeInSmooth 0.5s ease';
            jarTimeout = setTimeout(() => { text.style.opacity = "0"; setTimeout(() => { text.innerHTML = defaultMsg; text.style.opacity = "1"; }, 500); }, 5000);
        }

        function showMood(mood) {
            const textBox = document.getElementById("mood-text");
            if (moodTimeout) clearTimeout(moodTimeout);
            textBox.style.display = "flex"; textBox.style.opacity = "1"; textBox.innerHTML = openWhenMsgs[mood];
            textBox.style.animation = 'none'; textBox.offsetHeight; textBox.style.animation = 'fadeInSmooth 0.5s ease';
            moodTimeout = setTimeout(() => { textBox.style.opacity = "0"; setTimeout(() => { textBox.style.display = "none"; textBox.innerHTML = ""; }, 500); }, 10000);
        }

        function spinWheel() {
            const res = document.getElementById("wheel-result"); let count = 0;
            const interval = setInterval(() => { res.innerText = wheelOptions[Math.floor(Math.random() * wheelOptions.length)]; count++; if(count > 10) { clearInterval(interval); res.style.color = "#ff3366"; } }, 100);
        }

        function startScan() {
            const fp = document.getElementById("fingerprint"); const res = document.getElementById("love-result");
            fp.classList.add("active"); res.style.display = "none";
            scanTimer = setTimeout(() => { res.innerText = "Ù†Ø³Ø¨Ø© Ø­Ø¨Ùƒ Ù„Ø­Ù…ÙˆØ¯ÙŠ: 1000% â¤ï¸ğŸ”¥"; res.style.display = "block"; fp.classList.remove("active"); }, 2000);
        }
        function endScan() { clearTimeout(scanTimer); document.getElementById("fingerprint").classList.remove("active"); }

        function withdrawMoney() {
            if(visaBalance >= 10000) {
                visaBalance -= 10000;
                document.getElementById('card-balance-txt').innerText = "$" + visaBalance.toLocaleString();
                const cashAudio = document.getElementById("cash-sound");
                if (cashAudio) { cashAudio.currentTime = 0; cashAudio.play(); }
            } else { alert("Ø®Ù„ØµØªÙŠÙ‡Ù… Ø¹ÙŠÙˆÙ†ÙŠ ÙŠØ±ÙˆØ­ÙŠ Ø±Ù†ÙŠ Ø¹Ù„ÙŠØ§ Ø§Ø­ÙˆÙ„Ùƒ ØºÙŠØ±Ù‡Ù… ÙŠØ§ ÙƒÙˆØªÙŠ   "); }
        }

        // --- Weather Logic Updated (Real API with Fallback) ---
        async function checkWeather() {
            const iconElem = document.getElementById('weather-icon');
            const tempElem = document.getElementById('weather-temp');
            const msgElem = document.getElementById('weather-msg');

            msgElem.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…ÙƒØ§Ù†Ùƒ ÙŠØ§ Ù…ÙŠÙ…Ùˆ... ğŸŒ";

            try {
                // 1. Get Location from IP (Free service)
                const geoRes = await fetch('https://get.geojs.io/v1/ip/geo.json');
                if (!geoRes.ok) throw new Error("Geo failed");
                const geoData = await geoRes.json();
                const lat = geoData.latitude;
                const lon = geoData.longitude;
                const city = geoData.city; 

                // 2. Get Weather Data (Open-Meteo - Free, No Key)
                const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                if (!weatherRes.ok) throw new Error("Weather failed");
                const weatherData = await weatherRes.json();
                
                const temp = weatherData.current_weather.temperature;
                const wCode = weatherData.current_weather.weathercode;
                const isDay = weatherData.current_weather.is_day; // 1 = day, 0 = night

                // 3. Update UI
                tempElem.innerHTML = `${temp}Â°C`;
                
                // Set Icon & Message based on code
                let icon = "â˜€ï¸";
                let msg = `Ø§Ù„Ø¬Ùˆ ÙÙŠ ${city} Ø¬Ù…ÙŠÙ„ Ø¹Ø´Ø§Ù† Ø§Ù†ØªÙŠ ÙÙŠÙ‡ ğŸ˜‰`;

                if (wCode === 0) {
                    icon = isDay ? "â˜€ï¸" : "ğŸŒ™";
                    msg = "Ø§Ù„Ø¬Ùˆ ØµØ§ÙÙŠ ÙˆØ±Ø§ÙŠÙ‚ Ø²ÙŠ Ù…Ø²Ø§Ø¬Ùƒ ÙŠØ§Ø±Ø¨ â¤ï¸";
                } else if (wCode >= 1 && wCode <= 3) {
                    icon = "â›…";
                    msg = "ØºÙŠÙˆÙ… Ø¨Ø³ÙŠØ·Ø©.. Ø§Ù„Ù…Ù‡Ù… Ø´Ù…Ø³Ùƒ Ø§Ù†ØªÙŠ Ù…Ù†ÙˆØ±Ø© Ø­ÙŠØ§ØªÙŠ â˜ï¸";
                } else if (wCode >= 45 && wCode <= 48) {
                    icon = "ğŸŒ«ï¸";
                    msg = "Ø§Ù„Ø¬Ùˆ Ø¶Ø¨Ø§Ø¨.. Ø®Ù„ÙŠ Ø¨Ø§Ù„Ùƒ ÙˆØ§Ù†ØªÙŠ Ù…Ø§Ø´ÙŠØ© ÙŠØ§ Ø±ÙˆØ­ÙŠ ğŸ”¦";
                } else if (wCode >= 51 && wCode <= 67) {
                    icon = "ğŸŒ§ï¸";
                    msg = "ÙÙŠ Ù…Ø·Ø±! Ø£Ù…Ø§Ù†Ø© ØªÙ„Ø¨Ø³ÙŠ ØªÙ‚ÙŠÙ„ ÙˆØªØªØ¯ÙÙŠ ÙƒÙˆÙŠØ³ ğŸ§¥â˜”";
                } else if (wCode >= 71 && wCode <= 77) {
                    icon = "â˜ƒï¸";
                    msg = "Ø§Ù„Ø¬Ùˆ ØªÙ„Ø¬ Ø­Ø±ÙÙŠØ§Ù‹ ğŸ¥¶.. Ø§Ø´Ø±Ø¨ÙŠ Ø­Ø§Ø¬Ø© Ø³Ø®Ù†Ø© ÙŠØ§ ÙƒÙˆØªÙŠ";
                } else if (wCode >= 95) {
                    icon = "â›ˆï¸";
                    msg = "Ø±Ø¹Ø¯ ÙˆØ¨Ø±Ù‚! Ù…ØªØ®Ø§ÙÙŠØ´ Ø£Ù†Ø§ Ø¬Ù…Ø¨Ùƒ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ğŸ«‚";
                }

                if(isDay === 0 && wCode <= 3) {
                    icon = "ğŸŒ™";
                    msg += "<br> ÙˆØªØµØ¨Ø­ÙŠ Ø¹Ù„Ù‰ Ø¬Ù†Ø© ÙŠØ§ Ù…Ù„Ø§ÙƒÙŠ ğŸ˜´";
                }

                iconElem.innerHTML = icon;
                msgElem.innerHTML = msg;

            } catch (error) {
                console.log("Weather Error, using fallback:", error);
                // If API fails, use the old logic (Constraint: Don't break old stuff)
                fallbackWeather();
            }
        }

        // The OLD logic preserved as fallback
        function fallbackWeather() {
             const date = new Date();
            const month = date.getMonth() + 1;
            const hour = date.getHours();
            
            let icon = "â˜€ï¸";
            let temp = "25Â°C";
            let msg = "Ø§Ù„Ø¬Ùˆ Ø¬Ù…ÙŠÙ„ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© Ø²ÙŠ Ø¹ÙŠÙˆÙ†Ùƒ ğŸ˜‰";

            // Logic based on Egypt's approximate weather
            if (month >= 11 || month <= 3) { // Winter
                icon = "ğŸŒ§ï¸";
                temp = "14Â°C";
                msg = "Ø§Ù„Ø¬Ùˆ ØªÙ„Ø¬ Ø£ÙˆÙŠ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© ÙŠØ§ Ù…ÙŠÙ…Ùˆ ğŸ¥¶.. Ø£Ù…Ø§Ù†Ø© Ø¹Ù„ÙŠÙƒÙŠ ØªÙ„Ø¨Ø³ÙŠ Ø§Ù„Ø¬Ø§ÙƒØª Ø§Ù„ØªÙ‚ÙŠÙ„ ÙˆØªØªØ¯ÙÙŠ ÙƒÙˆÙŠØ³ØŒ Ø£Ù†Ø§ Ø¨Ø®Ø§Ù Ø¹Ù„ÙŠÙƒÙŠ Ù…Ù† Ø§Ù„Ù‡ÙˆØ§!";
            } else if (month >= 6 && month <= 8) { // Summer
                icon = "â˜€ï¸";
                temp = "36Â°C";
                msg = "Ø§Ù„Ø¬Ùˆ Ø­Ø± Ù†Ø§Ø± ÙŠØ§ Ø±ÙˆØ­ÙŠ ğŸ¥µ.. Ø­Ø§ÙˆÙ„ÙŠ Ù…ØªÙ…Ø´ÙŠØ´ ÙÙŠ Ø§Ù„Ø´Ù…Ø³ ÙƒØªÙŠØ± ÙˆØ§Ø´Ø±Ø¨ÙŠ Ù…ÙŠÙ‡ ÙˆØ¹ØµÙŠØ± ÙƒØªÙŠØ± Ø¹Ø´Ø§Ù† Ù…ØªÙØ±Ù‡Ø¯ÙŠØ´.";
            } else { // Spring/Autumn
                icon = "ğŸŒ¸";
                temp = "22Â°C";
                msg = "Ø§Ù„Ø¬Ùˆ Ø±Ø¨ÙŠØ¹ ÙˆØ¬Ù…ÙŠÙ„ ÙŠØ§ Ù…ÙŠÙ…Ùˆ.. ÙŠØ§Ø±Ø¨ ÙŠÙˆÙ…Ùƒ ÙŠØ¨Ù‚Ù‰ Ø±Ø§ÙŠÙ‚ Ø²ÙŠÙƒ â¤ï¸";
            }

            if(hour >= 19 || hour <= 5) { // Night override
                icon = "ğŸŒ™";
                msg += "<br> ÙˆØªØµØ¨Ø­ÙŠ Ø¹Ù„Ù‰ Ø¬Ù†Ø© ÙŠØ§ Ù…Ù„Ø§ÙƒÙŠ ğŸ˜´";
            }

            document.getElementById('weather-icon').innerHTML = icon;
            document.getElementById('weather-temp').innerHTML = temp;
            document.getElementById('weather-msg').innerHTML = msg;
        }

        // --- Promise Flashcards Logic ---
        const promisesList = [
            "Ø£ÙˆØ¹Ø¯Ùƒ Ø§Ù†ÙŠ Ù‡ÙØ¶Ù„ Ø§Ø­Ø¨Ùƒ Ø·ÙˆÙ„ Ø§Ù„Ø¹Ù…Ø± â¤ï¸",
            "Ø£ÙˆØ¹Ø¯Ùƒ Ø§Ù†ÙŠ Ù‡ÙØ¶Ù„ Ø¬Ù…Ø¨Ùƒ Ù„Ø­Ø¯ Ø§Ø®Ø± ÙŠÙˆÙ… ÙÙŠ Ø¹Ù…Ø±ÙŠ ğŸ›¡ï¸",
            "Ø£ÙˆØ¹Ø¯Ùƒ Ø§Ù† Ø¹Ù…Ø±ÙŠ Ù…Ø§ Ù‡ØªØºÙŠØ± ÙˆÙ„Ø§ Ù‡Ù…Ù„ ÙˆÙ„Ø§ Ù‡Ø²Ù‡Ù‚ Ù…Ù†Ùƒ ÙˆÙ‡ØªÙØ¶Ù„ÙŠ Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø§Ù„Ø§ÙˆÙ„ Ùˆ Ø§Ù„Ø§Ø®ÙŠØ± ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ğŸ˜Š",
            "Ø£ÙˆØ¹Ø¯Ùƒ Ø£Ø³Ù…Ø¹Ùƒ Ø¯ÙŠÙ…Ø§ ÙˆÙ…Ø²Ù‡Ù‚Ø´ ÙˆÙ†Ù‚Ø¹Ø¯ Ù†ØªÙ†Ø§Ù‚Ø´ Ø¨Ù‡Ø¯ÙˆØ¡ ÙˆÙ†ØªÙŠ ÙØ­Ø¶Ù†ÙŠğŸ‘‚",
            "Ø£ÙˆØ¹Ø¯Ùƒ Ø§Ù†ÙŠ Ù‡ÙØ¶Ù„ Ø§ØºÙŠØ± Ù…Ù† Ù†ÙØ³ÙŠ Ø¹Ø´Ø§Ù†Ùƒ ÙˆØ¹Ø´Ø§Ù†Ø§ ğŸ˜Š"
        ];
        let promiseIdx = 0;

        function showPromises() {
            promiseIdx = 0;
            // Reset button visibility
            const btnContainer = document.querySelector('.promise-controls');
            if(btnContainer) btnContainer.style.display = 'block';
            
            // Force reset card state
            const card = document.getElementById('flashcard');
            if(card) {
                card.className = 'flashcard'; 
                void card.offsetWidth; 
                card.classList.add('in');
                card.innerHTML = promisesList[0];
            }
        }

        function updatePromiseCard() {
            const card = document.getElementById('flashcard');
            card.className = 'flashcard'; // Reset classes
            void card.offsetWidth; 
            card.classList.add('in');
            card.innerHTML = promisesList[promiseIdx];
        }

        function nextPromise() {
            const card = document.getElementById('flashcard');
            card.classList.remove('in');
            card.classList.add('out');
            
            setTimeout(() => {
                if (promiseIdx < promisesList.length - 1) {
                    promiseIdx++;
                    updatePromiseCard();
                } else {
                    card.classList.remove('out');
                    void card.offsetWidth;
                    card.classList.add('in');
                    // Requested Final Message
                    card.innerHTML = "Ø±Ø¨Ù†Ø§ ÙŠÙ‚Ø¯Ø±Ù†ÙŠ ÙˆØ£Ø³Ø¹Ø¯Ùƒ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ â¤ï¸";
                    document.querySelector('.promise-controls').style.display = 'none';
                    // Rain Hearts
                    for(let i=0; i<30; i++) {
                        setTimeout(() => {
                            const h = document.createElement("div");
                            h.classList.add("heart-rain");
                            h.innerHTML = Math.random() > 0.5 ? "ğŸ’" : "â¤ï¸";
                            h.style.left = Math.random() * 100 + "vw";
                            h.style.animationDuration = Math.random() * 2 + 2 + "s"; 
                            document.body.appendChild(h);
                            setTimeout(() => h.remove(), 4000);
                        }, i * 100);
                    }
                }
            }, 500); 
        }

        // --- Whack-A-Hamody Logic Updated ---
        let lastHole, whackTimeUp = false, whackScore = 0;
        let whackTimerInterval, whackGameInterval;

        function startWhackGame() {
            const grid = document.getElementById('whack-grid');
            grid.innerHTML = '';
            // Create holes
            for(let i=0; i<6; i++) {
                const hole = document.createElement('div');
                hole.className = 'whack-hole';
                const mole = document.createElement('div');
                mole.className = 'whack-mole';
                mole.innerHTML = 'ğŸ»'; // Ø¯Ø¨Ø¯ÙˆØ¨ Ø­Ù…ÙˆØ¯ÙŠ
                mole.onclick = (e) => whackHamody(e, mole, hole);
                hole.appendChild(mole);
                grid.appendChild(hole);
            }
            
            whackScore = 0;
            document.getElementById('whack-score').innerText = 0;
            document.getElementById('whack-time').innerText = 20;
            document.getElementById('whack-msg').style.display = 'none';
            whackTimeUp = false;
            
            // Start Timer
            let timeLeft = 20;
            whackTimerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById('whack-time').innerText = timeLeft;
                if(timeLeft <= 0) endWhackGame();
            }, 1000);
            
            // Pop up random mole
            whackGameInterval = setInterval(() => {
                if(!whackTimeUp) popRandomMole();
            }, 700);
        }

        function randomHole(holes) {
            const idx = Math.floor(Math.random() * holes.length);
            const hole = holes[idx];
            if(hole === lastHole) return randomHole(holes);
            lastHole = hole;
            return hole;
        }

        function popRandomMole() {
            const holes = document.querySelectorAll('.whack-hole');
            const hole = randomHole(holes);
            const mole = hole.querySelector('.whack-mole');
            mole.classList.add('up');
            mole.classList.remove('hit'); // Reset hit state
            hole.classList.remove('active-hit');
            mole.innerHTML = 'ğŸ»'; // Reset face
            setTimeout(() => {
                mole.classList.remove('up');
            }, 600);
        }

        function whackHamody(e, mole, hole) {
            if(!e.isTrusted || !mole.classList.contains('up')) return;
            whackScore++;
            mole.classList.remove('up');
            document.getElementById('whack-score').innerText = whackScore;
            
            // 1. Play Sound
            const audio = document.getElementById('punch-sound');
            if(audio) { audio.currentTime = 0; audio.play(); }

            // 2. Shake & Visuals
            mole.classList.add('hit');
            hole.classList.add('active-hit');
            mole.innerHTML = 'ğŸ˜µ'; // Dizzy face
            
            // Floating Text
            const phrases = ["Ø¢ÙŠ!", "Ø­Ø±Ù…Øª!", "Ø¨Ø­Ø¨Ùƒ!", "Ø¨Ø±Ø§Ø­Ø©!", "ÙŠØ§ Ù…ÙØªØ±ÙŠØ©!", "Ø®Ù„Ø§Øµ!", "Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§"];
            const txt = document.createElement('div');
            txt.className = 'floating-text';
            txt.innerText = phrases[Math.floor(Math.random() * phrases.length)];
            txt.style.left = (e.clientX - 20) + 'px';
            txt.style.top = (e.clientY - 40) + 'px';
            document.body.appendChild(txt);
            setTimeout(() => txt.remove(), 800);
        }

        function endWhackGame() {
            whackTimeUp = true;
            clearInterval(whackTimerInterval);
            clearInterval(whackGameInterval);
            const msgBox = document.getElementById('whack-msg');
            msgBox.innerHTML = `Ø¶Ø±Ø¨ØªÙŠÙ†ÙŠ ${whackScore} Ù…Ø±Ø©! ğŸ¤•<br>Ø®Ù„Ø§Øµ Ø£Ù†Ø§ Ø§Ø³ØªØ³Ù„Ù…Øª.. Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ ÙŠØ§ Ù…ÙŠÙ…Ùˆ â¤ï¸`;
            msgBox.style.display = 'block';
        }


        // --- Other Games Logic ---
        let userRpsScore = 0, compRpsScore = 0;
        function rpsPlay(choice) {
            const choices = ['rock', 'paper', 'scissors']; const compChoice = choices[Math.floor(Math.random() * 3)];
            let result = ""; let msg = "";
            if (choice === compChoice) { result = "ØªØ¹Ø§Ø¯Ù„! ğŸ˜"; } 
            else if ((choice === 'rock' && compChoice === 'scissors') || (choice === 'paper' && compChoice === 'rock') || (choice === 'scissors' && compChoice === 'paper')) { userRpsScore++; result = "ÙƒØ³Ø¨ØªÙŠ! ğŸ‰"; msg = "Ø´Ø§Ø·Ø±Ù‡ ÙŠØ§ Ø±ÙˆØ­ÙŠ"; } 
            else { compRpsScore++; result = "Ø®Ø³Ø±ØªÙŠ! ğŸ˜¢"; msg = "Ù…Ø¹Ù„Ø´ ÙŠ Ù…ÙŠÙ…Ùˆ Ù‡ØªÙƒØ³Ø¨ÙŠ Ø§Ù„Ù…Ø±Ù‡ Ø§Ù„Ø¬Ø§ÙŠÙ‡ Ø§Ù†ØªÙŠ Ø´Ø§Ø·Ø±Ù‡ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø±ÙƒØ²ÙŠ"; }
            document.getElementById('user-rps-score').innerText = userRpsScore; document.getElementById('comp-rps-score').innerText = compRpsScore; document.getElementById('rps-result').innerHTML = `${result}<br><span style="font-size:14px;color:#555;">${msg}</span>`;
        }

        let flappyScore = 0, flappyHighScore = localStorage.getItem('memoFlappyHigh') || 0;
        let birdY, birdV, pipes, gameLoop, isFlappyPlaying = false;
        const canvas = document.getElementById('flappy-canvas'); const ctx = canvas.getContext('2d');
        document.getElementById('flappy-high').innerText = flappyHighScore;

        function startFlappy() {
            if(isFlappyPlaying) return; isFlappyPlaying = true;
            birdY = 150; birdV = 0; pipes = []; flappyScore = 0;
            document.getElementById('flappy-score').innerText = 0;
            document.getElementById('flappy-start-hint').style.display = "none"; document.getElementById('flappy-start-btn').style.display = "none"; document.getElementById('flappy-end-msg').style.display = "none";
            gameLoop = setInterval(updateFlappy, 20); 
            canvas.addEventListener('touchstart', function(e){ e.preventDefault(); birdV = -6; }, {passive: false});
            canvas.onclick = () => birdV = -6;
        }
        function updateFlappy() {
            ctx.clearRect(0,0,280,350); birdV += 0.4; birdY += birdV; ctx.font = "24px Arial"; ctx.fillText("â¤ï¸", 50, birdY);
            if(pipes.length === 0 || pipes[pipes.length-1].x < 150) { 
                let gap = 110; 
                let top = Math.random() * (350 - gap - 50) + 20; 
                pipes.push({x: 300, top: top, bottom: top + gap}); 
            }
            for(let i=0; i<pipes.length; i++) { 
                let p = pipes[i]; p.x -= 2; 
                ctx.fillStyle = "#4CAF50"; ctx.fillRect(p.x, 0, 40, p.top); ctx.fillRect(p.x, p.bottom, 40, 350 - p.bottom); 
                if(50+20 > p.x && 50 < p.x+40 && (birdY < p.top || birdY > p.bottom)) gameOverFlappy(); 
                if(p.x === 50) { flappyScore++; document.getElementById('flappy-score').innerText = flappyScore; } 
            }
            if(birdY > 350 || birdY < 0) gameOverFlappy();
        }
        function gameOverFlappy() {
            clearInterval(gameLoop); isFlappyPlaying = false;
            let msg = ""; let title = "";
            if(flappyScore > flappyHighScore) { flappyHighScore = flappyScore; localStorage.setItem('memoFlappyHigh', flappyHighScore); document.getElementById('flappy-high').innerText = flappyHighScore; title = "ğŸ‰ Ø³ÙƒÙˆØ± Ø¬Ø¯ÙŠØ¯! ğŸ‰"; msg = `Ø§Ù„Ø³ÙƒÙˆØ±: ${flappyScore}<br>Ø´Ø§Ø·Ø±Ù‡ ÙŠ Ù…ÙŠÙ…Ùˆ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ`; } 
            else { title = "Ø®Ø³Ø±ØªÙŠ ğŸ¥º"; msg = `Ø§Ù„Ø³ÙƒÙˆØ±: ${flappyScore}<br>Ù‚Ø±Ø¨ØªÙŠ ØªØ¹Ø¯ÙŠ Ø§Ù„Ø§Ø³ÙƒÙˆØ± ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§ÙˆÙ„ÙŠ ØªØ§Ù†ÙŠ ğŸ’ª`; }
            const msgBox = document.getElementById('flappy-end-msg'); msgBox.innerHTML = `<h3 style="margin:0 0 10px 0; color:var(--primary-color);">${title}</h3>${msg}`; msgBox.style.display = "block"; document.getElementById('flappy-start-btn').style.display = "block"; document.getElementById('flappy-start-btn').innerText = "Ø§Ù„Ø¹Ø¨ÙŠ ØªØ§Ù†ÙŠ";
        }

        // --- Puzzle Logic Updated (Levels) ---
        let puzzleInterval;
        let puzzleSeconds = 0;
        let puzzleState = [];
        let puzzleBestTime = localStorage.getItem('memoPuzzleBest') || 0;
        
        if(puzzleBestTime > 0) document.getElementById('puzzle-best').innerText = "Ø£ÙØ¶Ù„: " + puzzleBestTime + " Ø«";

        function setLevel(lvl) {
            currentPuzzleLevel = lvl;
            document.querySelectorAll('.level-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('lvl-'+lvl).classList.add('active');
            renderPuzzlePreview(); 
            if(puzzleInterval) clearInterval(puzzleInterval);
            document.getElementById('puzzle-timer').innerText = "Ø§Ù„ÙˆÙ‚Øª: 0 Ø«";
            document.getElementById('puzzle-msg').style.display = 'none';
        }

        function renderPuzzlePreview() {
            puzzleState = [0, 1, 2, 3, 4, 5, 6, 7, 8];
            renderPuzzle(true); 
        }

        function startPuzzle() {
            puzzleSeconds = 0;
            document.getElementById('puzzle-timer').innerText = "Ø§Ù„ÙˆÙ‚Øª: 0 Ø«";
            document.getElementById('puzzle-msg').style.display = 'none';
            if(puzzleInterval) clearInterval(puzzleInterval);
            puzzleState = [0, 1, 2, 3, 4, 5, 6, 7, 8]; 
            for(let i=0; i<100; i++) {
                const emptyIdx = puzzleState.indexOf(8);
                const validMoves = [];
                const row = Math.floor(emptyIdx / 3);
                const col = emptyIdx % 3;
                if(row > 0) validMoves.push(emptyIdx - 3); 
                if(row < 2) validMoves.push(emptyIdx + 3); 
                if(col > 0) validMoves.push(emptyIdx - 1); 
                if(col < 2) validMoves.push(emptyIdx + 1); 
                const move = validMoves[Math.floor(Math.random() * validMoves.length)];
                [puzzleState[emptyIdx], puzzleState[move]] = [puzzleState[move], puzzleState[emptyIdx]];
            }
            renderPuzzle();
            puzzleInterval = setInterval(() => {
                puzzleSeconds++; 
                document.getElementById('puzzle-timer').innerText = "Ø§Ù„ÙˆÙ‚Øª: " + puzzleSeconds + " Ø«";
            }, 1000);
        }

        function renderPuzzle() {
            const container = document.getElementById('puzzle-container');
            container.innerHTML = '';
            const imgUrl = puzzleImages[currentPuzzleLevel];
            puzzleState.forEach((tileIdx, currentIdx) => {
                const div = document.createElement('div');
                div.className = 'puzzle-tile';
                if(tileIdx !== 8) {
                    div.style.backgroundImage = `url(${imgUrl})`;
                    div.style.backgroundPosition = `${(tileIdx % 3) * -90}px ${(Math.floor(tileIdx / 3)) * -90}px`;
                    div.onclick = () => moveTile(currentIdx);
                } else { div.className += ' puzzle-empty'; }
                container.appendChild(div);
            });
        }

        function moveTile(index) {
            const emptyIdx = puzzleState.indexOf(8);
            const row = Math.floor(index / 3);
            const col = index % 3;
            const emptyRow = Math.floor(emptyIdx / 3);
            const emptyCol = emptyIdx % 3;
            const isAdjacent = (Math.abs(row - emptyRow) + Math.abs(col - emptyCol)) === 1;
            if(isAdjacent) {
                [puzzleState[index], puzzleState[emptyIdx]] = [puzzleState[emptyIdx], puzzleState[index]];
                renderPuzzle();
                checkWin();
            }
        }

        function checkWin() {
            const isSolved = puzzleState.every((val, idx) => val === idx);
            if(isSolved) {
                clearInterval(puzzleInterval);
                let msg = `Ø®Ù„ØµØªÙŠÙ‡Ø§ ÙÙŠ ${puzzleSeconds} Ø«Ø§Ù†ÙŠØ©! Ø¨Ø±Ø§ÙÙˆ Ø¹Ù„ÙŠÙƒÙŠ â¤ï¸`;
                if(puzzleBestTime === 0 || puzzleSeconds < puzzleBestTime) {
                    puzzleBestTime = puzzleSeconds;
                    localStorage.setItem('memoPuzzleBest', puzzleBestTime);
                    document.getElementById('puzzle-best').innerText = "Ø£ÙØ¶Ù„: " + puzzleBestTime + " Ø«";
                    msg += "<br>ğŸ‰ Ø¯Ù‡ Ø±Ù‚Ù… Ù‚ÙŠØ§Ø³ÙŠ Ø¬Ø¯ÙŠØ¯! ğŸ‰";
                }
                document.getElementById('puzzle-msg').innerHTML = msg;
                document.getElementById('puzzle-msg').style.display = 'block';
            }
        }

        function showGame(gameId) {
            if(gameId === 'menu') { document.getElementById('games-menu').style.display = 'flex'; document.querySelectorAll('.game-wrapper').forEach(g => g.style.display = 'none'); resetAllGames(); } 
            else { document.getElementById('games-menu').style.display = 'none'; document.getElementById(gameId).style.display = 'block'; }
            if(gameId === 'puzzle-game') renderPuzzlePreview();
        }

        function resetAllGames() {
            userRpsScore = 0; compRpsScore = 0; document.getElementById('user-rps-score').innerText = 0; document.getElementById('comp-rps-score').innerText = 0; document.getElementById('rps-result').innerText = "Ø§Ù„Ø¹Ø¨ÙŠ Ø¨Ù‚ÙŠ Ù…Ø´ Ù‡Ø®Ø³Ø± Ø²ÙŠ ÙƒÙ„ Ù…Ø±Ù‡ ";
            clearInterval(gameLoop); isFlappyPlaying = false; document.getElementById('flappy-score').innerText = 0; document.getElementById('flappy-start-hint').style.display = "block"; document.getElementById('flappy-start-btn').style.display = "block"; document.getElementById('flappy-start-btn').innerText = "Ø§Ø¨Ø¯Ø£"; document.getElementById('flappy-end-msg').style.display = "none"; ctx.clearRect(0,0,280,350);
            clearInterval(gameInterval); clearInterval(timerInterval); cleanGame(); document.getElementById("score").innerText = 0; document.getElementById("game-timer").innerText = 30; document.getElementById("start-game-btn").style.display = "block"; document.getElementById("game-over-msg").style.display = "none"; document.getElementById("start-hint").style.display = "block"; document.getElementById("game-area").style.display = "block";
            clearInterval(puzzleInterval); document.getElementById('puzzle-timer').innerText = "Ø§Ù„ÙˆÙ‚Øª: 0 Ø«"; document.getElementById('puzzle-msg').style.display = 'none';
            // Whack reset
            clearInterval(whackTimerInterval); clearInterval(whackGameInterval); document.getElementById('whack-score').innerText = 0; document.getElementById('whack-grid').innerHTML = ''; document.getElementById('whack-msg').style.display = 'none';
        }

        function startGame() {
            score = 0; timeLeft = 30; document.getElementById("score").innerText = score; document.getElementById("game-timer").innerText = timeLeft; document.getElementById("game-over-msg").style.display = "none"; document.getElementById("start-hint").style.display = "none"; document.getElementById("start-game-btn").style.display = "none"; document.getElementById("high-score").innerText = highScore; document.getElementById("game-area").style.display = "block"; 
            cleanGame(); if(gameInterval) clearInterval(gameInterval); if(timerInterval) clearInterval(timerInterval);
            gameInterval = setInterval(spawnItem, 500); 
            timerInterval = setInterval(() => { timeLeft--; document.getElementById("game-timer").innerText = timeLeft; if(timeLeft <= 0) endGame(); }, 1000);
        }
        function spawnItem() { 
            const area = document.getElementById("game-area"); 
            const item = document.createElement("div"); 
            const isBomb = Math.random() < 0.3; 
            item.className = "game-item"; 
            item.innerHTML = isBomb ? "ğŸ’£" : "â¤ï¸"; 
            item.style.left = Math.random() * 85 + "%"; 
            item.style.top = "-60px"; 
            
            const catchItem = function() { 
                score += isBomb ? -2 : 1; 
                document.getElementById("score").innerText = score; 
                this.remove(); 
            };
            item.onclick = catchItem;
            item.ontouchstart = catchItem; 
            area.appendChild(item); 
            setTimeout(() => { if(item.parentNode) item.remove(); }, 1600); 
        }
        function endGame() { clearInterval(gameInterval); clearInterval(timerInterval); cleanGame(); if (score > highScore) { highScore = score; localStorage.setItem('memoHighScore', highScore); document.getElementById("high-score").innerText = highScore; } const msgBox = document.getElementById("game-over-msg"); msgBox.innerHTML = `Ø§Ù„Ø§Ø³ÙƒÙˆØ±: ${score} <br> <span style="font-size:16px;">Ø´Ø§Ø·Ø±Ø© ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ ğŸ˜</span>`; msgBox.style.display = "block"; document.getElementById("start-game-btn").style.display = "block"; document.getElementById("start-game-btn").innerText = "Ø§Ù„Ø¹Ø¨ÙŠ ØªØ§Ù†ÙŠ ğŸ”„"; }
        function cleanGame() { const items = document.querySelectorAll('.game-item'); items.forEach(i => i.remove()); }

        function showSection(id) {
            document.querySelectorAll('.container > div').forEach(div => { if (div.id !== 'login-screen' && div.id !== 'fake-notif' && div.id !== 'chat-icon' && div.id !== 'chat-window') div.classList.add('hidden'); });
            const section = document.getElementById(id); section.classList.remove("hidden"); resetAnimation(id);
            if (id === 'voice-section') { audioPlayer.pause(); } else { voicePlayer.pause(); voicePlayer.currentTime = 0; if (isMusicPlaying && id !== 'video-section') audioPlayer.play(); }
            const videoFrame = document.querySelector('#video-section iframe');
            const videoUrl = "https://drive.google.com/file/d/1qFDd0TsGE-fr4tefwybTOjqmNMCjIhgt/preview"; 
            if (id === 'video-section') { audioPlayer.pause(); videoFrame.src = videoUrl; } else { videoFrame.src = ""; }
            if (id === 'message-section') { startTypewriter(); } else { stopTypewriter(); }
            document.getElementById("love-result").style.display = "none"; document.getElementById("fingerprint").classList.remove("active");
            if (id !== 'games-hub') { showGame('menu'); } 
            if (id === 'visa-section') { visaBalance = 4000000; document.getElementById('card-balance-txt').innerText = "$4,000,000"; }
            if (id !== 'jar-section') { const jarText = document.getElementById("jar-text"); if(jarText) { jarText.innerHTML = "Ø¯ÙˆØ³ÙŠ ÙˆØ§Ø³Ø­Ø¨ÙŠ ÙˆØ±Ù‚Ø© ğŸ˜‰"; jarText.style.opacity = "1"; clearTimeout(jarTimeout); } }
            if (id !== 'wheel-section') { const wheelRes = document.getElementById("wheel-result"); if(wheelRes) { wheelRes.innerText = "Ø¯ÙˆØ³ÙŠ Ø¹Ø´Ø§Ù† Ù†Ø®ØªØ§Ø± ğŸ‘‡"; wheelRes.style.color = "var(--text-color)"; } }
            if (id === 'promises-section') { showPromises(); }
            if (id === 'weather-section') { checkWeather(); }
        }

        function resetAnimation(id) { const el = document.getElementById(id); el.querySelectorAll('.stagger-in').forEach(c => { c.style.animation = 'none'; c.offsetHeight; c.style.animation = null; }); }
        
        let typeI = 0;
        function startTypewriter() { 
            stopTypewriter(); 
            const el = document.getElementById("typewriter-text"); el.innerHTML = ""; typeI = 0; 
            typeLoop(); 
        }
        function stopTypewriter() { if(typingTimeout) clearTimeout(typingTimeout); }
        function typeLoop() { 
            if (typeI < msg1.length) { 
                document.getElementById("typewriter-text").innerHTML += msg1.charAt(typeI); 
                typeI++; 
                typingTimeout = setTimeout(typeLoop, 40); 
            }
        }
        
        function startTimer() { const start = new Date("2024-11-13T00:00:00"); setInterval(() => { const diff = new Date() - start; document.getElementById("days").innerText = Math.floor(diff / 86400000); document.getElementById("hours").innerText = Math.floor((diff % 86400000) / 3600000); document.getElementById("minutes").innerText = Math.floor((diff % 3600000) / 60000); document.getElementById("seconds").innerText = Math.floor((diff % 60000) / 1000); }, 1000); }
        function startRain() { setInterval(() => { const h = document.createElement("div"); h.classList.add("heart-rain"); h.innerHTML = Math.random() > 0.5 ? "â¤ï¸" : "ğŸŒ¸"; h.style.left = Math.random() * 100 + "vw"; h.style.animationDuration = Math.random() * 3 + 4 + "s"; document.body.appendChild(h); setTimeout(() => h.remove(), 6000); }, 300); }

        // --- CHAT BOT LOGIC (UPDATED WITH NAGGING SYSTEM) ---
        let idleTimer;
        let naggingLevel = 0;
        let originalTitle = document.title;
        let titleInterval;
        
        function toggleChat() {
            const win = document.getElementById('chat-window');
            if (win.classList.contains('hidden')) {
                win.classList.remove('hidden');
                loadChat();
                checkInitiator(); 
                resetIdleTimer(); 
            } else {
                win.classList.add('hidden');
                clearTimeout(idleTimer);
                stopTitleFlashing();
            }
        }

        function loadChat() {
            const history = localStorage.getItem('memoChatHistory');
            const chatBody = document.getElementById('chat-body');
            if (history) {
                chatBody.innerHTML = history;
                chatBody.scrollTop = chatBody.scrollHeight;
            }
        }

        function checkInitiator() {
            const chatBody = document.getElementById('chat-body');
            if(chatBody.innerHTML.trim() === "") {
                const hour = new Date().getHours();
                let timeMsg = hour < 12 ? "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ÙŠØ§ Ù…ÙŠÙ…Ùˆ â˜€ï¸" : "Ù…Ø³Ø§ Ø§Ù„Ø¬Ù…Ø§Ù„ ÙŠØ§ Ø±ÙˆØ­ÙŠ ğŸŒ™";
                addBotMessage(timeMsg);
                setTimeout(() => {
                    addBotMessage("ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ù…Ù† Ø¢Ø®Ø± Ù…Ø±Ø© ÙØªØ­ØªÙŠ ÙÙŠÙ‡Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹ â¤ï¸");
                }, 1000);
            }
        }

        function clearChat() {
            if(confirm("Ù…ØªØ£ÙƒØ¯Ø© ÙŠØ§ Ù…ÙŠÙ…Ùˆ Ø¹Ø§ÙŠØ²Ø© ØªÙ…Ø³Ø­ÙŠ Ø§Ù„Ø´Ø§Øª ÙƒÙ„Ù‡ØŸ ğŸ—‘ï¸")) {
                localStorage.removeItem('memoChatHistory');
                document.getElementById('chat-body').innerHTML = "";
                checkInitiator(); 
            }
        }

        function resetIdleTimer() {
            clearTimeout(idleTimer);
            stopTitleFlashing();
            naggingLevel = 0;
            // Start nagging after 25 seconds of silence
            idleTimer = setTimeout(startNagging, 25000);
        }

        function startNagging() {
            naggingLevel++;
            let msg = "";

            if (naggingLevel === 1) {
                msg = "Ù…ÙŠÙ…Ùˆ.. Ø±Ø­ØªÙŠ ÙÙŠÙ†ØŸ ğŸ‘€";
            } else if (naggingLevel === 2) {
                msg = "Ø¨Ù‚ÙˆÙ„Ùƒ Ø¥ÙŠÙ‡.. ØªÙØªÙƒØ±ÙŠ Ø§Ù„Ø¨Ø·Ø±ÙŠÙ‚ Ø¹Ù†Ø¯Ù‡ Ø±ÙƒØ¨ØŸ ğŸ¤”";
            } else if (naggingLevel === 3) {
                msg = "Ù…ÙŠÙ…Ùˆ Ù…ÙŠÙ…Ùˆ Ù…ÙŠÙ…Ùˆ Ù…ÙŠÙ…Ùˆ Ù…ÙŠÙ…Ùˆ ğŸ“¢";
                startTitleFlashing(); // Change title here
            } else if (naggingLevel === 4) {
                msg = "Ø¹Ø§Ù…Ù„Ù‡ Ø¥ÙŠÙ‡ ÙˆØ­Ø´ØªÙŠÙ†ÙŠ.. Ø±Ø¯ÙŠ Ø¨Ù‚Ù‰ ğŸ¥º";
            } else {
                // Loop random nagging
                const randomNags = ["Ø¨Ø®Ø®Ø®Ø®Ø®! ğŸ‘»", "Ù‡Ùˆ Ø§Ù„Ù†Øª ÙØµÙ„ ÙˆÙ„Ø§ Ø¥ÙŠÙ‡ØŸ", "Ø·Ø¨ Ø±Ø¯ÙŠ Ø¨Ù†Ù‚Ø·Ø© Ø­ØªÙ‰..", "Ø£Ù†Ø§ Ø²Ø¹Ù„Øª Ø®Ù„Ø§Øµ ğŸ¥€"];
                msg = randomNags[Math.floor(Math.random() * randomNags.length)];
            }

            addBotMessage(msg);
            
            // Vibrate if supported
            if (navigator.vibrate) navigator.vibrate(200);

            // Schedule next nag
            idleTimer = setTimeout(startNagging, 25000);
        }

        function startTitleFlashing() {
            if(titleInterval) return;
            let state = false;
            titleInterval = setInterval(() => {
                document.title = state ? "Ø±Ø¯ÙŠ Ø¹Ù„ÙŠØ§ ÙŠØ§ Ù…ÙŠÙ…Ùˆ! ğŸ“¢" : originalTitle;
                state = !state;
            }, 1000);
        }

        function stopTitleFlashing() {
            clearInterval(titleInterval);
            titleInterval = null;
            document.title = originalTitle;
        }

        function sendChatMessage() {
            const input = document.getElementById('chat-input');
            const msg = input.value.trim();
            if (msg === "") return;

            addUserMessage(msg);
            input.value = "";
            resetIdleTimer(); // Reset timer on user action
            
            // Show typing indicator
            const typing = document.getElementById('typing-indicator');
            typing.style.display = 'block';
            document.getElementById('chat-body').scrollTop = document.getElementById('chat-body').scrollHeight;

            setTimeout(() => {
                typing.style.display = 'none';
                getBotResponse(msg);
            }, 1500);
        }

        function addUserMessage(text) {
            const chatBody = document.getElementById('chat-body');
            const div = document.createElement('div');
            div.className = 'chat-msg user-msg';
            div.innerText = text;
            chatBody.appendChild(div);
            saveChat();
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        function addBotMessage(text) {
            const chatBody = document.getElementById('chat-body');
            const div = document.createElement('div');
            div.className = 'chat-msg bot-msg';
            div.innerText = text;
            chatBody.appendChild(div);
            saveChat();
            chatBody.scrollTop = chatBody.scrollHeight;
            
            const audio = document.getElementById('msg-sound');
            if(audio) { audio.currentTime = 0; audio.play(); }
        }

        function saveChat() {
            const chatBody = document.getElementById('chat-body');
            localStorage.setItem('memoChatHistory', chatBody.innerHTML);
        }

        function getBotResponse(msg) {
            msg = msg.toLowerCase();
            let reply = "";

            if (msg.includes("Ø¨Ø­Ø¨Ùƒ")) {
                reply = "ÙˆØ§Ù†Ø§ Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠ ÙÙˆÙ‚ Ù…Ø§ ØªØªØ®ÙŠÙ„ÙŠ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙˆØ§Ù„Ù„Ù‡ â¤ï¸";
            } else if (msg.includes("Ø¨Ù…ÙˆØª ÙÙŠÙƒ")) {
                reply = "Ø¯Ù†Ø§ Ø§Ù„ÙŠ Ø¨Ù…ÙˆØª ÙÙŠÙƒÙŠ ÙˆØ§Ù„Ù„Ù‡ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ÙˆØ¨ØªØ¯Ø§ÙŠÙ‚ Ø§ÙˆÙŠ Ù„Ù…Ø§ Ø¨Ø­Ø³ ÙÙŠÙƒÙŠ Ø­Ø§Ø¬Ù‡ Ø§Ù„Ø­ÙˆØ§Ø± Ø¨ÙŠØ®Ù†Ù‚Ù†ÙŠ Ø§ÙˆÙŠ";
            } else if (msg.includes("ÙŠØ§ Ø±ÙˆØ­ÙŠ")) {
                reply = "Ù‚Ù„Ø¨ Ø±ÙˆØ­Ùƒ ÙˆØ§Ù„Ù„Ù‡";
            } else if (msg.includes("Ø²Ø¹Ù„Ø§Ù†Ø©") || msg.includes("Ù…Ø®Ù†ÙˆÙ‚Ø©") || msg.includes("Ù…ØªØ¶Ø§ÙŠÙ‚Ø©") || msg.includes("Ø²Ù‡Ù‚Ø§Ù†Ù‡")) {
                reply = "ÙÙŠ Ø§ÙŠ Ø¨Ø³ ÙŠØ±ÙˆØ­ÙŠ ÙÙŠ ØªØ¹Ø§Ù„ÙŠ ÙØ­Ø¶Ù†ÙŠ Ø¨Ø³ ÙˆÙ†ØªÙƒÙ„Ù… Ø³ÙˆØ§ ÙˆØ§Ù†Ø§ Ø¬Ù…Ø¨Ùƒ ÙˆØ§Ù„Ù„Ù‡ ÙŠØ§Ø±ÙˆØ­ÙŠ Ø­Ù‚Ùƒ Ø¹Ù„ÙŠØ§ Ø§Ù†Ø§ Ù…Ù† ÙƒÙ„ Ø­Ø§Ø¬Ù‡ Ø§Ù†Ø§ Ø¬Ù…Ø¨Ùƒ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ Ø¨Ø­Ø¨Ùƒ Ø§ÙˆÙŠ ÙŠ Ø­Ø¨ÙŠØ¨ØªÙŠ ØªØ¹Ø§Ù„ÙŠ Ø±Ù†ÙŠ Ø¹Ù„ÙŠØ§ Ù†ØªÙƒÙ„Ù…";
            } else if (msg.includes("Ù…Ø¨Ø¶ÙˆÙ†Ù‡")) {
                reply = "ØªØ¹Ø§Ù„ÙŠ Ù†Ù„Ø¹Ø¨ Ø§Ù‚ÙˆÙ„Ùƒ Ø§Ù„Ø¨Ø³ÙŠ ÙˆÙ‡Ø¬ÙŠÙ„Ùƒ ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ø§ØµÙ„Ø§";
            } else if (msg.includes("Ø¬Ø¹Ø§Ù†Ø©") || msg.includes("Ø¹Ø§ÙŠØ²Ø© Ø¢ÙƒÙ„")) {
                reply = "Ø§Ù„Ø¨Ø³ÙŠ ÙˆÙŠÙ„Ø§ Ù†Ù†Ø²Ù„ Ù†Ø§ÙƒÙ„ .. Ø§Ù„Ø¹Ø²ÙˆÙ…Ø© Ø¹Ù„ÙŠØ§!";
            } else if (msg.includes("Ø¨ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡") || msg.includes("Ø¨ØªØ¹Ù…Ù„ Ø§ÙŠÙ‡") || msg.includes("ÙÙŠÙ†Ùƒ")) {
                reply = "Ø¨ÙÙƒØ± ÙÙŠÙƒÙŠ.. Ù‡Ùˆ Ø£Ù†Ø§ ÙˆØ±Ø§ÙŠØ§ ØºÙŠØ±ÙƒØŸ ğŸ˜‰";
            } else if (msg.includes("ÙˆØ­Ø´ØªÙ†ÙŠ")) {
                reply = "ÙˆØ§Ù†ØªÙŠ ÙƒÙ…Ø§Ù† ÙˆØ­Ø´ØªÙŠÙ†ÙŠ Ø£ÙˆÙŠ ÙÙˆÙ‚ Ù…Ù†ØªÙŠ Ù…ØªØ®ÙŠÙ„Ù‡ ÙŠØ§ Ù…ÙŠÙ…Ùˆ ÙˆØ§Ù„Ù„Ù‡.. ØªØ¹Ø§Ù„ÙŠ ÙÙŠ Ø­Ø¶Ù†ÙŠ Ø¨Ù‚Ù‰ ğŸ«‚";
            } else if (msg.includes("Ø§Ù†Øª Ø¹Ø¨ÙŠØ·") || msg.includes("ÙŠØ§ ØºØ¨ÙŠ") || msg.includes("ØºØ¨ÙŠ")) {
                reply = "Ù…Ù‚Ø¨ÙˆÙ„Ø© Ù…Ù†Ùƒ ÙŠØ§ Ù…Ù„ÙƒÙ‡.. Ø¨Ø­Ø¨Ùƒ Ø¨Ø±Ø¶Ù‡ ğŸ˜‚";
            } else if (msg.includes("Ø­Ù…ÙˆØ¯ÙŠ")) {
                reply = "Ø¹ÙŠÙˆÙ† Ø­Ù…ÙˆØ¯ÙŠ Ù‚Ù„Ø¨ Ø­ÙˆØ¯ÙŠ";
            } else if (msg.includes("Ø¹Ø§Ù…Ù„ Ø§ÙŠ") || msg.includes("Ø¹Ø§Ù…Ù„ Ø¥ÙŠÙ‡")) {
                reply = "ÙŠØ¹Ù†ÙŠ Ø¨ØµØ±Ø§Ø­Ù‡ Ù‡Ø¨Ù‚ÙŠ ØªÙ…Ø§Ù… Ø§Ø²Ø§ÙŠ Ù…Ù† ØºÙŠØ±Ùƒ ØªØ¹Ø§Ù„ÙŠ Ù†Ù†Ø²Ù„ ÙˆØ­Ø´ØªÙŠÙ†ÙŠ";
            } else if (msg.includes("ÙÙˆÙŠØ³") || msg.includes("ØµÙˆØªÙƒ")) {
                reply = "Ø±Ù†ÙŠ Ø¹Ù„ÙŠØ§ ÙŠØ¹Ù†ÙŠ ÙŠ Ø°ÙƒÙŠÙ‡ ØµÙˆØªÙƒ ÙˆØ­Ø´Ù†ÙŠ ğŸ˜‰ğŸ“";
            } else if (msg.includes("ÙˆØ§Ù„Ù„Ù‡")) {
                reply = "ÙˆØ§Ù„Ù„Ù‡ Ø¨Ø­Ø¨Ùƒ â¤ï¸";
            } else if (msg.includes("Ø²Ù†Ø§Ù†")) {
                reply = "Ø²Ù†Ø§Ù† Ø§Ù‡ Ø¨Ø³ Ø¨Ø­Ø¨Ùƒ Ø¨Ø±Ø¶Ùˆ ğŸ˜‚";
            } else if (msg.includes("ØªØ¹Ø§Ù„ÙŠ Ù†Ù†Ø²Ù„") || msg.includes("Ù†Ø®Ø±Ø¬")) {
                reply = "Ø±Ù†ÙŠ Ø¹Ù„ÙŠØ§ Ø·Ø¨ Ù†Ø¸Ø¨Ø·Ù‡Ø§ ğŸ˜‰";
            } else if (msg.includes("Ø§Ù†Øª Ù…Ø§Ù„Ùƒ") || msg.includes("Ù…Ø§Ù„Ùƒ Ø¨ÙŠØ§")) {
                reply = "Ø§Ù†ØªÙŠ Ù…Ø§Ù„ÙŠ ÙˆØ¯Ù†ÙŠØªÙŠ ÙˆØ­ÙŠØ§ØªÙŠ ÙŠ Ù…ÙŠÙ…Ùˆ â¤ï¸";
            } else if (msg.includes("Ø§Ù†Øª Ø¹Ø³Ù„") || msg.includes("Ø¹Ø³Ù„ Ø§ÙˆÙŠ")) {
                reply = "ÙˆØ§Ù„Ù„Ù‡ Ø§Ù†ØªÙŠ Ø§Ù„ÙŠ Ø¹Ø³Ù„ ÙˆØ³ÙƒØ± Ù…Ø­Ù„ÙŠ ğŸ¯";
            } else {
                const randomReplies = [
                    "ÙŠØ§ Ø´ÙŠØ®Ø©ØŸ Ø§Ø­Ù„ÙÙŠ! ğŸ˜‚",
                    "ÙŠØ§ Ø®ÙˆØ§ØªÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø³Ù„.. ÙƒÙ…Ù„ÙŠ Ø³Ø§Ù…Ø¹Ùƒ ğŸ¥°",
                    "Ù‚Ù„Ø¨ Ø­Ù…ÙˆØ¯ÙŠ ÙˆØ§Ù„Ù„Ù‡ â¤ï¸",
                    "Ø§Ø¨Ø¹ØªÙŠÙ„ÙŠ ÙÙˆÙŠØ³ Ù†ÙˆØª Ø£Ø­Ø³Ù† Ø¹Ø§ÙŠØ² Ø£Ø³Ù…Ø¹ ØµÙˆØªÙƒ ğŸ¤",
                    "Ø§ÙƒÙ„ØªÙŠ ÙˆÙ„Ø§ Ù„Ø³Ù‡ ÙŠØ§ Ù…ÙŠÙ…ÙˆØŸ",
                    "Ø·Ø¨ Ù…ØªØ±Ù†ÙŠ Ø¹Ù„ÙŠØ§ ÙˆÙ†Ù†Ø²Ù„ Ù†Ø§ÙƒÙ„ Ø³ÙˆØ§ØŸ ğŸ”",
                    "ÙˆØ­Ø´ØªÙŠÙ†ÙŠ.. Ù‚ÙˆÙ„ÙŠÙ„ÙŠ Ø¨ØªØ¹Ù…Ù„ÙŠ Ø§ÙŠÙ‡ØŸ",
                    "Ø§ÙŠÙˆÙ‡ ÙƒØ¯Ù‡ Ø§Ø­ÙƒÙŠÙ„ÙŠ ÙƒÙ…Ø§Ù† ğŸ˜"
                ];
                reply = randomReplies[Math.floor(Math.random() * randomReplies.length)];
            }
            addBotMessage(reply);
        }
    </script>
</body>
</html>
